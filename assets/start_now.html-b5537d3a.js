import{_ as y,r as c,o as i,c as d,b as s,e as l,d as n,w as o,a as r}from"./app-4f7ad5aa.js";const u="/assets/内置API_回测模型_实盘模型-a800c759.png",C="/assets/内置API_操作_数据管理_下载全部-d3b5864c.png",m="/assets/内置API_批量下载-c98af807.png",_="/assets/内置API_基本信息_回测参数-eec55083.png",b="/assets/内置API_三种机制对比-bc32690d.png",A="/assets/内置API_不同机制匹配不同场景需求-6942d075.png",v={},h=r('<h3 id="一、概述" tabindex="-1"><a class="header-anchor" href="#一、概述" aria-hidden="true">#</a> 一、概述</h3><p>QMT 极速策略交易系统，以下简称 <strong>QMT 系统</strong>，内置了 <strong><code>3.6 版本</code></strong> 的 <code>python</code> 运行环境，提供<strong>行情数据</strong>与<strong>交易下单</strong>两大核心功能。通过编写 python 脚本，可以完成指标计算，策略编写，策略回测，实盘下单等需求。</p><h3 id="二、场景需求" tabindex="-1"><a class="header-anchor" href="#二、场景需求" aria-hidden="true">#</a> 二、场景需求</h3><p>QMT 系统支持<strong>回测模型</strong>与<strong>实盘模型</strong>。</p><p><img src="'+u+'" alt=""></p><p><strong>回测模型：</strong> 指在历史 k 线上，自左向右逐根遍历 k 线，以模拟的资金账号记录每日的买卖信号，持仓盈亏，最终展示策略在历史上的净值走势结果。</p><p><strong>实盘模型：</strong> 指在盘中收取最新的动态行情，即时发送买卖信号到交易所，判断委托状态，需要实时重复报撤的模型。</p><br><p><strong>两类模型分别有各自的注意点：</strong></p><h4 id="回测模型" tabindex="-1"><a class="header-anchor" href="#回测模型" aria-hidden="true">#</a> 回测模型</h4><ol><li><p>回测是遍历固定的历史数据：</p><p><img src="'+C+'" alt=""></p><ul><li>首先需要下载历史行情，首次下载可以在界面左上角，点击<code>操作</code>，选择<code>数据管理</code>补充行情，选择回测的周期，如<code>日线</code>，所需的板块数据，如<code>沪深A股板块</code>，时间范围选择<code>全部</code>，下载完整历史行情</li></ul><p><img src="'+m+'" alt=""></p><ul><li>其次设置每日定时更新，可以点击客户端右下角<code>行情</code>按钮，在<code>批量下载</code>界面选择需要每天更新的数据，勾选<code>定时下载</code>选项，之后每天在指定时间会自动下载行情数据到本地</li></ul></li><li><p>回测模型取本地数据遍历，不需要向服务器订阅实时行情，应使用 <code>get_market_data_ex</code>函数，指定<code>subscribe</code>参数为<code>False</code>，来读取本地行情数据。</p></li><li><p>回测模型的撮合规则为，指定交易价格在当前k线高低点间的，按指定价格撮合，超过高低点的，按当前 k 线收盘价撮合。委托数量大于可用数量时，按可用数量撮合。</p></li></ol><p><img src="'+_+'" alt=""></p><ol start="4"><li>回测模型右侧的基本信息，如默认周期，默认主图，在<code>我的界面</code>点击回测时会生效。在行情界面k线下点击回测，以当前 k 线的周期，品种为准。回测必须以<code>副图模式</code>执行，不要选择主图 /主图叠加.</li></ol><h4 id="实盘模型" tabindex="-1"><a class="header-anchor" href="#实盘模型" aria-hidden="true">#</a> 实盘模型</h4><p>当你回测结束，你需要开始实盘模型，注意这里提到的实盘，指的是接收未来 K 线的数据，生成策略信号，进行交易下单。</p>',15),B={class:"custom-container tip"},E=s("p",{class:"custom-container-title"},"提示",-1),D=s("code",null,"模拟柜台模拟交易",-1),f=s("code",null,"真实柜台实盘交易",-1),g={href:"https://dict.thinktrader.net/innerApi/interface_operation.md#%E9%85%8D%E7%BD%AE%E8%B4%A6%E5%8F%B7",target:"_blank",rel:"noopener noreferrer"},k=s("p",null,"你要运行实盘模型，QMT 系统提供两种交易模式：",-1),x=s("strong",null,"逐 k 线生效",-1),w=s("code",null,"passorder",-1),I=s("strong",null,"快速交易",-1),K=s("code",null,"quicktrade",-1),T=s("code",null,"0",-1),P=s("code",null,"handlebar",-1),S=s("code",null,"handlebar",-1),M=s("code",null,"handlebar",-1),q=s("code",null,"ContxtInfo",-1),Q=s("code",null,"ContextInfo",-1),V=s("code",null,"passorder",-1),L=s("strong",null,"快速交易",-1),N=s("code",null,"quicktrade",-1),R=s("code",null,"2",-1),H=s("code",null,"Class a()",-1),O=s("code",null,"ContextInfo",-1),Y=s("li",null,[s("p",null,"实盘的撮合规则以交易所为准。股票品种的话，价格不能超过 2% 的价格笼子否则废单。数量超过可用数量时会废单。")],-1),G=s("p",null,[l("实盘模型需要在模型交易界面执行。模型交易界面，选择新建策略交易，添加需要的模型。运行模式可以选择"),s("code",null,"模拟"),l("或"),s("code",null,"实盘"),l("。")],-1),U=s("code",null,"模拟信号模式",-1),Z=s("code",null,"实盘交易模式",-1),j={class:"custom-container tip"},z=s("p",{class:"custom-container-title"},"提示",-1),J=s("code",null,"模拟",-1),W=s("code",null,"实盘",-1),X=s("code",null,"实盘账号（真实交易所柜台）",-1),$=s("code",null,"模拟账号（模拟交易柜台）",-1),ss={href:"https://xuntou.net/#/productvip",target:"_blank",rel:"noopener noreferrer"},ls=r('<h3 id="三、运行机制对比" tabindex="-1"><a class="header-anchor" href="#三、运行机制对比" aria-hidden="true">#</a> 三、运行机制对比</h3><p>QMT 系统提供两大类(事件驱动与定时任务)，共三种运行机制。</p><p><img src="'+b+'" alt=""></p><h4 id="逐-k-线驱动-handlebar" tabindex="-1"><a class="header-anchor" href="#逐-k-线驱动-handlebar" aria-hidden="true">#</a> 逐 K 线驱动：<code>handlebar</code></h4><p><code>handlebar</code>是<strong>主图历史 k 线</strong>+<strong>盘中订阅推送</strong>。运行开始时，所选周期历史 k 线从左向右每根触发一次<code>handlebar</code>函数调用。盘中时，主图品种每个新分笔数据到达，触发一次<code>handlebar</code>函数调用。</p>',5),os={class:"custom-container tip"},ns=s("p",{class:"custom-container-title"},"提示",-1),Fs=r('<h4 id="事件驱动-subscribe-订阅推送" tabindex="-1"><a class="header-anchor" href="#事件驱动-subscribe-订阅推送" aria-hidden="true">#</a> 事件驱动 ：<code>subscribe</code> 订阅推送</h4><p>盘中订阅指定品种的分笔数据，新分笔到达时，触发指定的回调函数。</p><h4 id="定时任务-run-time-定时运行" tabindex="-1"><a class="header-anchor" href="#定时任务-run-time-定时运行" aria-hidden="true">#</a> 定时任务 ：<code>run_time</code> 定时运行</h4><p>指定固定的时间间隔，持续触发指定的回调函数.</p><h4 id="不同机制匹配不同场景需求" tabindex="-1"><a class="header-anchor" href="#不同机制匹配不同场景需求" aria-hidden="true">#</a> 不同机制匹配不同场景需求</h4><p><img src="'+A+'" alt=""></p><table><thead><tr><th>机制</th><th>分类</th><th>特点</th><th>匹配需求</th></tr></thead><tbody><tr><td>逐 K 线运行（<code>handlebar</code>）</td><td>事件驱动</td><td>同时支持历史回测和盘中可模拟逐K线效果</td><td>在实盘中模拟逐K线运行的效果</td></tr><tr><td>订阅推送（<code>subscribe</code>）</td><td>事件驱动</td><td>盘中行情分笔触发函数调用</td><td>盘中随分笔行情判断交易</td></tr><tr><td>定时运行（<code>run_time</code>）</td><td>定时任务</td><td>固定间隔触发调用</td><td>盘中固定时间间隔判断交易</td></tr></tbody></table><h3 id="四、逐-k-线驱动-handlebar-示例" tabindex="-1"><a class="header-anchor" href="#四、逐-k-线驱动-handlebar-示例" aria-hidden="true">#</a> 四、逐 K 线驱动（handlebar）示例</h3><p>因此，结合不同场景需求（回测或实盘），针对不同的机制（定时任务或事件驱动），我们分别给出回测与实盘的完整示例，复制到策略编辑器中即可使用。</p><p>在编写策略前，有以下注意事项：</p><div class="custom-container danger"><p class="custom-container-title">警告</p><p>在编写一个策略时，首先需要在代码的最前一行写上： <code>#coding:gbk</code> 统一脚本的编码格式是<code>GBK</code></p><p>缩进需要统一 全部统一为<code>····</code>或者<code>-&gt;</code></p></div><h4 id="回测示例-基于-handlebar" tabindex="-1"><a class="header-anchor" href="#回测示例-基于-handlebar" aria-hidden="true">#</a> 回测示例-基于 handlebar</h4>',12),es=s("p",null,"复制代码以下代码到策略编辑器：",-1),as=s("div",{class:"language-python line-numbers-mode","data-ext":"py"},[s("pre",{class:"shiki dracula",style:{"background-color":"#282A36"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#6272A4"}},"#coding:gbk")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6272A4"}},"#导入常用库")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FF79C6"}},"import"),s("span",{style:{color:"#F8F8F2"}}," pandas "),s("span",{style:{color:"#FF79C6"}},"as"),s("span",{style:{color:"#F8F8F2"}}," pd")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FF79C6"}},"import"),s("span",{style:{color:"#F8F8F2"}}," numpy "),s("span",{style:{color:"#FF79C6"}},"as"),s("span",{style:{color:"#F8F8F2"}}," np")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FF79C6"}},"import"),s("span",{style:{color:"#F8F8F2"}}," talib")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6272A4"}},"#示例说明：本策略，通过计算快慢双均线，在金叉时买入，死叉时做卖出 点击回测运行 主图选择要交易的股票品种")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FF79C6"}},"def"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#50FA7B"}},"init"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#FFB86C","font-style":"italic"}},"C"),s("span",{style:{color:"#F8F8F2"}},"):")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	"),s("span",{style:{color:"#6272A4"}},"#init handlebar函数的入参是ContextInfo对象 可以缩写为C")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	"),s("span",{style:{color:"#6272A4"}},"#设置测试标的为主图品种")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	C.stock"),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," C.stockcode "),s("span",{style:{color:"#FF79C6"}},"+"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"."),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#FF79C6"}},"+"),s("span",{style:{color:"#F8F8F2"}},"C.market")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	"),s("span",{style:{color:"#6272A4"}},"#line1和line2分别为两条均线期数")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	C.line1"),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#BD93F9"}},"10"),s("span",{style:{color:"#F8F8F2"}},"   "),s("span",{style:{color:"#6272A4"}},"#快线参数")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	C.line2"),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#BD93F9"}},"20"),s("span",{style:{color:"#F8F8F2"}},"   "),s("span",{style:{color:"#6272A4"}},"#慢线参数")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	"),s("span",{style:{color:"#6272A4"}},"#accountid为测试的ID 回测模式资金账号可以填任意字符串")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	C.accountid "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#E9F284"}},'"'),s("span",{style:{color:"#F1FA8C"}},"testS"),s("span",{style:{color:"#E9F284"}},'"'),s("span",{style:{color:"#F8F8F2"}},"  ")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FF79C6"}},"def"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#50FA7B"}},"handlebar"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#FFB86C","font-style":"italic"}},"C"),s("span",{style:{color:"#F8F8F2"}},"):")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	"),s("span",{style:{color:"#6272A4"}},"#当前k线日期")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	bar_date "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," timetag_to_datetime(C.get_bar_timetag(C.barpos), "),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"%Y%m"),s("span",{style:{color:"#BD93F9"}},"%d"),s("span",{style:{color:"#F1FA8C"}},"%H%M%S"),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F8F8F2"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	"),s("span",{style:{color:"#6272A4"}},"#回测不需要订阅最新行情使用本地数据速度更快 指定subscribe参数为否. 如果回测多个品种 需要先下载对应周期历史数据 ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	local_data "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," C.get_market_data_ex(["),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"close"),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F8F8F2"}},"], [C.stock], "),s("span",{style:{color:"#FFB86C","font-style":"italic"}},"end_time"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," bar_date, "),s("span",{style:{color:"#FFB86C","font-style":"italic"}},"period"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," C.period, "),s("span",{style:{color:"#FFB86C","font-style":"italic"}},"count"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#8BE9FD"}},"max"),s("span",{style:{color:"#F8F8F2"}},"(C.line1, C.line2), "),s("span",{style:{color:"#FFB86C","font-style":"italic"}},"subscribe"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#BD93F9"}},"False"),s("span",{style:{color:"#F8F8F2"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	close_list "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#8BE9FD","font-style":"italic"}},"list"),s("span",{style:{color:"#F8F8F2"}},"(local_data[C.stock].iloc["),s("span",{style:{color:"#FF79C6"}},":"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#BD93F9"}},"0"),s("span",{style:{color:"#F8F8F2"}},"])")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	"),s("span",{style:{color:"#6272A4"}},"#将获取的历史数据转换为DataFrame格式方便计算")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	"),s("span",{style:{color:"#6272A4"}},"#如果目前未持仓，同时快线穿过慢线，则买入8成仓位")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	"),s("span",{style:{color:"#FF79C6"}},"if"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#8BE9FD"}},"len"),s("span",{style:{color:"#F8F8F2"}},"(close_list) "),s("span",{style:{color:"#FF79C6"}},"<"),s("span",{style:{color:"#BD93F9"}},"1"),s("span",{style:{color:"#F8F8F2"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"		"),s("span",{style:{color:"#8BE9FD"}},"print"),s("span",{style:{color:"#F8F8F2"}},"(bar_date, "),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"行情不足 跳过"),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F8F8F2"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	line1_mean "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#8BE9FD"}},"round"),s("span",{style:{color:"#F8F8F2"}},"(np.mean(close_list["),s("span",{style:{color:"#FF79C6"}},"-"),s("span",{style:{color:"#F8F8F2"}},"C.line1"),s("span",{style:{color:"#FF79C6"}},":"),s("span",{style:{color:"#F8F8F2"}},"]), "),s("span",{style:{color:"#BD93F9"}},"2"),s("span",{style:{color:"#F8F8F2"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	line2_mean "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#8BE9FD"}},"round"),s("span",{style:{color:"#F8F8F2"}},"(np.mean(close_list["),s("span",{style:{color:"#FF79C6"}},"-"),s("span",{style:{color:"#F8F8F2"}},"C.line2"),s("span",{style:{color:"#FF79C6"}},":"),s("span",{style:{color:"#F8F8F2"}},"]), "),s("span",{style:{color:"#BD93F9"}},"2"),s("span",{style:{color:"#F8F8F2"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	"),s("span",{style:{color:"#8BE9FD"}},"print"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#FF79C6"}},"f"),s("span",{style:{color:"#F1FA8C"}},'"'),s("span",{style:{color:"#BD93F9"}},"{"),s("span",{style:{color:"#F8F8F2"}},"bar_date"),s("span",{style:{color:"#BD93F9"}},"}"),s("span",{style:{color:"#F1FA8C"}}," 短均线"),s("span",{style:{color:"#BD93F9"}},"{"),s("span",{style:{color:"#F8F8F2"}},"line1_mean"),s("span",{style:{color:"#BD93F9"}},"}"),s("span",{style:{color:"#F1FA8C"}}," 长均线"),s("span",{style:{color:"#BD93F9"}},"{"),s("span",{style:{color:"#F8F8F2"}},"line2_mean"),s("span",{style:{color:"#BD93F9"}},"}"),s("span",{style:{color:"#F1FA8C"}},'"'),s("span",{style:{color:"#F8F8F2"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	account "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," get_trade_detail_data("),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"test"),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"stock"),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"account"),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F8F8F2"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	account "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," account["),s("span",{style:{color:"#BD93F9"}},"0"),s("span",{style:{color:"#F8F8F2"}},"]")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	available_cash "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#8BE9FD","font-style":"italic"}},"int"),s("span",{style:{color:"#F8F8F2"}},"(account.m_dAvailable)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	holdings "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," get_trade_detail_data("),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"test"),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"stock"),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"position"),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F8F8F2"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	holdings "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," {i.m_strInstrumentID "),s("span",{style:{color:"#FF79C6"}},"+"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"."),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#FF79C6"}},"+"),s("span",{style:{color:"#F8F8F2"}}," i.m_strExchangeID : i.m_nVolume "),s("span",{style:{color:"#FF79C6"}},"for"),s("span",{style:{color:"#F8F8F2"}}," i "),s("span",{style:{color:"#FF79C6"}},"in"),s("span",{style:{color:"#F8F8F2"}}," holdings}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	holding_vol "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," holdings[C.stock] "),s("span",{style:{color:"#FF79C6"}},"if"),s("span",{style:{color:"#F8F8F2"}}," C.stock "),s("span",{style:{color:"#FF79C6"}},"in"),s("span",{style:{color:"#F8F8F2"}}," holdings "),s("span",{style:{color:"#FF79C6"}},"else"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#BD93F9"}},"0")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	"),s("span",{style:{color:"#FF79C6"}},"if"),s("span",{style:{color:"#F8F8F2"}}," holding_vol "),s("span",{style:{color:"#FF79C6"}},"=="),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#BD93F9"}},"0"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#FF79C6"}},"and"),s("span",{style:{color:"#F8F8F2"}}," line1_mean "),s("span",{style:{color:"#FF79C6"}},">"),s("span",{style:{color:"#F8F8F2"}}," line2_mean:")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"		vol "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#8BE9FD","font-style":"italic"}},"int"),s("span",{style:{color:"#F8F8F2"}},"(available_cash "),s("span",{style:{color:"#FF79C6"}},"/"),s("span",{style:{color:"#F8F8F2"}}," close_list["),s("span",{style:{color:"#FF79C6"}},"-"),s("span",{style:{color:"#BD93F9"}},"1"),s("span",{style:{color:"#F8F8F2"}},"] "),s("span",{style:{color:"#FF79C6"}},"/"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#BD93F9"}},"100"),s("span",{style:{color:"#F8F8F2"}},") "),s("span",{style:{color:"#FF79C6"}},"*"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#BD93F9"}},"100")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"		"),s("span",{style:{color:"#6272A4"}},"#下单开仓")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"		passorder("),s("span",{style:{color:"#BD93F9"}},"23"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#BD93F9"}},"1101"),s("span",{style:{color:"#F8F8F2"}},", C.accountid, C.stock, "),s("span",{style:{color:"#BD93F9"}},"5"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#FF79C6"}},"-"),s("span",{style:{color:"#BD93F9"}},"1"),s("span",{style:{color:"#F8F8F2"}},", vol, C)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"		"),s("span",{style:{color:"#8BE9FD"}},"print"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#FF79C6"}},"f"),s("span",{style:{color:"#F1FA8C"}},'"'),s("span",{style:{color:"#BD93F9"}},"{"),s("span",{style:{color:"#F8F8F2"}},"bar_date"),s("span",{style:{color:"#BD93F9"}},"}"),s("span",{style:{color:"#F1FA8C"}},' 开仓"'),s("span",{style:{color:"#F8F8F2"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"		C.draw_text("),s("span",{style:{color:"#BD93F9"}},"1"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#BD93F9"}},"1"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"开"),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F8F8F2"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	"),s("span",{style:{color:"#6272A4"}},"#如果目前持仓中，同时快线下穿慢线，则全部平仓")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	"),s("span",{style:{color:"#FF79C6"}},"elif"),s("span",{style:{color:"#F8F8F2"}}," holding_vol "),s("span",{style:{color:"#FF79C6"}},">"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#BD93F9"}},"0"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#FF79C6"}},"and"),s("span",{style:{color:"#F8F8F2"}}," line1_mean "),s("span",{style:{color:"#FF79C6"}},"<"),s("span",{style:{color:"#F8F8F2"}}," line2_mean:")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"		"),s("span",{style:{color:"#6272A4"}},"#状态变更为未持仓")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"		C.holding"),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#BD93F9"}},"False")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"		"),s("span",{style:{color:"#6272A4"}},"#下单平仓")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"		passorder("),s("span",{style:{color:"#BD93F9"}},"24"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#BD93F9"}},"1101"),s("span",{style:{color:"#F8F8F2"}},", C.accountid, C.stock, "),s("span",{style:{color:"#BD93F9"}},"5"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#FF79C6"}},"-"),s("span",{style:{color:"#BD93F9"}},"1"),s("span",{style:{color:"#F8F8F2"}},", holding_vol, C)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"		"),s("span",{style:{color:"#8BE9FD"}},"print"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#FF79C6"}},"f"),s("span",{style:{color:"#F1FA8C"}},'"'),s("span",{style:{color:"#BD93F9"}},"{"),s("span",{style:{color:"#F8F8F2"}},"bar_date"),s("span",{style:{color:"#BD93F9"}},"}"),s("span",{style:{color:"#F1FA8C"}},' 平仓"'),s("span",{style:{color:"#F8F8F2"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"		C.draw_text("),s("span",{style:{color:"#BD93F9"}},"1"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#BD93F9"}},"1"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"平"),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F8F8F2"}},")")]),l(`
`),s("span",{class:"line"})])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1),ts=s("strong",null,"基础信息设置",-1),cs=s("strong",null,"回测参数设置",-1),rs=s("h4",{id:"实盘示例-基于-handlebar",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#实盘示例-基于-handlebar","aria-hidden":"true"},"#"),l(" 实盘示例-基于 handlebar")],-1),ps=s("p",null,"复制代码以下代码到策略编辑器：",-1),ys=s("div",{class:"language-python line-numbers-mode","data-ext":"py"},[s("pre",{class:"shiki dracula",style:{"background-color":"#282A36"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#6272A4"}},"#coding:gbk")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6272A4"}},"# 导入包")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FF79C6"}},"import"),s("span",{style:{color:"#F8F8F2"}}," pandas "),s("span",{style:{color:"#FF79C6"}},"as"),s("span",{style:{color:"#F8F8F2"}}," pd")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FF79C6"}},"import"),s("span",{style:{color:"#F8F8F2"}}," numpy "),s("span",{style:{color:"#FF79C6"}},"as"),s("span",{style:{color:"#F8F8F2"}}," np")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FF79C6"}},"import"),s("span",{style:{color:"#F8F8F2"}}," datetime")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6272A4"}},'"""')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6272A4"}},"示例说明：双均线实盘策略，通过计算快慢双均线，在金叉时买入，死叉时做卖出")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6272A4"}},'"""')]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FF79C6"}},"class"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#8BE9FD"}},"a"),s("span",{style:{color:"#F8F8F2"}},"():")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	"),s("span",{style:{color:"#FF79C6"}},"pass")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"A "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," a() "),s("span",{style:{color:"#6272A4"}},"#创建空的类的实例 用来保存委托状态 ")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FF79C6"}},"def"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#50FA7B"}},"init"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#FFB86C","font-style":"italic"}},"C"),s("span",{style:{color:"#F8F8F2"}},"):")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	A.stock"),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," C.stockcode "),s("span",{style:{color:"#FF79C6"}},"+"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"."),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#FF79C6"}},"+"),s("span",{style:{color:"#F8F8F2"}}," C.market "),s("span",{style:{color:"#6272A4"}},"#品种为模型交易界面选择品种")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	A.acct"),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," account "),s("span",{style:{color:"#6272A4"}},"#账号为模型交易界面选择账号")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	A.acct_type"),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," accountType "),s("span",{style:{color:"#6272A4"}},"#账号类型为模型交易界面选择账号")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	A.amount "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#BD93F9"}},"10000"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#6272A4"}},"#单笔买入金额 触发买入信号后买入指定金额")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	A.line1"),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#BD93F9"}},"17"),s("span",{style:{color:"#F8F8F2"}},"   "),s("span",{style:{color:"#6272A4"}},"#快线周期")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	A.line2"),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#BD93F9"}},"27"),s("span",{style:{color:"#F8F8F2"}},"   "),s("span",{style:{color:"#6272A4"}},"#慢线周期")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	A.waiting_list "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," [] "),s("span",{style:{color:"#6272A4"}},"#未查到委托列表 存在未查到委托情况暂停后续报单 防止超单")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	A.buy_code "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#BD93F9"}},"23"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#FF79C6"}},"if"),s("span",{style:{color:"#F8F8F2"}}," A.acct_type "),s("span",{style:{color:"#FF79C6"}},"=="),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"STOCK"),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#FF79C6"}},"else"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#BD93F9"}},"33"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#6272A4"}},"#买卖代码 区分股票 与 两融账号")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	A.sell_code "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#BD93F9"}},"24"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#FF79C6"}},"if"),s("span",{style:{color:"#F8F8F2"}}," A.acct_type "),s("span",{style:{color:"#FF79C6"}},"=="),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"STOCK"),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#FF79C6"}},"else"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#BD93F9"}},"34")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	"),s("span",{style:{color:"#8BE9FD"}},"print"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#FF79C6"}},"f"),s("span",{style:{color:"#F1FA8C"}},"'双均线实盘示例"),s("span",{style:{color:"#BD93F9"}},"{"),s("span",{style:{color:"#F8F8F2"}},"A.stock"),s("span",{style:{color:"#BD93F9"}},"}"),s("span",{style:{color:"#F1FA8C"}}," "),s("span",{style:{color:"#BD93F9"}},"{"),s("span",{style:{color:"#F8F8F2"}},"A.acct"),s("span",{style:{color:"#BD93F9"}},"}"),s("span",{style:{color:"#F1FA8C"}}," "),s("span",{style:{color:"#BD93F9"}},"{"),s("span",{style:{color:"#F8F8F2"}},"A.acct_type"),s("span",{style:{color:"#BD93F9"}},"}"),s("span",{style:{color:"#F1FA8C"}}," 单笔买入金额"),s("span",{style:{color:"#BD93F9"}},"{"),s("span",{style:{color:"#F8F8F2"}},"A.amount"),s("span",{style:{color:"#BD93F9"}},"}"),s("span",{style:{color:"#F1FA8C"}},"'"),s("span",{style:{color:"#F8F8F2"}},")")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FF79C6"}},"def"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#50FA7B"}},"handlebar"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#FFB86C","font-style":"italic"}},"C"),s("span",{style:{color:"#F8F8F2"}},"):")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	"),s("span",{style:{color:"#6272A4"}},"#跳过历史k线")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	"),s("span",{style:{color:"#FF79C6"}},"if"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#FF79C6"}},"not"),s("span",{style:{color:"#F8F8F2"}}," C.is_last_bar():")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"		"),s("span",{style:{color:"#FF79C6"}},"return")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	now "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," datetime.datetime.now()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	now_time "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," now.strftime("),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"%H%M%S"),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F8F8F2"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	"),s("span",{style:{color:"#6272A4"}},"# 跳过非交易时间")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	"),s("span",{style:{color:"#FF79C6"}},"if"),s("span",{style:{color:"#F8F8F2"}}," now_time "),s("span",{style:{color:"#FF79C6"}},"<"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"093000"),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#FF79C6"}},"or"),s("span",{style:{color:"#F8F8F2"}}," now_time "),s("span",{style:{color:"#FF79C6"}},">"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#E9F284"}},'"'),s("span",{style:{color:"#F1FA8C"}},"150000"),s("span",{style:{color:"#E9F284"}},'"'),s("span",{style:{color:"#F8F8F2"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"		"),s("span",{style:{color:"#FF79C6"}},"return")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	account "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," get_trade_detail_data(A.acct, A.acct_type, "),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"account"),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F8F8F2"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	"),s("span",{style:{color:"#FF79C6"}},"if"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#8BE9FD"}},"len"),s("span",{style:{color:"#F8F8F2"}},"(account)"),s("span",{style:{color:"#FF79C6"}},"=="),s("span",{style:{color:"#BD93F9"}},"0"),s("span",{style:{color:"#F8F8F2"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"		"),s("span",{style:{color:"#8BE9FD"}},"print"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#FF79C6"}},"f"),s("span",{style:{color:"#F1FA8C"}},"'账号"),s("span",{style:{color:"#BD93F9"}},"{"),s("span",{style:{color:"#F8F8F2"}},"A.acct"),s("span",{style:{color:"#BD93F9"}},"}"),s("span",{style:{color:"#F1FA8C"}}," 未登录 请检查'"),s("span",{style:{color:"#F8F8F2"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"		"),s("span",{style:{color:"#FF79C6"}},"return")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	account "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," account["),s("span",{style:{color:"#BD93F9"}},"0"),s("span",{style:{color:"#F8F8F2"}},"]")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	available_cash "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#8BE9FD","font-style":"italic"}},"int"),s("span",{style:{color:"#F8F8F2"}},"(account.m_dAvailable)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	"),s("span",{style:{color:"#6272A4"}},"#如果有未查到委托 查询委托")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	"),s("span",{style:{color:"#FF79C6"}},"if"),s("span",{style:{color:"#F8F8F2"}}," A.waiting_list:")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"		found_list "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," []")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"		orders "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," get_trade_detail_data(A.acct, A.acct_type, "),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"order"),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F8F8F2"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"		"),s("span",{style:{color:"#FF79C6"}},"for"),s("span",{style:{color:"#F8F8F2"}}," order "),s("span",{style:{color:"#FF79C6"}},"in"),s("span",{style:{color:"#F8F8F2"}}," orders:")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"			"),s("span",{style:{color:"#FF79C6"}},"if"),s("span",{style:{color:"#F8F8F2"}}," order.m_strRemark "),s("span",{style:{color:"#FF79C6"}},"in"),s("span",{style:{color:"#F8F8F2"}}," A.waiting_list:")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"				found_list.append(order.m_strRemark)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"		A.waiting_list "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," [i "),s("span",{style:{color:"#FF79C6"}},"for"),s("span",{style:{color:"#F8F8F2"}}," i "),s("span",{style:{color:"#FF79C6"}},"in"),s("span",{style:{color:"#F8F8F2"}}," A.waiting_list "),s("span",{style:{color:"#FF79C6"}},"if"),s("span",{style:{color:"#F8F8F2"}}," i "),s("span",{style:{color:"#FF79C6"}},"not"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#FF79C6"}},"in"),s("span",{style:{color:"#F8F8F2"}}," found_list]")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	"),s("span",{style:{color:"#FF79C6"}},"if"),s("span",{style:{color:"#F8F8F2"}}," A.waiting_list:")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"		"),s("span",{style:{color:"#8BE9FD"}},"print"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#FF79C6"}},"f"),s("span",{style:{color:"#F1FA8C"}},'"当前有未查到委托 '),s("span",{style:{color:"#BD93F9"}},"{"),s("span",{style:{color:"#F8F8F2"}},"A.waiting_list"),s("span",{style:{color:"#BD93F9"}},"}"),s("span",{style:{color:"#F1FA8C"}},' 暂停后续报单"'),s("span",{style:{color:"#F8F8F2"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"		"),s("span",{style:{color:"#FF79C6"}},"return")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	holdings "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," get_trade_detail_data(A.acct, A.acct_type, "),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"position"),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F8F8F2"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	holdings "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," {i.m_strInstrumentID "),s("span",{style:{color:"#FF79C6"}},"+"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"."),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#FF79C6"}},"+"),s("span",{style:{color:"#F8F8F2"}}," i.m_strExchangeID : i.m_nCanUseVolume "),s("span",{style:{color:"#FF79C6"}},"for"),s("span",{style:{color:"#F8F8F2"}}," i "),s("span",{style:{color:"#FF79C6"}},"in"),s("span",{style:{color:"#F8F8F2"}}," holdings}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	"),s("span",{style:{color:"#6272A4"}},"#获取行情数据")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	data "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," C.get_market_data_ex(["),s("span",{style:{color:"#E9F284"}},'"'),s("span",{style:{color:"#F1FA8C"}},"close"),s("span",{style:{color:"#E9F284"}},'"'),s("span",{style:{color:"#F8F8F2"}},"],[A.stock],"),s("span",{style:{color:"#FFB86C","font-style":"italic"}},"period"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"1d"),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F8F8F2"}},","),s("span",{style:{color:"#FFB86C","font-style":"italic"}},"count"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#8BE9FD"}},"max"),s("span",{style:{color:"#F8F8F2"}},"(A.line1, A.line2)"),s("span",{style:{color:"#FF79C6"}},"+"),s("span",{style:{color:"#BD93F9"}},"1"),s("span",{style:{color:"#F8F8F2"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	close_list "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," data[A.stock].values")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	"),s("span",{style:{color:"#FF79C6"}},"if"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#8BE9FD"}},"len"),s("span",{style:{color:"#F8F8F2"}},"(close_list) "),s("span",{style:{color:"#FF79C6"}},"<"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#8BE9FD"}},"max"),s("span",{style:{color:"#F8F8F2"}},"(A.line1, A.line2)"),s("span",{style:{color:"#FF79C6"}},"+"),s("span",{style:{color:"#BD93F9"}},"1"),s("span",{style:{color:"#F8F8F2"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"		"),s("span",{style:{color:"#8BE9FD"}},"print"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"行情长度不足(新上市或最近有停牌) 跳过运行"),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F8F8F2"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"		"),s("span",{style:{color:"#FF79C6"}},"return")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	pre_line1 "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," np.mean(close_list["),s("span",{style:{color:"#FF79C6"}},"-"),s("span",{style:{color:"#F8F8F2"}},"A.line1"),s("span",{style:{color:"#FF79C6"}},"-"),s("span",{style:{color:"#BD93F9"}},"1"),s("span",{style:{color:"#FF79C6"}},":"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#FF79C6"}},"-"),s("span",{style:{color:"#BD93F9"}},"1"),s("span",{style:{color:"#F8F8F2"}},"])")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	pre_line2 "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," np.mean(close_list["),s("span",{style:{color:"#FF79C6"}},"-"),s("span",{style:{color:"#F8F8F2"}},"A.line2"),s("span",{style:{color:"#FF79C6"}},"-"),s("span",{style:{color:"#BD93F9"}},"1"),s("span",{style:{color:"#FF79C6"}},":"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#FF79C6"}},"-"),s("span",{style:{color:"#BD93F9"}},"1"),s("span",{style:{color:"#F8F8F2"}},"])")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	current_line1 "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," np.mean(close_list["),s("span",{style:{color:"#FF79C6"}},"-"),s("span",{style:{color:"#F8F8F2"}},"A.line1"),s("span",{style:{color:"#FF79C6"}},":"),s("span",{style:{color:"#F8F8F2"}},"])")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	current_line2 "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," np.mean(close_list["),s("span",{style:{color:"#FF79C6"}},"-"),s("span",{style:{color:"#F8F8F2"}},"A.line2"),s("span",{style:{color:"#FF79C6"}},":"),s("span",{style:{color:"#F8F8F2"}},"])")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	"),s("span",{style:{color:"#6272A4"}},"#如果快线穿过慢线，则买入委托 当前无持仓 买入")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	vol "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#8BE9FD","font-style":"italic"}},"int"),s("span",{style:{color:"#F8F8F2"}},"(A.amount "),s("span",{style:{color:"#FF79C6"}},"/"),s("span",{style:{color:"#F8F8F2"}}," close_list["),s("span",{style:{color:"#FF79C6"}},"-"),s("span",{style:{color:"#BD93F9"}},"1"),s("span",{style:{color:"#F8F8F2"}},"] "),s("span",{style:{color:"#FF79C6"}},"/"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#BD93F9"}},"100"),s("span",{style:{color:"#F8F8F2"}},") "),s("span",{style:{color:"#FF79C6"}},"*"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#BD93F9"}},"100"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#6272A4"}},"#买入数量 向下取整到100的整数倍")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	"),s("span",{style:{color:"#FF79C6"}},"if"),s("span",{style:{color:"#F8F8F2"}}," A.amount "),s("span",{style:{color:"#FF79C6"}},"<"),s("span",{style:{color:"#F8F8F2"}}," available_cash "),s("span",{style:{color:"#FF79C6"}},"and"),s("span",{style:{color:"#F8F8F2"}}," vol "),s("span",{style:{color:"#FF79C6"}},">="),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#BD93F9"}},"100"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#FF79C6"}},"and"),s("span",{style:{color:"#F8F8F2"}}," A.stock "),s("span",{style:{color:"#FF79C6"}},"not"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#FF79C6"}},"in"),s("span",{style:{color:"#F8F8F2"}}," holdings "),s("span",{style:{color:"#FF79C6"}},"and"),s("span",{style:{color:"#F8F8F2"}}," pre_line1 "),s("span",{style:{color:"#FF79C6"}},"<"),s("span",{style:{color:"#F8F8F2"}}," pre_line2 "),s("span",{style:{color:"#FF79C6"}},"and"),s("span",{style:{color:"#F8F8F2"}}," current_line1 "),s("span",{style:{color:"#FF79C6"}},">"),s("span",{style:{color:"#F8F8F2"}}," current_line2:")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"		"),s("span",{style:{color:"#6272A4"}},"#下单开仓 ，参数说明可搜索PY交易函数 passorder")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"		msg "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#FF79C6"}},"f"),s("span",{style:{color:"#F1FA8C"}},'"双均线实盘 '),s("span",{style:{color:"#BD93F9"}},"{"),s("span",{style:{color:"#F8F8F2"}},"A.stock"),s("span",{style:{color:"#BD93F9"}},"}"),s("span",{style:{color:"#F1FA8C"}}," 上穿均线 买入 "),s("span",{style:{color:"#BD93F9"}},"{"),s("span",{style:{color:"#F8F8F2"}},"vol"),s("span",{style:{color:"#BD93F9"}},"}"),s("span",{style:{color:"#F1FA8C"}},'股"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"		passorder(A.buy_code, "),s("span",{style:{color:"#BD93F9"}},"1101"),s("span",{style:{color:"#F8F8F2"}},", A.acct, A.stock, "),s("span",{style:{color:"#BD93F9"}},"14"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#FF79C6"}},"-"),s("span",{style:{color:"#BD93F9"}},"1"),s("span",{style:{color:"#F8F8F2"}},", vol, "),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"双均线实盘"),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#BD93F9"}},"2"),s("span",{style:{color:"#F8F8F2"}}," , msg, C)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"		"),s("span",{style:{color:"#8BE9FD"}},"print"),s("span",{style:{color:"#F8F8F2"}},"(msg)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"		A.waiting_list.append(msg)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	"),s("span",{style:{color:"#6272A4"}},"#如果快线下穿慢线，则卖出委托")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	"),s("span",{style:{color:"#FF79C6"}},"if"),s("span",{style:{color:"#F8F8F2"}}," A.stock "),s("span",{style:{color:"#FF79C6"}},"in"),s("span",{style:{color:"#F8F8F2"}}," holdings "),s("span",{style:{color:"#FF79C6"}},"and"),s("span",{style:{color:"#F8F8F2"}}," holdings[A.stock] "),s("span",{style:{color:"#FF79C6"}},">"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#BD93F9"}},"0"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#FF79C6"}},"and"),s("span",{style:{color:"#F8F8F2"}}," pre_line1 "),s("span",{style:{color:"#FF79C6"}},">"),s("span",{style:{color:"#F8F8F2"}}," pre_line2 "),s("span",{style:{color:"#FF79C6"}},"and"),s("span",{style:{color:"#F8F8F2"}}," current_line1 "),s("span",{style:{color:"#FF79C6"}},"<"),s("span",{style:{color:"#F8F8F2"}}," current_line2:")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"		msg "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#FF79C6"}},"f"),s("span",{style:{color:"#F1FA8C"}},'"双均线实盘 '),s("span",{style:{color:"#BD93F9"}},"{"),s("span",{style:{color:"#F8F8F2"}},"A.stock"),s("span",{style:{color:"#BD93F9"}},"}"),s("span",{style:{color:"#F1FA8C"}}," 下穿均线 卖出 "),s("span",{style:{color:"#BD93F9"}},"{"),s("span",{style:{color:"#F8F8F2"}},"holdings[A.stock]"),s("span",{style:{color:"#BD93F9"}},"}"),s("span",{style:{color:"#F1FA8C"}},'股"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"		passorder(A.sell_code, "),s("span",{style:{color:"#BD93F9"}},"1101"),s("span",{style:{color:"#F8F8F2"}},", A.acct, A.stock, "),s("span",{style:{color:"#BD93F9"}},"14"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#FF79C6"}},"-"),s("span",{style:{color:"#BD93F9"}},"1"),s("span",{style:{color:"#F8F8F2"}},", holdings[A.stock], "),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"双均线实盘"),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#BD93F9"}},"2"),s("span",{style:{color:"#F8F8F2"}}," , msg, C)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"		"),s("span",{style:{color:"#8BE9FD"}},"print"),s("span",{style:{color:"#F8F8F2"}},"(msg)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"		A.waiting_list.append(msg)")]),l(`
`),s("span",{class:"line"})])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1),is={class:"custom-container danger"},ds=s("p",{class:"custom-container-title"},"警告",-1),us=s("h3",{id:"五、事件驱动-subscribe-示例",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#五、事件驱动-subscribe-示例","aria-hidden":"true"},"#"),l(" 五、事件驱动（subscribe）示例")],-1),Cs=s("h4",{id:"实盘示例-基于-subscribe",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#实盘示例-基于-subscribe","aria-hidden":"true"},"#"),l(" 实盘示例-基于 subscribe")],-1),ms=s("div",{class:"language-python line-numbers-mode","data-ext":"py"},[s("pre",{class:"shiki dracula",style:{"background-color":"#282A36"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#6272A4"}},"#coding:gbk")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FF79C6"}},"class"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#8BE9FD"}},"a"),s("span",{style:{color:"#F8F8F2"}},"():"),s("span",{style:{color:"#FF79C6"}},"pass")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"A "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," a()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"A.bought_list "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," []")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"account "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"testaccount"),s("span",{style:{color:"#E9F284"}},"'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FF79C6"}},"def"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#50FA7B"}},"init"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#FFB86C","font-style":"italic"}},"C"),s("span",{style:{color:"#F8F8F2"}},"):")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	"),s("span",{style:{color:"#6272A4"}},"#下单函数的参数需要 ContextInfo对象 在init中定义行情回调函数 可以用到init函数的入参 不用手动传入 ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	"),s("span",{style:{color:"#FF79C6"}},"def"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#50FA7B"}},"callback_func"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#FFB86C","font-style":"italic"}},"data"),s("span",{style:{color:"#F8F8F2"}},"):")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"		"),s("span",{style:{color:"#6272A4"}},"#print(data)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"		"),s("span",{style:{color:"#FF79C6"}},"for"),s("span",{style:{color:"#F8F8F2"}}," stock "),s("span",{style:{color:"#FF79C6"}},"in"),s("span",{style:{color:"#F8F8F2"}}," data:")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"			current_price "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," data[stock]["),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"close"),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F8F8F2"}},"]")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"			pre_price "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," data[stock]["),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"preClose"),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F8F8F2"}},"]")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"			ratio "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," current_price "),s("span",{style:{color:"#FF79C6"}},"/"),s("span",{style:{color:"#F8F8F2"}}," pre_price "),s("span",{style:{color:"#FF79C6"}},"-"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#BD93F9"}},"1")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"			"),s("span",{style:{color:"#8BE9FD"}},"print"),s("span",{style:{color:"#F8F8F2"}},"(stock, C.get_stock_name(stock), "),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"当前涨幅"),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F8F8F2"}},", ratio)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"			"),s("span",{style:{color:"#FF79C6"}},"if"),s("span",{style:{color:"#F8F8F2"}}," ratio "),s("span",{style:{color:"#FF79C6"}},">"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#BD93F9"}},"0"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#FF79C6"}},"and"),s("span",{style:{color:"#F8F8F2"}}," stock "),s("span",{style:{color:"#FF79C6"}},"not"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#FF79C6"}},"in"),s("span",{style:{color:"#F8F8F2"}}," A.bought_list:")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"				msg "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#FF79C6"}},"f"),s("span",{style:{color:"#F1FA8C"}},'"当前涨幅 '),s("span",{style:{color:"#BD93F9"}},"{"),s("span",{style:{color:"#F8F8F2"}},"ratio"),s("span",{style:{color:"#BD93F9"}},"}"),s("span",{style:{color:"#F1FA8C"}},' 大于0 买入100股"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"				"),s("span",{style:{color:"#8BE9FD"}},"print"),s("span",{style:{color:"#F8F8F2"}},"(msg)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"				"),s("span",{style:{color:"#6272A4"}},"#下单函数passorder 安全起见处于注释状态 需要实际测试下单交易时再放开")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"				"),s("span",{style:{color:"#6272A4"}},"#passorder(23, 1101, account, stock, 5, -1, 100, '订阅下单示例', 2, msg, C)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"				A.bought_list.append(stock)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	stock_list "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," ["),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"600000.SH"),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"000001.SZ"),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F8F8F2"}},"]")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	"),s("span",{style:{color:"#FF79C6"}},"for"),s("span",{style:{color:"#F8F8F2"}}," stock "),s("span",{style:{color:"#FF79C6"}},"in"),s("span",{style:{color:"#F8F8F2"}}," stock_list:")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"		C.subscribe_quote(stock, "),s("span",{style:{color:"#FFB86C","font-style":"italic"}},"period"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"1d"),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#FFB86C","font-style":"italic"}},"callback"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," callback_func)")]),l(`
`),s("span",{class:"line"})])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1),_s=s("h3",{id:"六、定时任务-run-time-示例",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#六、定时任务-run-time-示例","aria-hidden":"true"},"#"),l(" 六、定时任务（run_time）示例")],-1),bs=s("h4",{id:"实盘示例-基于-run-time",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#实盘示例-基于-run-time","aria-hidden":"true"},"#"),l(" 实盘示例-基于 run_time")],-1),As=s("div",{class:"language-python line-numbers-mode","data-ext":"py"},[s("pre",{class:"shiki dracula",style:{"background-color":"#282A36"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#6272A4"}},"#coding:gbk")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FF79C6"}},"import"),s("span",{style:{color:"#F8F8F2"}}," time, datetime")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FF79C6"}},"class"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#8BE9FD"}},"a"),s("span",{style:{color:"#F8F8F2"}},"():")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	"),s("span",{style:{color:"#FF79C6"}},"pass")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"A "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," a()")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FF79C6"}},"def"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#50FA7B"}},"init"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#FFB86C","font-style":"italic"}},"C"),s("span",{style:{color:"#F8F8F2"}},"):")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	A.hsa "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," C.get_stock_list_in_sector("),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"沪深A股"),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F8F8F2"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	A.vol_dict "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," {}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	"),s("span",{style:{color:"#FF79C6"}},"for"),s("span",{style:{color:"#F8F8F2"}}," stock "),s("span",{style:{color:"#FF79C6"}},"in"),s("span",{style:{color:"#F8F8F2"}}," A.hsa:")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"		A.vol_dict[stock] "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," C.get_last_volume(stoA.bought_list "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," []")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	C.run_time("),s("span",{style:{color:"#E9F284"}},'"'),s("span",{style:{color:"#F1FA8C"}},"f"),s("span",{style:{color:"#E9F284"}},'"'),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#E9F284"}},'"'),s("span",{style:{color:"#F1FA8C"}},"1nSecond"),s("span",{style:{color:"#E9F284"}},'"'),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#E9F284"}},'"'),s("span",{style:{color:"#F1FA8C"}},"2019-10-14 13:20:00"),s("span",{style:{color:"#E9F284"}},'"'),s("span",{style:{color:"#F8F8F2"}},")")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FF79C6"}},"def"),s("span",{style:{color:"#F8F8F2"}}," f(C):")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	"),s("span",{style:{color:"#FFB86C","font-style":"italic"}},"t0"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," time.time()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	"),s("span",{style:{color:"#FFB86C","font-style":"italic"}},"now"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," datetime.datetime.now()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	"),s("span",{style:{color:"#FFB86C","font-style":"italic"}},"full_tick"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," C.get_full_tick(A.hsa)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	"),s("span",{style:{color:"#FFB86C","font-style":"italic"}},"total_market_value"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#BD93F9"}},"0")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	"),s("span",{style:{color:"#FFB86C","font-style":"italic"}},"total_ratio"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#BD93F9"}},"0")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	"),s("span",{style:{color:"#FFB86C","font-style":"italic"}},"count"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#BD93F9"}},"0")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	"),s("span",{style:{color:"#FF79C6"}},"for"),s("span",{style:{color:"#F8F8F2"}}," stock "),s("span",{style:{color:"#FF79C6"}},"in"),s("span",{style:{color:"#F8F8F2"}}," A.hsa:")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"		"),s("span",{style:{color:"#FFB86C","font-style":"italic"}},"ratio"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," full_tick[stock]["),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"lastPrice"),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F8F8F2"}},"] "),s("span",{style:{color:"#FF79C6"}},"/"),s("span",{style:{color:"#F8F8F2"}}," full_tick[stock]["),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"lastClose"),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F8F8F2"}},"] "),s("span",{style:{color:"#FF79C6"}},"-"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#BD93F9"}},"1")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"		"),s("span",{style:{color:"#FF79C6"}},"if"),s("span",{style:{color:"#F8F8F2"}}," ratio "),s("span",{style:{color:"#FF79C6"}},">"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#BD93F9"}},"0.09"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#FF79C6"}},"and"),s("span",{style:{color:"#F8F8F2"}}," stock "),s("span",{style:{color:"#FF79C6"}},"not"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#FF79C6"}},"in"),s("span",{style:{color:"#F8F8F2"}}," A.bought_list:")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"			"),s("span",{style:{color:"#FFB86C","font-style":"italic"}},"msg"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#FF79C6"}},"f"),s("span",{style:{color:"#F1FA8C"}},'"'),s("span",{style:{color:"#BD93F9"}},"{"),s("span",{style:{color:"#F8F8F2"}},"now"),s("span",{style:{color:"#BD93F9"}},"}"),s("span",{style:{color:"#F1FA8C"}}," "),s("span",{style:{color:"#BD93F9"}},"{"),s("span",{style:{color:"#F8F8F2"}},"stock"),s("span",{style:{color:"#BD93F9"}},"}"),s("span",{style:{color:"#F1FA8C"}}," "),s("span",{style:{color:"#BD93F9"}},"{"),s("span",{style:{color:"#F8F8F2"}},"C.get_stock_name(stock)"),s("span",{style:{color:"#BD93F9"}},"}"),s("span",{style:{color:"#F1FA8C"}}," 当前涨幅 "),s("span",{style:{color:"#BD93F9"}},"{"),s("span",{style:{color:"#F8F8F2"}},"ratio"),s("span",{style:{color:"#BD93F9"}},"}"),s("span",{style:{color:"#F1FA8C"}},' 大于5% 买入100股"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"			"),s("span",{style:{color:"#6272A4"}},"#下单示例 安全起见处于注释状态 需要实际测试下单时可以放开 ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"			"),s("span",{style:{color:"#6272A4"}},"#passorder(23, 1101, account, stock, 5, -1, 100, '示例策略', 2, msg, C)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"			A.bought_list.append(stock)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"		"),s("span",{style:{color:"#FFB86C","font-style":"italic"}},"market_value"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," full_tick[stock]["),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"lastPrice"),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F8F8F2"}},"] "),s("span",{style:{color:"#FF79C6"}},"*"),s("span",{style:{color:"#F8F8F2"}}," A.vol_dict[stock]")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"		total_ratio "),s("span",{style:{color:"#FF79C6"}},"+="),s("span",{style:{color:"#F8F8F2"}}," ratio "),s("span",{style:{color:"#FF79C6"}},"*"),s("span",{style:{color:"#F8F8F2"}}," market_value")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"		total_market_value "),s("span",{style:{color:"#FF79C6"}},"+="),s("span",{style:{color:"#F8F8F2"}}," market_value")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"		count "),s("span",{style:{color:"#FF79C6"}},"+="),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#BD93F9"}},"1")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	total_ratio "),s("span",{style:{color:"#FF79C6"}},"/="),s("span",{style:{color:"#F8F8F2"}}," total_market_value")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	total_ratio "),s("span",{style:{color:"#FF79C6"}},"*="),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#BD93F9"}},"100")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	"),s("span",{style:{color:"#8BE9FD"}},"print"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#FF79C6"}},"f"),s("span",{style:{color:"#F1FA8C"}},"'"),s("span",{style:{color:"#BD93F9"}},"{"),s("span",{style:{color:"#F8F8F2"}},"now"),s("span",{style:{color:"#BD93F9"}},"}"),s("span",{style:{color:"#F1FA8C"}}," 当前A股加权涨幅 "),s("span",{style:{color:"#BD93F9"}},"{"),s("span",{style:{color:"#8BE9FD"}},"round"),s("span",{style:{color:"#F8F8F2"}},"(total_ratio, "),s("span",{style:{color:"#BD93F9"}},"2"),s("span",{style:{color:"#F8F8F2"}},")"),s("span",{style:{color:"#BD93F9"}},"}"),s("span",{style:{color:"#F1FA8C"}},"% 函数运行耗时"),s("span",{style:{color:"#BD93F9"}},"{"),s("span",{style:{color:"#8BE9FD"}},"round"),s("span",{style:{color:"#F8F8F2"}},"(time.time()"),s("span",{style:{color:"#FF79C6"}},"-"),s("span",{style:{color:"#F8F8F2"}}," t0, "),s("span",{style:{color:"#BD93F9"}},"5"),s("span",{style:{color:"#F8F8F2"}},")"),s("span",{style:{color:"#BD93F9"}},"}"),s("span",{style:{color:"#F1FA8C"}},"秒'"),s("span",{style:{color:"#F8F8F2"}},")")]),l(`
`),s("span",{class:"line"})])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1);function vs(hs,Bs){const p=c("ExternalLinkIcon"),F=c("RouterLink"),t=c("Tabs");return i(),d("div",null,[h,s("div",B,[E,s("p",null,[l("实盘模型也分"),D,l("和"),f,l("两种。具体请参考"),s("a",g,[l("如何配置账号"),n(p)])])]),s("ol",null,[s("li",null,[k,s("ul",null,[s("li",null,[s("p",null,[l("默认的交易模式为"),x,l(" ("),w,l("函数"),I,K,l("参数填 "),T,l(" 即默认值)，适用与需要在盘中模拟历史上逐 k 线的效果需求。例如选择一分钟周期，将下单判断，下单函数放在"),P,l("函数内，盘中主图每个分笔 (三秒一次)会触发一次"),S,l("函数调用，系统会暂存当前"),M,l("产生的下单信号。三秒后下一个分笔到达时，如果是新的一分钟 k 线的第一个分笔，判断上一个分笔为前一根k线最后分笔，会将暂存的交易信号发送给交易所，完成交易。如到达的下一个分笔不是新一根 k 线的，则判定当前 k 线未完成，丢弃暂存的交易信号。1 分钟 k 线情形，每根k线内会有 20 个分笔，前 19 个分笔产生的信号会被丢弃，最后一个分笔的信号，会在下一根k线，首个分笔到达时，延迟三秒发出。系统自带的"),q,l("也做了同样的等待，回退处理，逐 k 线模式的交易记录可以保存在"),Q,l("对象的属性中。详细说明参见 "),n(F,{to:"/innerApi/question_answer.html#%E7%B3%BB%E7%BB%9F%E5%AF%B9%E8%B1%A1-contextinfo-%E9%80%90-k-%E7%BA%BF%E4%BF%9D%E5%AD%98%E7%9A%84%E6%9C%BA%E5%88%B6"},{default:o(()=>[l("常见问题：系统对象ContextInfo 逐K线保存的机制")]),_:1})])]),s("li",null,[s("p",null,[l("QMT 系统也支持立即下单的交易模式，"),V,l("函数的"),L,N,l("参数填 "),R,l("，可以在运行后立刻发出委托，不对信号进行等待，丢弃的操作。此时需要用普通的全局变量(如自定义一个"),H,l(")保存委托状态，不能存在"),O,l("的属性里。参见"),n(F,{to:"/innerApi/code_examples.html#%E4%BD%BF%E7%94%A8%E5%BF%AB%E9%80%9F%E4%BA%A4%E6%98%93%E5%8F%82%E6%95%B0%E5%A7%94%E6%89%98"},{default:o(()=>[l("使用快速交易参数委托")]),_:1}),l(" 、"),n(F,{to:"/innerApi/code_examples.html#%E8%B0%83%E6%95%B4%E8%87%B3%E7%9B%AE%E6%A0%87%E6%8C%81%E4%BB%93"},{default:o(()=>[l("调整至目标持仓Demo")]),_:1})])])])]),Y,s("li",null,[G,s("ul",null,[s("li",null,[l("选择"),U,l("，在策略信号界面显示买卖信号，不实际发出委托。具体请参考"),n(F,{to:"/innerApi/variable_convention.html#%E6%A8%A1%E6%8B%9F%E4%BF%A1%E5%8F%B7%E6%A8%A1%E5%BC%8F"},{default:o(()=>[l("模拟信号模式")]),_:1})]),s("li",null,[l("选择"),Z,l("，显示的策略信号会实际发出到交易所。具体请参考"),n(F,{to:"/innerApi/variable_convention.html#%E5%AE%9E%E7%9B%98%E4%BA%A4%E6%98%93%E6%A8%A1%E5%BC%8F"},{default:o(()=>[l("实盘交易模式")]),_:1})])])])]),s("div",j,[z,s("p",null,[l("运行模式的"),J,l("和"),W,l("，与您使用的账号实际是"),X,l("或是"),$,l("无关。相关账号申请需要联系您做所在券商的工作人员，或者购买"),s("a",ss,[l("投研端账号"),n(p)]),l("获取模拟柜台撮合服务。")])]),ls,s("div",os,[ns,s("p",null,[l("盘中分笔驱动，但是逐 K 线生效。请参考"),n(F,{to:"/innerApi/question_answer.html#%E7%B3%BB%E7%BB%9F%E5%AF%B9%E8%B1%A1-contextinfo-%E9%80%90-k-%E7%BA%BF%E4%BF%9D%E5%AD%98%E7%9A%84%E6%9C%BA%E5%88%B6"},{default:o(()=>[l("常见问题：系统对象ContextInfo 逐K线保存的机制")]),_:1})])]),Fs,s("p",null,[l("回测的操作流程请参考："),n(F,{to:"/innerApi/interface_operation.html#%E7%AD%96%E7%95%A5%E5%9B%9E%E6%B5%8B"},{default:o(()=>[l("界面操作-策略回测")]),_:1})]),es,n(t,{id:"258",data:[{id:"python"}]},{title0:o(({value:e,isActive:a})=>[l("python")]),tab0:o(({value:e,isActive:a})=>[as]),_:1}),s("p",null,[ts,l(" 请参考"),n(F,{to:"/innerApi/interface_operation.html#%E5%9F%BA%E6%9C%AC%E4%BF%A1%E6%81%AF-%E5%AD%97%E6%AE%B5%E6%8F%8F%E8%BF%B0"},{default:o(()=>[l("基础信息-字段描述")]),_:1})]),s("p",null,[cs,l(" 请参考"),n(F,{to:"/innerApi/interface_operation.html#%E5%9B%9E%E6%B5%8B%E5%8F%82%E6%95%B0-%E5%AD%97%E6%AE%B5%E6%8F%8F%E8%BF%B0"},{default:o(()=>[l("回测参数-字段描述")]),_:1})]),rs,s("p",null,[l("实盘的操作流程请参考："),n(F,{to:"/innerApi/interface_operation.html#%E7%AD%96%E7%95%A5%E8%BF%90%E8%A1%8C"},{default:o(()=>[l("界面操作-模型交易")]),_:1})]),ps,n(t,{id:"278",data:[{id:"python"}]},{title0:o(({value:e,isActive:a})=>[l("python")]),tab0:o(({value:e,isActive:a})=>[ys]),_:1}),s("div",is,[ds,s("p",null,[l("对于立刻下单的模型需要用普通的全局变量来保存状态不能ContextInfo对象存详细说明参考"),n(F,{to:"/innerApi/question_answer.html#%E7%B3%BB%E7%BB%9F%E5%AF%B9%E8%B1%A1-contextinfo-%E9%80%90-k-%E7%BA%BF%E4%BF%9D%E5%AD%98%E7%9A%84%E6%9C%BA%E5%88%B6"},{default:o(()=>[l("常见问题：系统对象ContextInfo 逐K线保存的机制")]),_:1})])]),s("p",null,[l("更多示例请参见"),n(F,{to:"/innerApi/code_examples.html"},{default:o(()=>[l("完整示例")]),_:1})]),us,Cs,n(t,{id:"297",data:[{id:"python"}]},{title0:o(({value:e,isActive:a})=>[l("python")]),tab0:o(({value:e,isActive:a})=>[ms]),_:1}),_s,bs,n(t,{id:"308",data:[{id:"python"}]},{title0:o(({value:e,isActive:a})=>[l("python")]),tab0:o(({value:e,isActive:a})=>[As]),_:1})])}const Ds=y(v,[["render",vs],["__file","start_now.html.vue"]]);export{Ds as default};
