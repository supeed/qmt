import{_ as p,r as c,o as d,c as y,b as s,e,d as o,w as l,a as r}from"./app-4f7ad5aa.js";const u={},h=s("h3",{id:"contextinfo-对象",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#contextinfo-对象","aria-hidden":"true"},"#"),e(" ContextInfo 对象")],-1),b={href:"https://dict.thinktrader.net/innerApi/question_answer.html?id=null#%E7%B3%BB%E7%BB%9F%E5%AF%B9%E8%B1%A1-contextinfo-%E9%80%90-k-%E7%BA%BF%E4%BF%9D%E5%AD%98%E7%9A%84%E6%9C%BA%E5%88%B6",target:"_blank",rel:"noopener noreferrer"},v=r('<h3 id="init-初始化函数" tabindex="-1"><a class="header-anchor" href="#init-初始化函数" aria-hidden="true">#</a> init - 初始化函数</h3><p>初始化函数，只在整个策略开始时调用运行到一次。用于初始订阅行情，订阅账号信息使用。init函数执行完成前部分接口无法使用，如交易日获取函数get_trading_dates。</p><p><strong>系统函数 不可被手动调用</strong></p><p><strong>参数：</strong></p><table><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td><code>ContextInfo</code></td><td><code>object</code></td><td>策略运行环境对象，可以用于存储自定义的全局变量</td></tr></tbody></table><p><strong>返回：</strong> 无</p><p><strong>示例：</strong></p>',7),_=s("div",{class:"language-python line-numbers-mode","data-ext":"py"},[s("pre",{class:"shiki dracula",style:{"background-color":"#282A36"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FF79C6"}},"def"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#50FA7B"}},"init"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#FFB86C","font-style":"italic"}},"ContextInfo"),s("span",{style:{color:"#F8F8F2"}},"):")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    ContextInfo.initProfit "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#BD93F9"}},"0")]),e(`
`),s("span",{class:"line"})])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1),m=s("p",null,[s("strong",null,"在init函数中订阅行情示例：")],-1),g=s("div",{class:"language-python line-numbers-mode","data-ext":"py"},[s("pre",{class:"shiki dracula",style:{"background-color":"#282A36"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#6272A4"}},"#coding:gbk")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FF79C6"}},"def"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#50FA7B"}},"init"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#FFB86C","font-style":"italic"}},"C"),s("span",{style:{color:"#F8F8F2"}},"):")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	"),s("span",{style:{color:"#6272A4"}},"#init函数入参为ContextInfo对象 定义时可以选择更简短的形参名 如C")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	"),s("span",{style:{color:"#6272A4"}},"#在init函数中 可以进行 订阅行情的操作")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    "),s("span",{style:{color:"#6272A4"}},"#如需在行情回调函数中下单 下单函数需要传入ContextInfo对象 可以通过在init中定义回调函数 来使用外层的ContextInfo")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	"),s("span",{style:{color:"#FF79C6"}},"def"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#50FA7B"}},"my_callback_function"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#FFB86C","font-style":"italic"}},"data"),s("span",{style:{color:"#F8F8F2"}},"):")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"		"),s("span",{style:{color:"#6272A4"}},"#自定义行情回调函数 入参为指数据字典")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"		"),s("span",{style:{color:"#8BE9FD"}},"print"),s("span",{style:{color:"#F8F8F2"}},"(data)")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	stock "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"600000.SH"),s("span",{style:{color:"#E9F284"}},"'")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	C.subscribe_quote(stock, "),s("span",{style:{color:"#FFB86C","font-style":"italic"}},"period"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"5m"),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#FFB86C","font-style":"italic"}},"callback"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," my_callback_function)")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	"),s("span",{style:{color:"#6272A4"}},"#init函数执行完成后 ")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	"),s("span",{style:{color:"#8BE9FD"}},"print"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"init函数执行完成"),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F8F8F2"}},")")]),e(`
`),s("span",{class:"line"})])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1),f=s("h3",{id:"after-init-初始化后函数",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#after-init-初始化后函数","aria-hidden":"true"},"#"),e(" after_init - 初始化后函数")],-1),A=s("p",null,"后初始化函数，在初始化函数执行完成后被调用一次。可以用于放置一次性触发的下单，取数据操作代码。",-1),x=s("code",null,"init",-1),C=s("code",null,"handlebar",-1),k=s("code",null,"after_init",-1),E=s("code",null,"init",-1),B=s("code",null,"after_init",-1),I=r("<p><strong>系统函数 不可被手动调用</strong></p><p><strong>参数：</strong></p><table><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td><code>ContextInfo</code></td><td><code>object</code></td><td>策略运行环境对象，可以用于存储自定义的全局变量</td></tr></tbody></table><p><strong>返回：</strong> 无</p><p><strong>示例：</strong></p>",5),D=s("div",{class:"language-python line-numbers-mode","data-ext":"py"},[s("pre",{class:"shiki dracula",style:{"background-color":"#282A36"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#6272A4"}},"#coding:gbk")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FF79C6"}},"def"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#50FA7B"}},"init"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#FFB86C","font-style":"italic"}},"ContextInfo"),s("span",{style:{color:"#F8F8F2"}},"):")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    "),s("span",{style:{color:"#8BE9FD"}},"print"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"init"),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F8F8F2"}},")  ")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FF79C6"}},"def"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#50FA7B"}},"after_init"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#FFB86C","font-style":"italic"}},"ContextInfo"),s("span",{style:{color:"#F8F8F2"}},"):")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    "),s("span",{style:{color:"#8BE9FD"}},"print"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"系统会在init函数执行完后和执行handlebar之前调用after_init"),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F8F8F2"}},")")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FF79C6"}},"def"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#50FA7B"}},"handlebar"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#FFB86C","font-style":"italic"}},"ContextInfo"),s("span",{style:{color:"#F8F8F2"}},"):")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    "),s("span",{style:{color:"#FF79C6"}},"if"),s("span",{style:{color:"#F8F8F2"}}," ContextInfo.is_last_bar():")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"        "),s("span",{style:{color:"#8BE9FD"}},"print"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"handlebar"),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F8F8F2"}},")")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"})])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1),S=s("p",null,[s("strong",null,"after_init函数中立刻下单示例：")],-1),T=s("div",{class:"language-python line-numbers-mode","data-ext":"py"},[s("pre",{class:"shiki dracula",style:{"background-color":"#282A36"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#6272A4"}},"#coding:gbk")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FF79C6"}},"def"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#50FA7B"}},"after_init"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#FFB86C","font-style":"italic"}},"C"),s("span",{style:{color:"#F8F8F2"}},"):")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	"),s("span",{style:{color:"#6272A4"}},"#after_init 函数 可以用于执行运行开始时 需要执行一次的代码 例如下一笔委托")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	"),s("span",{style:{color:"#6272A4"}},"#account变量是模型交易界面 添加策略时选择的资金账号 不需要手动填写 交易模型需要在模型交易界面运行 才有效")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	"),s("span",{style:{color:"#6272A4"}},"#快速交易参数(quickTrade )填2 passorder函数执行后立刻下单 不会等待k线走完再委托。 可以在after_init函数 run_time函数注册的回调函数里进行委托 ")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	msg "),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#FF79C6"}},"f"),s("span",{style:{color:"#F1FA8C"}},'"投资备注字符串 用来区分不同委托"')]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"	passorder("),s("span",{style:{color:"#BD93F9"}},"23"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#BD93F9"}},"1101"),s("span",{style:{color:"#F8F8F2"}},", account, "),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"600000.SH"),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#BD93F9"}},"5"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#FF79C6"}},"-"),s("span",{style:{color:"#BD93F9"}},"1"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#BD93F9"}},"100"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"测试下单"),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#BD93F9"}},"2"),s("span",{style:{color:"#F8F8F2"}},", msg, C)")]),e(`
`),s("span",{class:"line"})])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1),w=r(`<h3 id="handlebar-行情事件函数" tabindex="-1"><a class="header-anchor" href="#handlebar-行情事件函数" aria-hidden="true">#</a> handlebar - 行情事件函数</h3><p><strong>系统函数 不可被手动调用</strong></p><p><strong>释义：</strong> 行情事件函数，每根 K 线运行一次；实时行情获取状态下，先每根历史 K 线运行一次，再在每个 tick 数据来后驱动运行一次</p><p>历史k线上，按时间顺序每根K线触发一次调用；盘中，每个新到达的TICK数据驱动运行一次。可以作为行情驱动的函数，实现指标计算，回测，实盘下单的效果。</p><p><strong>参数：</strong></p><table><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td><code>ContextInfo</code></td><td><code>object</code></td><td>策略运行环境对象，可以用于存储自定义的全局变量</td></tr></tbody></table><p><strong>返回：</strong> 无</p><p><strong>示例：</strong></p><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#FF79C6;">def</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">handlebar</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">ContextInfo</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#6272A4;"># 输出当前运行到的 K 线的位置</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#8BE9FD;">print</span><span style="color:#F8F8F2;">(ContextInfo.barpos)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="contextinfo-schedule-run-设置定时器" tabindex="-1"><a class="header-anchor" href="#contextinfo-schedule-run-设置定时器" aria-hidden="true">#</a> ContextInfo.schedule_run - 设置定时器</h3><div class="custom-container tip"><p class="custom-container-title">说明</p><ol><li>该函数是新版设置定时器函数，相比旧版<code>run_time</code>，新版<code>schedule_run</code>新增了<code>任务分组</code>,<code>任务取消</code>等多种功能</li></ol></div><p><strong>原型:</strong></p>`,12),K=s("div",{class:"language-python line-numbers-mode","data-ext":"py"},[s("pre",{class:"shiki dracula",style:{"background-color":"#282A36"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"ContextInfo.schedule_run(")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    func:Callable, "),s("span",{style:{color:"#6272A4"}},"# 回调函数，到达定时器预定时间时触发调用，参数为ContextInfo类型，无需返回值，定义示例def on_timer(C:ContextInfo):")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    time_point:Union[dt.datetime,"),s("span",{style:{color:"#8BE9FD","font-style":"italic"}},"str"),s("span",{style:{color:"#F8F8F2"}},"], "),s("span",{style:{color:"#6272A4"}},"# 表示预定的第一次触发时间，如果设置定时器时已经过了预定时间，会立即执行func以及后续逻辑；当使用str类型时，格式为'yyyymmddHHMMSS'如'20231231235959'，需要满足转换dt.datetime.strptime('20231231235959','%Y%m%d%H%M%S')")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    repeat_times:"),s("span",{style:{color:"#FFB86C","font-style":"italic"}},"int"),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#BD93F9"}},"0"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#6272A4"}},"# 表示在预定时间触发后按interval间隔再触发多少次")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    interval:datetime.timedelta"),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#BD93F9"}},"None"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#6272A4"}},"# 表示预定时间触发后的后续重复执行的时间间隔")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    name:"),s("span",{style:{color:"#FFB86C","font-style":"italic"}},"str"),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#E9F284"}},"''"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#6272A4"}},"# 定时器任务组名，可用于定时器分组，多次设置同名定时任务不会互相覆盖，会计入同一个任务组，按任务组名取消时会全部取消")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    )")]),e(`
`),s("span",{class:"line"})])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1),H=r("<p><strong>参数：</strong></p><table><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td><code>func</code></td><td><code>Callable</code></td><td>回调函数，到达定时器预定时间时触发调用，参数为ContextInfo类型，无需返回值，定义示例def on_timer(C:ContextInfo): pass</td></tr><tr><td><code>time_point</code></td><td><code>Union[datetime.datetime,str]</code></td><td>表示预定的第一次触发时间，如果设置定时器时已经过了预定时间，会立即执行func以及后续逻辑；当使用str类型时，格式为&#39;yyyymmddHHMMSS&#39;如&#39;20231231235959&#39;，需要满足转换datetime.datetime.strptime(&#39;20231231235959&#39;,&#39;%Y%m%d%H%M%S&#39;)</td></tr><tr><td><code>repeat_times</code></td><td><code>int</code></td><td>表示在预定时间触发后按interval间隔再触发多少次，传<code>-1</code>表示不限制次数</td></tr><tr><td><code>interval</code></td><td><code>datetime.timedelta</code></td><td>表示预定时间触发后的后续重复执行的时间间隔</td></tr><tr><td><code>name</code></td><td><code>str</code></td><td>定时器任务组名，可用于定时器分组，多次设置同名定时任务不会互相覆盖，会计入同一个任务组，按任务组名取消时会全部取消</td></tr></tbody></table><p><strong>回调函数参数：</strong> ContextInfo：策略模型全局对象</p><p><strong>返回值：</strong></p><p><code>int</code>类型，表示本次调用后生成的定时任务号，可用于取消本次定时任务，全局唯一不重复</p><p><strong>示例：</strong></p>",6),Z=s("div",{class:"language-python line-numbers-mode","data-ext":"py"},[s("pre",{class:"shiki dracula",style:{"background-color":"#282A36"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FF79C6"}},"import"),s("span",{style:{color:"#F8F8F2"}}," datetime "),s("span",{style:{color:"#FF79C6"}},"as"),s("span",{style:{color:"#F8F8F2"}}," dt")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FF79C6"}},"def"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#50FA7B"}},"on_timer"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#FFB86C","font-style":"italic"}},"C"),s("span",{style:{color:"#FF79C6"}},":"),s("span",{style:{color:"#F8F8F2"}},"ContextInfo):")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    "),s("span",{style:{color:"#8BE9FD"}},"print"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"hello world"),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F8F8F2"}},")")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FF79C6"}},"def"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#50FA7B"}},"init"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#FFB86C","font-style":"italic"}},"ContextInfo"),s("span",{style:{color:"#F8F8F2"}},"):")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    tid"),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}},"ContextInfo.schedule_run(on_timer,"),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"20231231235959"),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F8F8F2"}},","),s("span",{style:{color:"#FF79C6"}},"-"),s("span",{style:{color:"#BD93F9"}},"1"),s("span",{style:{color:"#F8F8F2"}},",dt.timedelta("),s("span",{style:{color:"#FFB86C","font-style":"italic"}},"minutes"),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#BD93F9"}},"1"),s("span",{style:{color:"#F8F8F2"}},"),"),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"my_timer"),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F8F8F2"}},")")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FF79C6"}},"def"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#50FA7B"}},"handlebar"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#FFB86C","font-style":"italic"}},"ContextInfo"),s("span",{style:{color:"#F8F8F2"}},"):")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    "),s("span",{style:{color:"#FF79C6"}},"pass")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6272A4"}},"#此例为自2023-12-31 23:59:59后每60s运行一次on_timer")]),e(`
`),s("span",{class:"line"})])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1),q=s("h3",{id:"contextinfo-cancel-schedule-run-取消由schedule-run产生的定时任务",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#contextinfo-cancel-schedule-run-取消由schedule-run产生的定时任务","aria-hidden":"true"},"#"),e(" ContextInfo.cancel_schedule_run - 取消由schedule_run产生的定时任务")],-1),M=s("p",null,[s("strong",null,"原型：")],-1),N=s("div",{class:"language-python line-numbers-mode","data-ext":"py"},[s("pre",{class:"shiki dracula",style:{"background-color":"#282A36"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"ContextInfo.cancel_schedule_run(")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    key:Union[seq"),s("span",{style:{color:"#FF79C6"}},":"),s("span",{style:{color:"#8BE9FD","font-style":"italic"}},"int"),s("span",{style:{color:"#F8F8F2"}},",name"),s("span",{style:{color:"#FF79C6"}},":"),s("span",{style:{color:"#8BE9FD","font-style":"italic"}},"str"),s("span",{style:{color:"#F8F8F2"}},"] "),s("span",{style:{color:"#6272A4"}},"# 定时任务号或定时任务组名称")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    )")]),e(`
`),s("span",{class:"line"})])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1),j=r("<p><strong>参数：</strong></p><table><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td><code>key:</code></td><td><code>Union[seq:int,name:str]</code></td><td>类型为int时，表示按任务号取消;类型为str时，表示按任务组取消，会取消组内所有定时任务</td></tr></tbody></table><p><strong>返回值：</strong></p><p><code>bool</code>类型，表示是否取消成功，即是否能按key找到目标定时任务</p><p><strong>示例：</strong></p>",5),L=s("div",{class:"language-python line-numbers-mode","data-ext":"py"},[s("pre",{class:"shiki dracula",style:{"background-color":"#282A36"},tabindex:"0"},[s("code",null,[s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"ContextInfo.cancel_schedule_run("),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"my_timer"),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F8F8F2"}},") "),s("span",{style:{color:"#6272A4"}},"#取消my_timer任务组所有定时任务")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"ContextInfo.cancel_schedule_run("),s("span",{style:{color:"#BD93F9"}},"1"),s("span",{style:{color:"#F8F8F2"}},") "),s("span",{style:{color:"#6272A4"}},"#取消任务号为1的定时任务")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"})])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1),U=r('<h3 id="contextinfo-run-time-设置定时器" tabindex="-1"><a class="header-anchor" href="#contextinfo-run-time-设置定时器" aria-hidden="true">#</a> ContextInfo.run_time - 设置定时器</h3><p>设置定时器函数，可以指定时间间隔，定时触发用户定义的回调函数。适用与在盘中，持续判断交易信号的模型。</p><p><strong>用法：</strong> <code>ContextInfo.run_time(funcName,period,startTime)</code> 定时触发指定的 funcName函数, funcName函数由用户定义, 入参为ContextInfo对象。</p><p><strong>参数：</strong></p><ul><li>funcName：回调函数名</li><li>period：重复调用的时间间隔,&#39;5nSecond&#39;表示每5秒运行1次回调函数,&#39;5nDay&#39;表示每5天运行一次回调函数,&#39;500nMilliSecond&#39;表示每500毫秒运行1次回调函数</li><li>startTime：表示定时器第一次启动的时间,如果要定时器立刻启动,可以设置历史的时间</li></ul><p><strong>回调函数参数：</strong> ContextInfo：策略模型全局对象</p><p><strong>示例：</strong></p>',7),V=s("div",{class:"language-python line-numbers-mode","data-ext":"py"},[s("pre",{class:"shiki dracula",style:{"background-color":"#282A36"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FF79C6"}},"import"),s("span",{style:{color:"#F8F8F2"}}," time")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FF79C6"}},"def"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#50FA7B"}},"init"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#FFB86C","font-style":"italic"}},"ContextInfo"),s("span",{style:{color:"#F8F8F2"}},"):")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    ContextInfo.run_time("),s("span",{style:{color:"#E9F284"}},'"'),s("span",{style:{color:"#F1FA8C"}},"f"),s("span",{style:{color:"#E9F284"}},'"'),s("span",{style:{color:"#F8F8F2"}},","),s("span",{style:{color:"#E9F284"}},'"'),s("span",{style:{color:"#F1FA8C"}},"5nSecond"),s("span",{style:{color:"#E9F284"}},'"'),s("span",{style:{color:"#F8F8F2"}},","),s("span",{style:{color:"#E9F284"}},'"'),s("span",{style:{color:"#F1FA8C"}},"2019-10-14 13:20:00"),s("span",{style:{color:"#E9F284"}},'"'),s("span",{style:{color:"#F8F8F2"}},")")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FF79C6"}},"def"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#50FA7B"}},"f"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#FFB86C","font-style":"italic"}},"ContextInfo"),s("span",{style:{color:"#F8F8F2"}},"):")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    "),s("span",{style:{color:"#8BE9FD"}},"print"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"hello world"),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F8F8F2"}},")")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6272A4"}},"#此例为自2019-10-14 13:20:00后每5s运行一次函数f")]),e(`
`),s("span",{class:"line"})])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1),P=s("div",{class:"custom-container warning"},[s("p",{class:"custom-container-title"},"注意"),s("ol",null,[s("li",null,"模型回测时无效"),s("li",null,"定时器没有结束方法，会随着策略的结束而结束。"),s("li",null,"period有nMilliSecond、nSecond和Day三个周期单元，部分周期下定时器函数在第一次运行之前会先等待一个period")])],-1),Y=r('<h3 id="stop-停止处理函数" tabindex="-1"><a class="header-anchor" href="#stop-停止处理函数" aria-hidden="true">#</a> stop - 停止处理函数</h3><p><strong>系统函数 不可被手动调用</strong></p><p><strong>释义：</strong> PY策略模型关闭停止前运行到的函数，复杂策略模型，如中间有起线程可通过在该函数内实现停止线程操作。注意, 当前版本stop函数被调用时交易连接已断开, 不能在stop函数中做报单 / 撤单操作.</p><p><strong>参数：</strong></p><table><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td><code>ContextInfo</code></td><td><code>object</code></td><td>策略运行环境对象，可以用于存储自定义的全局变量</td></tr></tbody></table><p><strong>示例：</strong></p>',6),R=s("div",{class:"language-python line-numbers-mode","data-ext":"py"},[s("pre",{class:"shiki dracula",style:{"background-color":"#282A36"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FF79C6"}},"def"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#50FA7B"}},"stop"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#FFB86C","font-style":"italic"}},"ContextInfo"),s("span",{style:{color:"#F8F8F2"}},"):")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    "),s("span",{style:{color:"#8BE9FD"}},"print"),s("span",{style:{color:"#F8F8F2"}},"( "),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"strategy is stop !"),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F8F8F2"}},")")]),e(`
`),s("span",{class:"line"})])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1),G=r('<h3 id="contextinfo-is-last-bar-是否为最后一根k线" tabindex="-1"><a class="header-anchor" href="#contextinfo-is-last-bar-是否为最后一根k线" aria-hidden="true">#</a> ContextInfo.is_last_bar - 是否为最后一根K线</h3><p><strong>用法：</strong> ContextInfo.is_last_bar()</p><p><strong>释义：</strong> 判定是否为最后一根 K 线</p><p><strong>参数：</strong> 无</p><p><strong>返回：</strong> bool，返回值含义：True 是右侧最新k线 False不是最新k线</p><blockquote><p>True：是</p><p>False：否</p></blockquote><p><strong>示例：</strong></p>',7),z=s("div",{class:"language-python line-numbers-mode","data-ext":"py"},[s("pre",{class:"shiki dracula",style:{"background-color":"#282A36"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FF79C6"}},"def"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#50FA7B"}},"handlebar"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#FFB86C","font-style":"italic"}},"ContextInfo"),s("span",{style:{color:"#F8F8F2"}},"):")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    "),s("span",{style:{color:"#8BE9FD"}},"print"),s("span",{style:{color:"#F8F8F2"}},"(ContextInfo.is_last_bar())")]),e(`
`),s("span",{class:"line"})])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1),J=s("div",{class:"language-text line-numbers-mode","data-ext":"text"},[s("pre",{class:"shiki dracula",style:{"background-color":"#282A36"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"False")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"False")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"...")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"False")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"True")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}})])])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1),O=r('<h3 id="contextinfo-is-new-bar-判定是否为新的-k-线" tabindex="-1"><a class="header-anchor" href="#contextinfo-is-new-bar-判定是否为新的-k-线" aria-hidden="true">#</a> ContextInfo.is_new_bar - 判定是否为新的 K 线</h3><p><strong>用法：</strong> ContextInfo.is_new_bar()</p><p><strong>释义：</strong> 某根 K 线的第一个 tick 数据到来时，判定该 K 线为新的 K 线，其后的tick不会认为是新的 K 线</p><p><strong>参数：</strong> 无</p><p><strong>返回：</strong> bool，返回值含义：</p><blockquote><p>True：是</p><p>False：否</p></blockquote><p><strong>示例：</strong></p>',7),Q=s("div",{class:"language-python line-numbers-mode","data-ext":"py"},[s("pre",{class:"shiki dracula",style:{"background-color":"#282A36"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FF79C6"}},"def"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#50FA7B"}},"handlebar"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#FFB86C","font-style":"italic"}},"ContextInfo"),s("span",{style:{color:"#F8F8F2"}},"):")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    "),s("span",{style:{color:"#8BE9FD"}},"print"),s("span",{style:{color:"#F8F8F2"}},"(ContextInfo.is_new_bar()) "),s("span",{style:{color:"#6272A4"}},"#历史k线每根都是新k线 盘中 每根新k线第一个分笔返回True 其他分笔返回False")]),e(`
`),s("span",{class:"line"})])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1),W=s("div",{class:"language-text line-numbers-mode","data-ext":"text"},[s("pre",{class:"shiki dracula",style:{"background-color":"#282A36"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"True")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"True")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"...")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"True")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"False")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}})])])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1),X=r('<h3 id="contextinfo-get-stock-name-根据代码获取名称" tabindex="-1"><a class="header-anchor" href="#contextinfo-get-stock-name-根据代码获取名称" aria-hidden="true">#</a> ContextInfo.get_stock_name - 根据代码获取名称</h3><p><strong>用法：</strong> ContextInfo.get_stock_name(&#39;stockcode&#39;)</p><p><strong>释义：</strong> 根据代码获取名称</p><p><strong>参数：</strong> stockcode：股票代码，如&#39;000001.SZ&#39;，缺省值 &#39; &#39; 默认为当前图代码</p><p><strong>返回：</strong> string（GBK编码）</p><p><strong>示例：</strong></p>',6),$=s("div",{class:"language-python line-numbers-mode","data-ext":"py"},[s("pre",{class:"shiki dracula",style:{"background-color":"#282A36"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FF79C6"}},"def"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#50FA7B"}},"handlebar"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#FFB86C","font-style":"italic"}},"ContextInfo"),s("span",{style:{color:"#F8F8F2"}},"):")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    "),s("span",{style:{color:"#8BE9FD"}},"print"),s("span",{style:{color:"#F8F8F2"}},"(ContextInfo.get_stock_name("),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"000001.SZ"),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F8F8F2"}},"))")]),e(`
`),s("span",{class:"line"})])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1),ss=s("div",{class:"language-text line-numbers-mode","data-ext":"text"},[s("pre",{class:"shiki dracula",style:{"background-color":"#282A36"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"平安银行")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}})])])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"})])],-1),es=r('<h3 id="contextinfo-get-open-date-根据代码返回对应股票的上市时间" tabindex="-1"><a class="header-anchor" href="#contextinfo-get-open-date-根据代码返回对应股票的上市时间" aria-hidden="true">#</a> ContextInfo.get_open_date - 根据代码返回对应股票的上市时间</h3><p><strong>用法：</strong> ContextInfo.get_open_date(&#39;stockcode&#39;)</p><p><strong>释义：</strong> 根据代码返回对应股票的上市时间</p><p><strong>参数：</strong> stockcode：股票代码，如&#39;000001.SZ&#39;，缺省值 &#39; &#39; 默认为当前图代码</p><p><strong>返回：</strong> number</p><p><strong>示例：</strong></p>',6),ls=s("div",{class:"language-python line-numbers-mode","data-ext":"py"},[s("pre",{class:"shiki dracula",style:{"background-color":"#282A36"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FF79C6"}},"def"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#50FA7B"}},"init"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#FFB86C","font-style":"italic"}},"ContextInfo"),s("span",{style:{color:"#F8F8F2"}},"):")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    "),s("span",{style:{color:"#8BE9FD"}},"print"),s("span",{style:{color:"#F8F8F2"}},"(ContextInfo.get_open_date("),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"000001.SZ"),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F8F8F2"}},"))")]),e(`
`),s("span",{class:"line"})])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1),ns=s("div",{class:"language-text line-numbers-mode","data-ext":"text"},[s("pre",{class:"shiki dracula",style:{"background-color":"#282A36"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"19910403")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}})])])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"})])],-1),ts=r('<h3 id="create-sector-创建板块" tabindex="-1"><a class="header-anchor" href="#create-sector-创建板块" aria-hidden="true">#</a> create_sector - 创建板块</h3><p><strong>用法：</strong> create_sector(parent_node,sector_name,overwrite)</p><p><strong>释义：</strong> 创建板块</p><p><strong>参数：</strong></p><ul><li>parent_node：str，父节点，&#39;&#39;为&#39;我的&#39;（默认目录）</li><li>sector_name：str，要创建的板块名</li><li>overwrite：bool，是否覆盖。如果目标节点已存在，为True时跳过，为False时在sector_name后增加数字编号，编号为从1开始自增的第一个不重复的值。</li></ul><p><strong>返回：</strong> sector_name2：实际创建的板块名</p><p><strong>示例：</strong></p>',7),os=s("div",{class:"language-python line-numbers-mode","data-ext":"py"},[s("pre",{class:"shiki dracula",style:{"background-color":"#282A36"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"sector"),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}},"create_sector("),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"我的"),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F8F8F2"}},","),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"新建板块"),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F8F8F2"}},","),s("span",{style:{color:"#BD93F9"}},"False"),s("span",{style:{color:"#F8F8F2"}},")")]),e(`
`),s("span",{class:"line"})])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"})])],-1),as=s("div",{class:"language-text line-numbers-mode","data-ext":"text"},[s("pre",{class:"shiki dracula",style:{"background-color":"#282A36"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"新建板块")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}})])])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"})])],-1),rs=r('<h3 id="create-sector-folder-创建板块目录节点" tabindex="-1"><a class="header-anchor" href="#create-sector-folder-创建板块目录节点" aria-hidden="true">#</a> create_sector_folder - 创建板块目录节点</h3><p><strong>用法：</strong> create_sector_folder(parent_node,folder_name,overwrite)</p><p><strong>释义：</strong> 创建板块目录节点</p><p><strong>参数：</strong></p><ul><li>parent_node：str，父节点，&#39;&#39;为&#39;我的&#39;（默认目录）</li><li>sector_name：str，要创建的节点名</li><li>overwrite：bool，是否覆盖。如果目标节点已存在，为True时跳过，为False时在folder_name后增加数字编号，编号为从1开始自增的第一个不重复的值。</li></ul><p><strong>返回：</strong> sector_name2：实际创建的节点名</p><p><strong>示例：</strong></p>',7),cs=s("div",{class:"language-python line-numbers-mode","data-ext":"py"},[s("pre",{class:"shiki dracula",style:{"background-color":"#282A36"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"folder"),s("span",{style:{color:"#FF79C6"}},"="),s("span",{style:{color:"#F8F8F2"}},"create_sector_folder("),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"我的"),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F8F8F2"}},","),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"新建分类"),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F8F8F2"}},","),s("span",{style:{color:"#BD93F9"}},"False"),s("span",{style:{color:"#F8F8F2"}},")")]),e(`
`),s("span",{class:"line"})])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"})])],-1),is=s("div",{class:"language-text line-numbers-mode","data-ext":"text"},[s("pre",{class:"shiki dracula",style:{"background-color":"#282A36"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"新建分类")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}})])])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"})])],-1),Fs=r('<h3 id="get-sector-list-获取板块目录信息" tabindex="-1"><a class="header-anchor" href="#get-sector-list-获取板块目录信息" aria-hidden="true">#</a> get_sector_list - 获取板块目录信息</h3><p><strong>用法：</strong> get_sector_list(node)</p><p><strong>释义：</strong> 获取板块目录信息</p><p><strong>参数：</strong></p><ul><li>node：str，板块节点名，&#39;&#39;为顶层目录</li></ul><p><strong>返回：</strong> info_list：[[s1,s2,...],[f1,f2,...]]s为板块名，f为目录节点名，例如[[&#39;我的自选&#39;],[&#39;新建分类1&#39;]]</p><p><strong>示例：</strong></p>',7),ps=s("div",{class:"language-python line-numbers-mode","data-ext":"py"},[s("pre",{class:"shiki dracula",style:{"background-color":"#282A36"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"get_sector_list("),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"我的"),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F8F8F2"}},")")]),e(`
`),s("span",{class:"line"})])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"})])],-1),ds=s("div",{class:"language-text line-numbers-mode","data-ext":"text"},[s("pre",{class:"shiki dracula",style:{"background-color":"#282A36"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"[['我的自选', '龙头', '卖出篮子', 'TMP', '震荡', '待分析'], []]")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}})])])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"})])],-1),ys=r('<h3 id="reset-sector-stock-list-设置板块成分股" tabindex="-1"><a class="header-anchor" href="#reset-sector-stock-list-设置板块成分股" aria-hidden="true">#</a> reset_sector_stock_list - 设置板块成分股</h3><p><strong>用法：</strong> reset_sector_stock_list(sector,stock_list)</p><p><strong>释义：</strong> 设置板块成分股</p><p><strong>参数：</strong></p><ul><li>sector：板块名</li><li>stock_list：list，品种代码列表，例如[&#39;000001.SZ&#39;,&#39;600000.SH&#39;]</li></ul><p><strong>返回：</strong> result：bool，操作成功为True，失败为False</p><p><strong>示例：</strong></p>',7),us=s("div",{class:"language-python line-numbers-mode","data-ext":"py"},[s("pre",{class:"shiki dracula",style:{"background-color":"#282A36"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"reset_sector_stock_list("),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"我的自选"),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F8F8F2"}},",["),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"000001.SZ"),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F8F8F2"}},","),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"600000.SH"),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F8F8F2"}},"])")]),e(`
`),s("span",{class:"line"})])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"})])],-1),hs=s("div",{class:"language-text line-numbers-mode","data-ext":"text"},[s("pre",{class:"shiki dracula",style:{"background-color":"#282A36"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"True / False")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}})])])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"})])],-1),bs=s("p",null,null,-1),vs=r('<h3 id="remove-stock-from-sector-移除板块成分股" tabindex="-1"><a class="header-anchor" href="#remove-stock-from-sector-移除板块成分股" aria-hidden="true">#</a> remove_stock_from_sector - 移除板块成分股</h3><p><strong>用法：</strong> remove_stock_from_sector(sector,stock_code)</p><p><strong>释义：</strong> 移除板块成分股</p><p><strong>参数：</strong></p><ul><li>sector：板块名</li><li>stock_code：品种代码，例如&#39;000001.SZ&#39;</li></ul><p><strong>返回：</strong> result：bool，操作成功为True，失败为False</p><p><strong>示例：</strong></p>',7),_s=s("div",{class:"language-python line-numbers-mode","data-ext":"py"},[s("pre",{class:"shiki dracula",style:{"background-color":"#282A36"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"remove_stock_from_sector("),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"我的自选"),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F8F8F2"}},","),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"000001.SZ"),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F8F8F2"}},")")]),e(`
`),s("span",{class:"line"})])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"})])],-1),ms=s("div",{class:"language-text line-numbers-mode","data-ext":"text"},[s("pre",{class:"shiki dracula",style:{"background-color":"#282A36"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"True / False")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}})])])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"})])],-1),gs=s("p",null,null,-1),fs=r('<h3 id="add-stock-to-sector-添加板块成分股" tabindex="-1"><a class="header-anchor" href="#add-stock-to-sector-添加板块成分股" aria-hidden="true">#</a> add_stock_to_sector - 添加板块成分股</h3><p><strong>用法：</strong> add_stock_to_sector(sector,stock_code)</p><p><strong>释义：</strong> 添加板块成分股</p><p><strong>参数：</strong></p><ul><li>sector：板块名</li><li>stock_code：品种代码，例如&#39;000001.SZ&#39;</li></ul><p><strong>返回：</strong> result：bool，操作成功为True，失败为False</p><p><strong>示例：</strong></p>',7),As=s("div",{class:"language-python line-numbers-mode","data-ext":"py"},[s("pre",{class:"shiki dracula",style:{"background-color":"#282A36"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"add_stock_to_sector("),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"我的自选"),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F8F8F2"}},","),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F1FA8C"}},"000001.SZ"),s("span",{style:{color:"#E9F284"}},"'"),s("span",{style:{color:"#F8F8F2"}},")")]),e(`
`),s("span",{class:"line"})])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"})])],-1),xs=s("div",{class:"language-text line-numbers-mode","data-ext":"text"},[s("pre",{class:"shiki dracula",style:{"background-color":"#282A36"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"True / False")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}})])])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"})])],-1),Cs=s("p",null,null,-1);function ks(Es,Bs){const i=c("ExternalLinkIcon"),a=c("Tabs"),F=c("RouterLink");return d(),y("div",null,[h,s("p",null,[e("ContextInfo 是策略运行环境对象，是 init, after_init, handlebar 等基本方法的入参，里面包括了终端自带的属性和方法。一般情况下不建议对ContextInfo添加自定义属性，ContextInfo会随着bar的切换而重置到上一根bar的结束状态，建议用自建的全局变量来存储。"),s("a",b,[e("详细说明请看这里"),o(i)])]),v,o(a,{id:"52",data:[{id:"python"}]},{title0:l(({value:n,isActive:t})=>[e("python")]),tab0:l(({value:n,isActive:t})=>[_]),_:1}),m,o(a,{id:"60",data:[{id:"python"}]},{title0:l(({value:n,isActive:t})=>[e("python")]),tab0:l(({value:n,isActive:t})=>[g]),_:1}),f,A,s("p",null,[e("系统会在"),x,e("函数执行完后和执行"),C,e("之前调用"),k,e(", 有些"),E,e("里不支持的函数比如"),o(F,{to:"/pages/fd9cbd/#_23-%E8%8E%B7%E5%8F%96%E6%8C%87%E5%AE%9A%E4%B8%AA%E8%82%A1-%E5%90%88%E7%BA%A6-%E6%8C%87%E6%95%B0%E7%9A%84-k-%E7%BA%BF-%E4%BA%A4%E6%98%93%E6%97%A5-%E5%88%97%E8%A1%A8-contextinfo-get-trading-dates"},{default:l(()=>[e("ContextInfo.get_trading_dates")]),_:1}),e("可以在"),B,e("里调用。")]),I,o(a,{id:"114",data:[{id:"python"}]},{title0:l(({value:n,isActive:t})=>[e("python")]),tab0:l(({value:n,isActive:t})=>[D]),_:1}),S,o(a,{id:"122",data:[{id:"python"}]},{title0:l(({value:n,isActive:t})=>[e("python")]),tab0:l(({value:n,isActive:t})=>[T]),_:1}),w,o(a,{id:"192",data:[{id:"python"}]},{title0:l(({value:n,isActive:t})=>[e("python")]),tab0:l(({value:n,isActive:t})=>[K]),_:1}),H,o(a,{id:"284",data:[{id:"python"}]},{title0:l(({value:n,isActive:t})=>[e("python")]),tab0:l(({value:n,isActive:t})=>[Z]),_:1}),q,M,o(a,{id:"295",data:[{id:"python"}]},{title0:l(({value:n,isActive:t})=>[e("python")]),tab0:l(({value:n,isActive:t})=>[N]),_:1}),j,o(a,{id:"340",data:[{id:"示例"}]},{title0:l(({value:n,isActive:t})=>[e("示例")]),tab0:l(({value:n,isActive:t})=>[L]),_:1}),U,o(a,{id:"380",data:[{id:"python"}]},{title0:l(({value:n,isActive:t})=>[e("python")]),tab0:l(({value:n,isActive:t})=>[V,P]),_:1}),Y,o(a,{id:"447",data:[{id:"python"}]},{title0:l(({value:n,isActive:t})=>[e("python")]),tab0:l(({value:n,isActive:t})=>[R]),_:1}),G,o(a,{id:"478",data:[{id:"python"},{id:"result"}]},{title0:l(({value:n,isActive:t})=>[e("python")]),title1:l(({value:n,isActive:t})=>[e("result")]),tab0:l(({value:n,isActive:t})=>[z]),tab1:l(({value:n,isActive:t})=>[J]),_:1}),O,o(a,{id:"512",data:[{id:"python"},{id:"result"}]},{title0:l(({value:n,isActive:t})=>[e("python")]),title1:l(({value:n,isActive:t})=>[e("result")]),tab0:l(({value:n,isActive:t})=>[Q]),tab1:l(({value:n,isActive:t})=>[W]),_:1}),X,o(a,{id:"538",data:[{id:"示例"},{id:"返回值"}]},{title0:l(({value:n,isActive:t})=>[e("示例")]),title1:l(({value:n,isActive:t})=>[e("返回值")]),tab0:l(({value:n,isActive:t})=>[$]),tab1:l(({value:n,isActive:t})=>[ss]),_:1}),es,o(a,{id:"564",data:[{id:"python"},{id:"result"}]},{title0:l(({value:n,isActive:t})=>[e("python")]),title1:l(({value:n,isActive:t})=>[e("result")]),tab0:l(({value:n,isActive:t})=>[ls]),tab1:l(({value:n,isActive:t})=>[ns]),_:1}),ts,o(a,{id:"607",data:[{id:"python"},{id:"result"}]},{title0:l(({value:n,isActive:t})=>[e("python")]),title1:l(({value:n,isActive:t})=>[e("result")]),tab0:l(({value:n,isActive:t})=>[os]),tab1:l(({value:n,isActive:t})=>[as]),_:1}),rs,o(a,{id:"650",data:[{id:"python"},{id:"result"}]},{title0:l(({value:n,isActive:t})=>[e("python")]),title1:l(({value:n,isActive:t})=>[e("result")]),tab0:l(({value:n,isActive:t})=>[cs]),tab1:l(({value:n,isActive:t})=>[is]),_:1}),Fs,o(a,{id:"683",data:[{id:"python"},{id:"result"}]},{title0:l(({value:n,isActive:t})=>[e("python")]),title1:l(({value:n,isActive:t})=>[e("result")]),tab0:l(({value:n,isActive:t})=>[ps]),tab1:l(({value:n,isActive:t})=>[ds]),_:1}),ys,o(a,{id:"721",data:[{id:"python"},{id:"result"}]},{title0:l(({value:n,isActive:t})=>[e("python")]),title1:l(({value:n,isActive:t})=>[e("result")]),tab0:l(({value:n,isActive:t})=>[us]),tab1:l(({value:n,isActive:t})=>[hs,bs]),_:1}),vs,o(a,{id:"762",data:[{id:"python"},{id:"result"}]},{title0:l(({value:n,isActive:t})=>[e("python")]),title1:l(({value:n,isActive:t})=>[e("result")]),tab0:l(({value:n,isActive:t})=>[_s]),tab1:l(({value:n,isActive:t})=>[ms,gs]),_:1}),fs,o(a,{id:"803",data:[{id:"python"},{id:"result"}]},{title0:l(({value:n,isActive:t})=>[e("python")]),title1:l(({value:n,isActive:t})=>[e("result")]),tab0:l(({value:n,isActive:t})=>[As]),tab1:l(({value:n,isActive:t})=>[xs,Cs]),_:1})])}const Ds=p(u,[["render",ks],["__file","system_function.html.vue"]]);export{Ds as default};
