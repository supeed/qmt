
<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.67">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    
	<title>交易函数</title><meta name="description" content="QMT说明, QMT-Python-API, QMT用户手册。">
    
<link rel="preload" href="../assets/style-8436f03b.css" as="style">
<link rel="stylesheet" href="../assets/style-8436f03b.css">
    
<link rel="modulepreload" href="../assets/app-4f7ad5aa.js">
<link rel="modulepreload" href="../assets/trading_function.html-3c0f4ee8.js">
<link rel="modulepreload" href="../assets/trading_function.html-8de10c2f.js">
<link rel="prefetch" href="../assets/index.html-93a0007d.js" as="script">
<link rel="prefetch" href="../assets/basic_syntax.html-e393df56.js" as="script">
<link rel="prefetch" href="../assets/check_sheet.html-a405c8a3.js" as="script">
<link rel="prefetch" href="../assets/code_examples.html-985b4984.js" as="script">
<link rel="prefetch" href="../assets/control_statement.html-bf992bd7.js" as="script">
<link rel="prefetch" href="../assets/operating_mode.html-a2f39c1a.js" as="script">
<link rel="prefetch" href="../assets/start_now.html-1be21f8a.js" as="script">
<link rel="prefetch" href="../assets/system_function.html-49a65798.js" as="script">
<link rel="prefetch" href="../assets/python调用VBA.html-e92f2331.js" as="script">
<link rel="prefetch" href="../assets/全市场涨跌幅度统计.html-b8ba35f1.js" as="script">
<link rel="prefetch" href="../assets/全市场资金流向.html-3bd359eb.js" as="script">
<link rel="prefetch" href="../assets/北向资金.html-c14449da.js" as="script">
<link rel="prefetch" href="../assets/南向资金.html-ed8f1d67.js" as="script">
<link rel="prefetch" href="../assets/外盘_内盘.html-f9f023d3.js" as="script">
<link rel="prefetch" href="../assets/多空对比.html-a634bb69.js" as="script">
<link rel="prefetch" href="../assets/委买价_委卖价_委买量_委卖量.html-e791f06d.js" as="script">
<link rel="prefetch" href="../assets/总市值.html-54cae4e7.js" as="script">
<link rel="prefetch" href="../assets/总股本_涨停_跌停.html-9495eb6a.js" as="script">
<link rel="prefetch" href="../assets/换手.html-396e0a2d.js" as="script">
<link rel="prefetch" href="../assets/最新_今开_最高_最低_总额_总手_交易状态.html-1ae0fd22.js" as="script">
<link rel="prefetch" href="../assets/注册资本.html-061f0b8d.js" as="script">
<link rel="prefetch" href="../assets/流通盘.html-26dbb5b3.js" as="script">
<link rel="prefetch" href="../assets/涨跌_涨幅.html-c4201ae4.js" as="script">
<link rel="prefetch" href="../assets/涨跌家数变化.html-a30316a7.js" as="script">
<link rel="prefetch" href="../assets/规模风向标.html-d7dc3f5e.js" as="script">
<link rel="prefetch" href="../assets/量比.html-ca6f9a2e.js" as="script">
<link rel="prefetch" href="../assets/index.html-179668eb.js" as="script">
<link rel="prefetch" href="../assets/bond.html-d9c1be0d.js" as="script">
<link rel="prefetch" href="../assets/floorfunds.html-8810bed2.js" as="script">
<link rel="prefetch" href="../assets/future.html-8c1c26b7.js" as="script">
<link rel="prefetch" href="../assets/indexes.html-ec6ecef0.js" as="script">
<link rel="prefetch" href="../assets/industry.html-cffc4e77.js" as="script">
<link rel="prefetch" href="../assets/option.html-1d25e189.js" as="script">
<link rel="prefetch" href="../assets/question_answer.html-bed5ae76.js" as="script">
<link rel="prefetch" href="../assets/stock.html-035c3630.js" as="script">
<link rel="prefetch" href="../assets/rookie.html-df76d0ad.js" as="script">
<link rel="prefetch" href="../assets/callback_function.html-4153be6c.js" as="script">
<link rel="prefetch" href="../assets/code_examples.html-c1ae1001.js" as="script">
<link rel="prefetch" href="../assets/data_function.html-a6b5f1c5.js" as="script">
<link rel="prefetch" href="../assets/data_structure.html-a96a202d.js" as="script">
<link rel="prefetch" href="../assets/drawing_function.html-dee669df.js" as="script">
<link rel="prefetch" href="../assets/enum_constants.html-2c1f6dcc.js" as="script">
<link rel="prefetch" href="../assets/interface_operation.html-47a2cf15.js" as="script">
<link rel="prefetch" href="../assets/question_answer.html-4f12deae.js" as="script">
<link rel="prefetch" href="../assets/quote_function.html-827e9fb8.js" as="script">
<link rel="prefetch" href="../assets/related_instructions.html-9b630c20.js" as="script">
<link rel="prefetch" href="../assets/start_now.html-79f8f415.js" as="script">
<link rel="prefetch" href="../assets/system_function.html-03a1dc3a.js" as="script">
<link rel="prefetch" href="../assets/user_attention.html-e0d27a96.js" as="script">
<link rel="prefetch" href="../assets/variable_convention.html-17caf0d6.js" as="script">
<link rel="prefetch" href="../assets/code_examples.html-f1708e88.js" as="script">
<link rel="prefetch" href="../assets/download_xtquant.html-337a4246.js" as="script">
<link rel="prefetch" href="../assets/question_function.html-92b003d3.js" as="script">
<link rel="prefetch" href="../assets/start_now.html-b45a357d.js" as="script">
<link rel="prefetch" href="../assets/xtdata.html-97c855c0.js" as="script">
<link rel="prefetch" href="../assets/xttrader.html-cb4abe04.js" as="script">
<link rel="prefetch" href="../assets/JoinQuant2QMT.html-38cb9974.js" as="script">
<link rel="prefetch" href="../assets/index.html-22b6b31a.js" as="script">
<link rel="prefetch" href="../assets/daoru_daochu.html-c8cace75.js" as="script">
<link rel="prefetch" href="../assets/hangqing_setting.html-1a9570b3.js" as="script">
<link rel="prefetch" href="../assets/ty_add_indicator.html-1f2f4b0a.js" as="script">
<link rel="prefetch" href="../assets/ty_backtest_strategy.html-270aeeab.js" as="script">
<link rel="prefetch" href="../assets/ty_code_review_backtest.html-200ceddd.js" as="script">
<link rel="prefetch" href="../assets/ty_content.html-bac1ad25.js" as="script">
<link rel="prefetch" href="../assets/ty_data_download.html-351b4a4f.js" as="script">
<link rel="prefetch" href="../assets/ty_data_interface.html-2e32a98a.js" as="script">
<link rel="prefetch" href="../assets/ty_direct_connect.html-f8b10f83.js" as="script">
<link rel="prefetch" href="../assets/ty_factor_data.html-1746bcaa.js" as="script">
<link rel="prefetch" href="../assets/ty_linux_xtquant_data.html-44bf60fb.js" as="script">
<link rel="prefetch" href="../assets/ty_native_python.html-8028f714.js" as="script">
<link rel="prefetch" href="../assets/ty_register_install.html-0d2c078f.js" as="script">
<link rel="prefetch" href="../assets/404.html-f9875e7b.js" as="script">
<link rel="prefetch" href="../assets/index.html-766f0669.js" as="script">
<link rel="prefetch" href="../assets/basic_syntax.html-5d89ee34.js" as="script">
<link rel="prefetch" href="../assets/check_sheet.html-f9ed5248.js" as="script">
<link rel="prefetch" href="../assets/code_examples.html-b9cb08f4.js" as="script">
<link rel="prefetch" href="../assets/control_statement.html-efd069de.js" as="script">
<link rel="prefetch" href="../assets/operating_mode.html-8477b54e.js" as="script">
<link rel="prefetch" href="../assets/start_now.html-ffa9b752.js" as="script">
<link rel="prefetch" href="../assets/system_function.html-3b0e07c1.js" as="script">
<link rel="prefetch" href="../assets/python调用VBA.html-04a53346.js" as="script">
<link rel="prefetch" href="../assets/全市场涨跌幅度统计.html-52d1f349.js" as="script">
<link rel="prefetch" href="../assets/全市场资金流向.html-faf4d3d8.js" as="script">
<link rel="prefetch" href="../assets/北向资金.html-c65ffe41.js" as="script">
<link rel="prefetch" href="../assets/南向资金.html-f0b9a7f7.js" as="script">
<link rel="prefetch" href="../assets/外盘_内盘.html-99b15d0e.js" as="script">
<link rel="prefetch" href="../assets/多空对比.html-1b5dda20.js" as="script">
<link rel="prefetch" href="../assets/委买价_委卖价_委买量_委卖量.html-10ef3ff4.js" as="script">
<link rel="prefetch" href="../assets/总市值.html-3f06554a.js" as="script">
<link rel="prefetch" href="../assets/总股本_涨停_跌停.html-fa561e62.js" as="script">
<link rel="prefetch" href="../assets/换手.html-50b0fe55.js" as="script">
<link rel="prefetch" href="../assets/最新_今开_最高_最低_总额_总手_交易状态.html-ac059782.js" as="script">
<link rel="prefetch" href="../assets/注册资本.html-ed642b18.js" as="script">
<link rel="prefetch" href="../assets/流通盘.html-cb0af016.js" as="script">
<link rel="prefetch" href="../assets/涨跌_涨幅.html-4bdf807b.js" as="script">
<link rel="prefetch" href="../assets/涨跌家数变化.html-39d9d51b.js" as="script">
<link rel="prefetch" href="../assets/规模风向标.html-61f057d8.js" as="script">
<link rel="prefetch" href="../assets/量比.html-946984fa.js" as="script">
<link rel="prefetch" href="../assets/index.html-343a9bc9.js" as="script">
<link rel="prefetch" href="../assets/bond.html-b95fe2e7.js" as="script">
<link rel="prefetch" href="../assets/floorfunds.html-8f40ab6c.js" as="script">
<link rel="prefetch" href="../assets/future.html-bc8a6747.js" as="script">
<link rel="prefetch" href="../assets/indexes.html-12cf3b96.js" as="script">
<link rel="prefetch" href="../assets/industry.html-5afe454b.js" as="script">
<link rel="prefetch" href="../assets/option.html-41035b2b.js" as="script">
<link rel="prefetch" href="../assets/question_answer.html-2e60f1af.js" as="script">
<link rel="prefetch" href="../assets/stock.html-3ddf1187.js" as="script">
<link rel="prefetch" href="../assets/rookie.html-1880c6e7.js" as="script">
<link rel="prefetch" href="../assets/callback_function.html-7b61dc3e.js" as="script">
<link rel="prefetch" href="../assets/code_examples.html-e4d0c98f.js" as="script">
<link rel="prefetch" href="../assets/data_function.html-c585078e.js" as="script">
<link rel="prefetch" href="../assets/data_structure.html-00957d9f.js" as="script">
<link rel="prefetch" href="../assets/drawing_function.html-6fd79a20.js" as="script">
<link rel="prefetch" href="../assets/enum_constants.html-e026c5f8.js" as="script">
<link rel="prefetch" href="../assets/interface_operation.html-294f10dc.js" as="script">
<link rel="prefetch" href="../assets/question_answer.html-b40d9b88.js" as="script">
<link rel="prefetch" href="../assets/quote_function.html-65e64c4b.js" as="script">
<link rel="prefetch" href="../assets/related_instructions.html-4bd31d1e.js" as="script">
<link rel="prefetch" href="../assets/start_now.html-b5537d3a.js" as="script">
<link rel="prefetch" href="../assets/system_function.html-4e6487d0.js" as="script">
<link rel="prefetch" href="../assets/user_attention.html-a4aafcf1.js" as="script">
<link rel="prefetch" href="../assets/variable_convention.html-ee437d4a.js" as="script">
<link rel="prefetch" href="../assets/code_examples.html-5b70b4b7.js" as="script">
<link rel="prefetch" href="../assets/download_xtquant.html-cd71994a.js" as="script">
<link rel="prefetch" href="../assets/question_function.html-0e56fa2f.js" as="script">
<link rel="prefetch" href="../assets/start_now.html-ccb2e41b.js" as="script">
<link rel="prefetch" href="../assets/xtdata.html-6eed3ea1.js" as="script">
<link rel="prefetch" href="../assets/xttrader.html-95a0f11e.js" as="script">
<link rel="prefetch" href="../assets/JoinQuant2QMT.html-4689d313.js" as="script">
<link rel="prefetch" href="../assets/index.html-3d5e006c.js" as="script">
<link rel="prefetch" href="../assets/daoru_daochu.html-a8aa83da.js" as="script">
<link rel="prefetch" href="../assets/hangqing_setting.html-5f096289.js" as="script">
<link rel="prefetch" href="../assets/ty_add_indicator.html-d492a779.js" as="script">
<link rel="prefetch" href="../assets/ty_backtest_strategy.html-a88bc371.js" as="script">
<link rel="prefetch" href="../assets/ty_code_review_backtest.html-d46b1117.js" as="script">
<link rel="prefetch" href="../assets/ty_content.html-5ebd8aae.js" as="script">
<link rel="prefetch" href="../assets/ty_data_download.html-afb26211.js" as="script">
<link rel="prefetch" href="../assets/ty_data_interface.html-c02f6dd1.js" as="script">
<link rel="prefetch" href="../assets/ty_direct_connect.html-96b151d2.js" as="script">
<link rel="prefetch" href="../assets/ty_factor_data.html-288cd2ef.js" as="script">
<link rel="prefetch" href="../assets/ty_linux_xtquant_data.html-b4e8a806.js" as="script">
<link rel="prefetch" href="../assets/ty_native_python.html-0a5cdc64.js" as="script">
<link rel="prefetch" href="../assets/ty_register_install.html-72528567.js" as="script">
<link rel="prefetch" href="../assets/404.html-d17800ac.js" as="script">
<link rel="prefetch" href="../assets/SearchBox-7eee7251.js" as="script">
<link rel="prefetch" href="../assets/auto-6adc87e8.js" as="script">
<link rel="prefetch" href="../assets/index-2bf332f6.js" as="script">
<link rel="prefetch" href="../assets/flowchart-c441f34d.js" as="script">
<link rel="prefetch" href="../assets/SignPanel-522772a1.js" as="script">
<link rel="prefetch" href="../assets/SignPanel-522772a1.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[-->
	<header class="navbar">
	
	<div class="navbar-item"><a href="../index.html" class="" aria-label="首页">首页</a></div>
	<div class="navbar-item"><a href="../innerApi/start_now.html" class="" aria-label="内置Python"><!--[--><!--]--> 内置Python <!--[--><!--]--></a></div>
	<div class="navbar-item"><a href="../nativeApi/start_now.html" class="" aria-label="原生Python"><!--[--><!--]--> 原生Python <!--[--><!--]--></a></div>
	<div class="navbar-item"><a href="../VBA/start_now.html" class="" aria-label="VBA"><!--[--><!--]--> VBA <!--[--><!--]--></a></div>

	<div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="数据字典"><span class="title">数据字典</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="数据字典"><span class="title">数据字典</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="../dictionary/stock.html" class="" aria-label="股票数据"><!--[--><!--]--> 股票数据 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="../dictionary/industry.html" class="" aria-label="行业概念数据"><!--[--><!--]--> 行业概念数据 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="../dictionary/indexes.html" class="" aria-label="指数数据"><!--[--><!--]--> 指数数据 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="../dictionary/future.html" class="" aria-label="期货数据"><!--[--><!--]--> 期货数据 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="../dictionary/option.html" class="" aria-label="期权数据"><!--[--><!--]--> 期权数据 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="../dictionary/floorfunds.html" class="" aria-label="场内基金数据"><!--[--><!--]--> 场内基金数据 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="../dictionary/bond.html" class="" aria-label="债券数据"><!--[--><!--]--> 债券数据 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="../dictionary/question_answer.html" class="" aria-label="常见问题"><!--[--><!--]--> 常见问题 <!--[--><!--]--></a></li><!--]--></ul></div></div>

	<div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--这里是导航右侧--></nav></div>
	
	</header>

	<aside class="sidebar">
	
	<ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading active">内置Python <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="../innerApi/start_now.html" class="sidebar-item" aria-label="快速开始"><!--[--><!--]--> 快速开始 <!--[--><!--]--></a><!----></li><li><a href="../innerApi/user_attention.html" class="sidebar-item" aria-label="使用须知"><!--[--><!--]--> 使用须知 <!--[--><!--]--></a><!----></li><li><a href="../innerApi/interface_operation.html" class="sidebar-item" aria-label="界面操作"><!--[--><!--]--> 界面操作 <!--[--><!--]--></a><!----></li><li><a href="../innerApi/variable_convention.html" class="sidebar-item" aria-label="变量约定"><!--[--><!--]--> 变量约定 <!--[--><!--]--></a><!----></li><li><a href="../innerApi/data_structure.html" class="sidebar-item" aria-label="数据结构"><!--[--><!--]--> 数据结构 <!--[--><!--]--></a><!----></li><li><a href="../innerApi/system_function.html" class="sidebar-item" aria-label="系统函数"><!--[--><!--]--> 系统函数 <!--[--><!--]--></a><!----></li><li><a href="../innerApi/data_function.html" class="sidebar-item" aria-label="行情函数"><!--[--><!--]--> 行情函数 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="../innerApi/trading_function.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="交易函数"><!--[--><!--]--> 交易函数 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="../innerApi/trading_function.html#交易下单函数" class="router-link-active router-link-exact-active sidebar-item" aria-label="交易下单函数"><!--[--><!--]--> 交易下单函数 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="../innerApi/trading_function.html#passorder-综合下单函数" class="router-link-active router-link-exact-active sidebar-item" aria-label="passorder - 综合下单函数"><!--[--><!--]--> passorder - 综合下单函数 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="../innerApi/trading_function.html#algo-passorder-算法下单-拆单-函数" class="router-link-active router-link-exact-active sidebar-item" aria-label="algo_passorder - 算法下单（拆单）函数"><!--[--><!--]--> algo_passorder - 算法下单（拆单）函数 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="../innerApi/trading_function.html#smart-algo-passorder-智能算法-vwap-等-函数" class="router-link-active router-link-exact-active sidebar-item" aria-label="smart_algo_passorder - 智能算法（VWAP 等）函数"><!--[--><!--]--> smart_algo_passorder - 智能算法（VWAP 等）函数 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="../innerApi/trading_function.html#获取algoparam具体字段" class="router-link-active router-link-exact-active sidebar-item" aria-label="获取algoParam具体字段"><!--[--><!--]--> 获取algoParam具体字段 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="../innerApi/trading_function.html#cancel-撤销委托" class="router-link-active router-link-exact-active sidebar-item" aria-label="cancel-撤销委托"><!--[--><!--]--> cancel-撤销委托 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="../innerApi/trading_function.html#cancel-task-撤销任务" class="router-link-active router-link-exact-active sidebar-item" aria-label="cancel_task - 撤销任务"><!--[--><!--]--> cancel_task - 撤销任务 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="../innerApi/trading_function.html#pause-task-暂停任务" class="router-link-active router-link-exact-active sidebar-item" aria-label="pause_task - 暂停任务"><!--[--><!--]--> pause_task - 暂停任务 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="../innerApi/trading_function.html#resume-task-继续任务" class="router-link-active router-link-exact-active sidebar-item" aria-label="resume_task - 继续任务"><!--[--><!--]--> resume_task - 继续任务 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="../innerApi/trading_function.html#交易查询函数" class="router-link-active router-link-exact-active sidebar-item" aria-label="交易查询函数"><!--[--><!--]--> 交易查询函数 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="../innerApi/trading_function.html#get-trade-detail-data-查询账号资金信息、委托记录等" class="router-link-active router-link-exact-active sidebar-item" aria-label="get_trade_detail_data-查询账号资金信息、委托记录等"><!--[--><!--]--> get_trade_detail_data-查询账号资金信息、委托记录等 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="../innerApi/trading_function.html#get-ipo-data-获取当日新股新债信息" class="router-link-active router-link-exact-active sidebar-item" aria-label="get_ipo_data-获取当日新股新债信息"><!--[--><!--]--> get_ipo_data-获取当日新股新债信息 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="../innerApi/trading_function.html#get-new-purchase-limit-获取账户新股申购额度" class="router-link-active router-link-exact-active sidebar-item" aria-label="get_new_purchase_limit-获取账户新股申购额度"><!--[--><!--]--> get_new_purchase_limit-获取账户新股申购额度 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="../innerApi/trading_function.html#get-value-by-order-id-根据委托号获取委托或成交信息" class="router-link-active router-link-exact-active sidebar-item" aria-label="get_value_by_order_id-根据委托号获取委托或成交信息"><!--[--><!--]--> get_value_by_order_id-根据委托号获取委托或成交信息 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="../innerApi/trading_function.html#get-assure-contract-获取两融担保标的明细" class="router-link-active router-link-exact-active sidebar-item" aria-label="get_assure_contract-获取两融担保标的明细"><!--[--><!--]--> get_assure_contract-获取两融担保标的明细 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="../innerApi/trading_function.html#get-enable-short-contract-获取可融券明细" class="router-link-active router-link-exact-active sidebar-item" aria-label="get_enable_short_contract-获取可融券明细"><!--[--><!--]--> get_enable_short_contract-获取可融券明细 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="../innerApi/trading_function.html#query-credit-account-查询信用账户明细" class="router-link-active router-link-exact-active sidebar-item" aria-label="query_credit_account - 查询信用账户明细"><!--[--><!--]--> query_credit_account - 查询信用账户明细 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="../innerApi/trading_function.html#query-credit-opvolume-查询两融最大可下单量" class="router-link-active router-link-exact-active sidebar-item" aria-label="query_credit_opvolume - 查询两融最大可下单量"><!--[--><!--]--> query_credit_opvolume - 查询两融最大可下单量 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="../innerApi/trading_function.html#get-option-subject-position-取期权标的持仓" class="router-link-active router-link-exact-active sidebar-item" aria-label="get_option_subject_position-取期权标的持仓"><!--[--><!--]--> get_option_subject_position-取期权标的持仓 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="../innerApi/trading_function.html#get-comb-option-取期权组合持仓" class="router-link-active router-link-exact-active sidebar-item" aria-label="get_comb_option-取期权组合持仓"><!--[--><!--]--> get_comb_option-取期权组合持仓 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="../innerApi/trading_function.html#get-unclosed-compacts-获取未了结负债合约明细" class="router-link-active router-link-exact-active sidebar-item" aria-label="get_unclosed_compacts-获取未了结负债合约明细"><!--[--><!--]--> get_unclosed_compacts-获取未了结负债合约明细 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="../innerApi/trading_function.html#get-closed-compacts-获取已了结负债合约明细" class="router-link-active router-link-exact-active sidebar-item" aria-label="get_closed_compacts-获取已了结负债合约明细"><!--[--><!--]--> get_closed_compacts-获取已了结负债合约明细 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="../innerApi/trading_function.html#其他交易函数-仅回测可用" class="router-link-active router-link-exact-active sidebar-item" aria-label="其他交易函数（仅回测可用）"><!--[--><!--]--> 其他交易函数（仅回测可用） <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="../innerApi/trading_function.html#get-basket-获取股票篮子" class="router-link-active router-link-exact-active sidebar-item" aria-label="get_basket-获取股票篮子"><!--[--><!--]--> get_basket-获取股票篮子 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="../innerApi/trading_function.html#set-basket-设置股票篮子" class="router-link-active router-link-exact-active sidebar-item" aria-label="set_basket-设置股票篮子"><!--[--><!--]--> set_basket-设置股票篮子 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="../innerApi/trading_function.html#order-lots-指定手数交易" class="router-link-active router-link-exact-active sidebar-item" aria-label="order_lots-指定手数交易"><!--[--><!--]--> order_lots-指定手数交易 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="../innerApi/trading_function.html#order-value-指定价值交易" class="router-link-active router-link-exact-active sidebar-item" aria-label="order_value-指定价值交易"><!--[--><!--]--> order_value-指定价值交易 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="../innerApi/trading_function.html#order-percent-指定比例交易" class="router-link-active router-link-exact-active sidebar-item" aria-label="order_percent-指定比例交易"><!--[--><!--]--> order_percent-指定比例交易 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="../innerApi/trading_function.html#order-target-value-指定目标价值交易" class="router-link-active router-link-exact-active sidebar-item" aria-label="order_target_value-指定目标价值交易"><!--[--><!--]--> order_target_value-指定目标价值交易 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="../innerApi/trading_function.html#order-target-percent-指定目标比例交易" class="router-link-active router-link-exact-active sidebar-item" aria-label="order_target_percent-指定目标比例交易"><!--[--><!--]--> order_target_percent-指定目标比例交易 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="../innerApi/trading_function.html#order-shares-指定股数交易" class="router-link-active router-link-exact-active sidebar-item" aria-label="order_shares-指定股数交易"><!--[--><!--]--> order_shares-指定股数交易 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="../innerApi/trading_function.html#buy-open-货买入开仓" class="router-link-active router-link-exact-active sidebar-item" aria-label="buy_open-货买入开仓"><!--[--><!--]--> buy_open-货买入开仓 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="../innerApi/trading_function.html#buy-close-tdayfirst-期货买入平仓-平今优先" class="router-link-active router-link-exact-active sidebar-item" aria-label="buy_close_tdayfirst-期货买入平仓（平今优先）"><!--[--><!--]--> buy_close_tdayfirst-期货买入平仓（平今优先） <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="../innerApi/trading_function.html#buy-close-ydayfirst-期货买入平仓-平昨优先" class="router-link-active router-link-exact-active sidebar-item" aria-label="buy_close_ydayfirst-期货买入平仓（平昨优先）"><!--[--><!--]--> buy_close_ydayfirst-期货买入平仓（平昨优先） <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="../innerApi/trading_function.html#sell-open-期货卖出开仓" class="router-link-active router-link-exact-active sidebar-item" aria-label="sell_open-期货卖出开仓"><!--[--><!--]--> sell_open-期货卖出开仓 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="../innerApi/trading_function.html#sell-close-tdayfirst-期货卖出平仓-平今优先" class="router-link-active router-link-exact-active sidebar-item" aria-label="sell_close_tdayfirst-期货卖出平仓（平今优先）"><!--[--><!--]--> sell_close_tdayfirst-期货卖出平仓（平今优先） <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="../innerApi/trading_function.html#sell-close-ydayfirst-期货卖出平仓-平昨优先" class="router-link-active router-link-exact-active sidebar-item" aria-label="sell_close_ydayfirst-期货卖出平仓（平昨优先）"><!--[--><!--]--> sell_close_ydayfirst-期货卖出平仓（平昨优先） <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="../innerApi/trading_function.html#已弃用-get-debt-contract-获取两融负债合约明细" class="router-link-active router-link-exact-active sidebar-item" aria-label="[已弃用] get_debt_contract-获取两融负债合约明细"><!--[--><!--]--> [已弃用] get_debt_contract-获取两融负债合约明细 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="../innerApi/trading_function.html#get-hkt-exchange-rate-获取沪深港通汇率数据" class="router-link-active router-link-exact-active sidebar-item" aria-label="get_hkt_exchange_rate-获取沪深港通汇率数据"><!--[--><!--]--> get_hkt_exchange_rate-获取沪深港通汇率数据 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><a href="../innerApi/callback_function.html" class="sidebar-item" aria-label="成交回报实时主推函数"><!--[--><!--]--> 成交回报实时主推函数 <!--[--><!--]--></a><!----></li><li><a href="../innerApi/quote_function.html" class="sidebar-item" aria-label="引用函数"><!--[--><!--]--> 引用函数 <!--[--><!--]--></a><!----></li><li><a href="../innerApi/drawing_function.html" class="sidebar-item" aria-label="绘图函数"><!--[--><!--]--> 绘图函数 <!--[--><!--]--></a><!----></li><li><a href="../innerApi/enum_constants.html" class="sidebar-item" aria-label="枚举常量"><!--[--><!--]--> 枚举常量 <!--[--><!--]--></a><!----></li><li><a href="../innerApi/code_examples.html" class="sidebar-item" aria-label="完整示例"><!--[--><!--]--> 完整示例 <!--[--><!--]--></a><!----></li><li><a href="../innerApi/question_answer.html" class="sidebar-item" aria-label="常见问题"><!--[--><!--]--> 常见问题 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page" data-v-3c904194><!--[--><!--]--><div class="theme-default-contents" data-v-3c904194><!----><!--[--><!--]--><div class="theme-default-content" data-v-3c904194><div data-v-3c904194><h2 id="交易下单函数" tabindex="-1"><a class="header-anchor" href="#交易下单函数" aria-hidden="true">#</a> 交易下单函数</h2><h3 id="passorder-综合下单函数" tabindex="-1"><a class="header-anchor" href="#passorder-综合下单函数" aria-hidden="true">#</a> passorder - 综合下单函数</h3><p>综合下单函数，用于股票、期货、期权等下单和新股、新债申购、融资融券等交易操作<strong>推荐使用</strong></p><div class="custom-container tip"><p class="custom-container-title">提示</p><ol><li>推荐使用</li><li>可覆盖多品种下单</li><li>注意参数的变化</li></ol></div><p><strong>调用方法：</strong></p><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-31-0" aria-selected="true">python</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-31-1" aria-selected="false">示例</button></div><!--[--><div class="vp-tab active" id="tab-31-0" role="tabpanel" aria-expanded="true"><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#F8F8F2;">passorder(</span></span>
<span class="line"><span style="color:#F8F8F2;">    opType, orderType, accountid</span></span>
<span class="line"><span style="color:#F8F8F2;">    , orderCode, prType, price, volume</span></span>
<span class="line"><span style="color:#F8F8F2;">    , strategyName, quickTrade, userOrderId</span></span>
<span class="line"><span style="color:#F8F8F2;">    , ContextInfo</span></span>
<span class="line"><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#6272A4;">&#39;&#39;&#39;</span></span>
<span class="line"><span style="color:#6272A4;">passorder(</span></span>
<span class="line"><span style="color:#6272A4;">    2 #opType 操作号</span></span>
<span class="line"><span style="color:#6272A4;">    , 1101 #orderType 组合方式</span></span>
<span class="line"><span style="color:#6272A4;">    , &#39;1000044&#39; #accountid 资金账号</span></span>
<span class="line"><span style="color:#6272A4;">    , &#39;cu2403.SF&#39; #orderCode 品种代码</span></span>
<span class="line"><span style="color:#6272A4;">    , 14 #prType 报价类型</span></span>
<span class="line"><span style="color:#6272A4;">    , 0.0 #price 价格</span></span>
<span class="line"><span style="color:#6272A4;">    , 2 #volume 下单量</span></span>
<span class="line"><span style="color:#6272A4;">    , &#39;示例下单&#39; #strategyName 策略名称</span></span>
<span class="line"><span style="color:#6272A4;">    , 1 #quickTrade 快速下单标记</span></span>
<span class="line"><span style="color:#6272A4;">    , &#39;投资备注&#39; #userOrderId 投资备注</span></span>
<span class="line"><span style="color:#6272A4;">    , C #ContextInfo 策略上下文</span></span>
<span class="line"><span style="color:#6272A4;">)</span></span>
<span class="line"><span style="color:#6272A4;">&#39;&#39;&#39;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div class="vp-tab" id="tab-31-1" role="tabpanel" aria-expanded="false"><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#6272A4;">#coding:gbk</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4;">&#39;&#39;&#39;</span></span>
<span class="line"><span style="color:#6272A4;"># 在策略交易界面运行时，account的值会被赋值为策略配置中的账号，编辑器界面运行时，需要手动赋值</span></span>
<span class="line"><span style="color:#6272A4;"># 编译器界面里执行的下单函数不会产生实际委托</span></span>
<span class="line"><span style="color:#6272A4;">&#39;&#39;&#39;</span></span>
<span class="line"><span style="color:#F8F8F2;">account </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">test</span><span style="color:#E9F284;">&quot;</span></span>
<span class="line"><span style="color:#FF79C6;">def</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">init</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">ContextInfo</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#FF79C6;">pass</span></span>
<span class="line"><span style="color:#FF79C6;">def</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">handlebar</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">ContextInfo</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#FF79C6;">if</span><span style="color:#F8F8F2;"> </span><span style="color:#FF79C6;">not</span><span style="color:#F8F8F2;"> ContextInfo.is_last_bar():</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#FF79C6;">return</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#6272A4;"># 单股单账号期货最新价买入 10 手，快速下单参数设置为 1</span></span>
<span class="line"><span style="color:#F8F8F2;">    passorder(</span><span style="color:#BD93F9;">0</span><span style="color:#F8F8F2;">, </span><span style="color:#BD93F9;">1101</span><span style="color:#F8F8F2;">, account, </span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">rb2405.SF</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;">, </span><span style="color:#BD93F9;">5</span><span style="color:#F8F8F2;">, </span><span style="color:#FF79C6;">-</span><span style="color:#BD93F9;">1</span><span style="color:#F8F8F2;">, </span><span style="color:#BD93F9;">10</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">示例</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;">, </span><span style="color:#BD93F9;">1</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">投资备注</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;">,ContextInfo)</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#6272A4;"># 单股单账号期货指定价买入 10 手，快速下单参数设置为 1</span></span>
<span class="line"><span style="color:#F8F8F2;">    passorder(</span><span style="color:#BD93F9;">0</span><span style="color:#F8F8F2;">, </span><span style="color:#BD93F9;">1101</span><span style="color:#F8F8F2;">, account,  </span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">rb2405.SF</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;">, </span><span style="color:#BD93F9;">11</span><span style="color:#F8F8F2;">, </span><span style="color:#BD93F9;">3000</span><span style="color:#F8F8F2;">, </span><span style="color:#BD93F9;">10</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">示例</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;">, </span><span style="color:#BD93F9;">1</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">投资备注</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;">,ContextInfo)</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#6272A4;"># 单股单账号股票最新价买入 100 股（1 手），快速下单参数设置为 1   </span></span>
<span class="line"><span style="color:#F8F8F2;">    passorder(</span><span style="color:#BD93F9;">23</span><span style="color:#F8F8F2;">, </span><span style="color:#BD93F9;">1101</span><span style="color:#F8F8F2;">, account, </span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">000001.SZ</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;">, </span><span style="color:#BD93F9;">5</span><span style="color:#F8F8F2;">, </span><span style="color:#BD93F9;">0</span><span style="color:#F8F8F2;">, </span><span style="color:#BD93F9;">100</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">示例</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;">, </span><span style="color:#BD93F9;">1</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">投资备注</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;">,ContextInfo)</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#6272A4;"># 单股单账号股票指定价买入 100 股（1 手），快速下单参数设置为 1</span></span>
<span class="line"><span style="color:#F8F8F2;">    passorder(</span><span style="color:#BD93F9;">23</span><span style="color:#F8F8F2;">, </span><span style="color:#BD93F9;">1101</span><span style="color:#F8F8F2;">, account, </span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">000001.SZ</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;">, </span><span style="color:#BD93F9;">11</span><span style="color:#F8F8F2;">, </span><span style="color:#BD93F9;">7</span><span style="color:#F8F8F2;">, </span><span style="color:#BD93F9;">100</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">示例</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;">, </span><span style="color:#BD93F9;">1</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">投资备注</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;">,ContextInfo)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--]--></div><p><strong>参数：</strong></p><table><thead><tr><th>参数名</th><th>类型</th><th>说明</th><th>提示</th></tr></thead><tbody><tr><td><code>opType</code></td><td><code>int</code></td><td>交易类型</td><td>可选买、买，期货开仓、平仓等<br><br>可选值参考<a href="../innerApi/enum_constants.html#optype-%E6%93%8D%E4%BD%9C%E7%B1%BB%E5%9E%8B" target="_blank" rel="noopener noreferrer">opType-操作类型<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a></td></tr><tr><td><code>orderType</code></td><td><code>int</code></td><td><br><br>下单方式</td><td>可选值参考<a href="../innerApi/enum_constants.html#ordertype-%E4%B8%8B%E5%8D%95%E6%96%B9%E5%BC%8F" target="_blank" rel="noopener noreferrer">orderType-下单方式<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a><br><br> 可选按股票数量买卖或按照金额等方式买卖<br><br>一、期货不支持 1102 和 1202;<br><br>二、对所有账号组的操作相当于对账号组里的每个账号做一样的操作，如 <code>passorder (23, 1202, &#39;testS&#39;, &#39;000001. SZ&#39;, 5, -1, 50000, ContextInfo)</code>，意思就是对账号组 <code>testS</code> 里的所有账号都以最新价开仓买入 50000 元市值的 <code>000001.SZ</code> 平安银行；<code>passorder (60,1101,&quot;test&quot;,&#39;510050. SH&#39;, 5,-1,1, ContextInfo)</code>意思就是账号<code>test</code>申购 1 个单位 (900000股)的华夏上证50ETF (只申购不买入成分股)。<br><br></td></tr><tr><td><code>accountID</code></td><td><code>string</code></td><td>资金账号</td><td>下单的账号ID（可多个）或账号组名或套利组名（一个篮子一个套利账号，如 accountID = &#39;股票账户名, 期货账号&#39;）</td></tr><tr><td><code>orderCode</code></td><td><code>string</code></td><td>下单代码</td><td>1. 如果是单股或单期货、港股，则该参数填合约代码；<br>2. 如果是组合交易, 则该参数填篮子名称，参考<a href="../innerApi/code_examples.html#%E7%BB%84%E5%90%88%E4%BA%A4%E6%98%93-1" target="_blank" rel="noopener noreferrer">组合交易<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a>；<br>3. 如果是组合套利，则填一个篮子名和一个期货合约名（如orderCode = &#39;篮子名, 期货合约名&#39;），请参考<a href="../innerApi/code_examples.html#%E7%BB%84%E5%90%88%E5%A5%97%E5%88%A9%E4%BA%A4%E6%98%93-1" target="_blank" rel="noopener noreferrer">组合套利交易<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a><br><br></td></tr><tr><td><code>prType</code></td><td><code>int</code></td><td>下单选价类型</td><td>可选值参考<a href="../innerApi/enum_constants.html#prtype-%E4%B8%8B%E5%8D%95%E9%80%89%E4%BB%B7%E7%B1%BB%E5%9E%8B" target="_blank" rel="noopener noreferrer">prType-下单选价类型<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a><br><br>特别的对于套利，这个 prType 只对篮子起作用，期货的采用默认的方式）</td></tr><tr><td><code>price</code></td><td><code>float</code></td><td>下单价格</td><td>一、单股下单时，<code>prType</code> 是模型价/科创板盘后定价时 <code>price</code> 有效；其它情况无效；<br><br>1.1 即单股时， <code>prType</code> 参数为 <code>11</code>，<code>49</code> 时被使用。 <br><br>1.2 <code>prType</code> 参数不为 <code>11</code>，<code>49</code> 时也需填写，填写的内容可为 <code>-1</code>，<code>0</code>，<code>2</code>，<code>100</code> 等任意数字；<br><br>二、组合下单时，是组合套利时，price 作套利比例有效，其它情况无效。</td></tr><tr><td><code>volume</code></td><td><code>int</code></td><td>下单数量（股 / 手 / 元 / %）</td><td>根据 orderType 值最后一位确定 volume 的单位，可选值参考<a href="../innerApi/enum_constants.html#volume-%E4%B8%8B%E5%8D%95%E6%95%B0%E9%87%8F" target="_blank" rel="noopener noreferrer">volume - 下单<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a></td></tr><tr><td><code>strategyName</code></td><td><code>string</code></td><td>自定义策略名</td><td><br><br>一、用来区分 <code>order</code> 委托和<code>deal</code> 成交来自不同的策略。<br><br>根据该策略名，<code>get_trade_detail_data</code>，<code>get_last_order_id</code> 函数可以获取相应策略名对应的委托或成交集合。 <br><br> <code>strategyName</code> 只对同账号本地客户端有效，即 <code>strategyName</code> 只对当前客户端下的单进行策略区分，且该策略区分只能当前客户端使用。<br><br></td></tr><tr><td><code>quickTrade</code></td><td><code>int</code></td><td>设定是否立即触发下单</td><td><br><br>可选值参考<a href="../innerApi/enum_constants.html#quicktrade-%E5%BF%AB%E9%80%9F%E4%B8%8B%E5%8D%95" target="_blank" rel="noopener noreferrer">quicktrade - 快速下单<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a><br><br><code>passorder</code>是对最后一根K线完全走完后生成的模型信号在下一根K线的第一个tick数据来时触发下单交易；<br><br>采用<code>quickTrade</code>参数设置为<code>1</code>时，非历史bar上执行时<code>（ContextInfo.is_last_bar()</code>为<code>True</code>），只要策略模型中调用到就触发下单交易。<br><br><code>quickTrade</code>参数设置为<code>2</code>时，不判断bar状态，只要策略模型中调用到就触发下单交易，历史bar上也能触发下单，请谨慎使用。</td></tr><tr><td><code>userOrderId</code></td><td><code>string</code></td><td>用户自设委托 ID</td><td>如果传入该参数，<br>则 <code>strategyName</code> 和 <code>quickTrade</code> 参数也填写。<br>对应 <code>order</code> 委托对象和 <code>deal</code> 成交对象中的 <code>m_strRemark</code> 属性，通过 <code>get_trade_detail_data</code> 函数或委托主推函数 <code>order_callback</code> 和成交主推函数 <code>deal_callback</code> 可拿到这两个对象信息。<br></td></tr><tr><td>ContextInfo</td><td>class</td><td>系统参数</td><td>含有k线信息和接口的上下文对象</td></tr></tbody></table><p><strong>返回：</strong></p><p>无</p><p><strong>更多示例：</strong></p><ol><li><a href="../innerApi/code_examples.html#%E8%82%A1%E7%A5%A8" target="_blank" rel="noopener noreferrer">股票<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a></li><li><a href="../innerApi/code_examples.html#%E5%9F%BA%E9%87%91" target="_blank" rel="noopener noreferrer">基金<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a></li><li><a href="../innerApi/code_examples.html#%E4%B8%A4%E8%9E%8D-1" target="_blank" rel="noopener noreferrer">两融<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a></li><li><a href="../innerApi/code_examples.html#%E6%9C%9F%E8%B4%A7" target="_blank" rel="noopener noreferrer">期货<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a></li><li><a href="../innerApi/code_examples.html#%E6%9C%9F%E6%9D%83" target="_blank" rel="noopener noreferrer">期权<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a></li><li><a href="../innerApi/code_examples.html#%E6%96%B0%E8%82%A1%E7%94%B3%E8%B4%AD" target="_blank" rel="noopener noreferrer">新股申购<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a></li><li><a href="../innerApi/code_examples.html#%E5%80%BA%E5%88%B8" target="_blank" rel="noopener noreferrer">债券<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a></li><li><a href="../innerApi/code_examples.html#etf" target="_blank" rel="noopener noreferrer">ETF<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a></li><li><a href="../innerApi/code_examples.html#%E7%BB%84%E5%90%88%E4%BA%A4%E6%98%93" target="_blank" rel="noopener noreferrer">组合交易<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a></li><li><a href="../innerApi/code_examples.html#%E7%BB%84%E5%90%88%E5%A5%97%E5%88%A9%E4%BA%A4%E6%98%93" target="_blank" rel="noopener noreferrer">组合套利交易<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a></li></ol><h3 id="algo-passorder-算法下单-拆单-函数" tabindex="-1"><a class="header-anchor" href="#algo-passorder-算法下单-拆单-函数" aria-hidden="true">#</a> algo_passorder - 算法下单（拆单）函数</h3><p>用于按固定时间间隔和固定规则把目标交易数量拆分成多次下单的交易函数</p><p><strong>调用用法：</strong></p><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-286-0" aria-selected="true">python</button></div><!--[--><div class="vp-tab active" id="tab-286-0" role="tabpanel" aria-expanded="true"><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#F8F8F2;">algo_passorder(opType,orderType,accountid,orderCode,prType,price,volume,[strategyName,quickTrade,userOrderId,userOrderParam],ContextInfo)</span><span style="color:#F8F8F2;font-style:italic;text-decoration:underline;">`</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></div><!--]--></div><div class="custom-container tip"><p class="custom-container-title">提示</p><p>算法交易下单，此时使用<strong>交易面板-程序交易-函数交易-函数交易</strong>参数中设置的下单类型(普通交易,算法交易,随机量交易) 如果函数交易参数使用未修改的默认值,此函数和<code>passorder</code>函数一致， 设置了函数交易参数后，将会使用函数交易参数的超价等拆单参数，<code>algo_passorder</code>内的<code>prType</code>若赋值,则优先使用该参数，若<code>algo_passorder</code>内的<code>prType=-1</code>,将会使用<code>userOrderParam</code>内的<code>opType</code>，若<code>userOrderParam</code>未赋值，则使用界面上的函数交易参数的报价方式</p></div><p><strong>参数：</strong><br> 其他参数同<code>passorder</code>，详细解释可参考<code>passorder</code>的说明<br><code>userOrderParam</code> <code>dict[str:value]</code> 是用户自定义交易参数,主要用于修改算法交易的参数 其中<code>Key</code> <code>Value</code>定义如下</p><p>注：所有参数均为非必选</p><table><thead><tr><th>Key</th><th>Value类型</th><th>Value</th></tr></thead><tbody><tr><td>OrderType</td><td>int</td><td>普通交易:<code>0</code><br>算法交易:<code>1</code><br>随机量交易:<code>2</code></td></tr><tr><td>PriceType</td><td>int</td><td>报价方式:数值同passorde prType</td></tr><tr><td>MaxOrderCount</td><td>int</td><td>最大下单次数</td></tr><tr><td>SinglePriceRange</td><td>int</td><td>波动区间是否单向:<br>否:<code>0</code>，<br>是:<code>1</code></td></tr><tr><td>PriceRangeType</td><td>int</td><td>波动区间类型按比例:<code>0</code>,按数值<code>1</code></td></tr><tr><td>PriceRangeValue</td><td>float</td><td>波动区间(按数值)</td></tr><tr><td>PriceRangeRate</td><td>float</td><td>波动区间(按比例)[<code>0-1</code>]</td></tr><tr><td>SuperPriceType</td><td>int</td><td>单笔超价类型:<br>按比例:<code>0</code><br>按数值<code>1</code></td></tr><tr><td>SuperPriceRate</td><td>float</td><td>单笔超价(按比例)[<code>0-1</code>]</td></tr><tr><td>SuperPriceValue</td><td>float</td><td>单笔超价(按数值)</td></tr><tr><td>VolumeType</td><td>int</td><td>单笔基准量类型卖1+2+3+4+5量:<code>0</code><br>卖1+2+3+4量:<code>1</code><br>...<br>卖1量:<code>4</code><br>买1量:<code>5</code><br>...<br>买1+2+3+4+5量:<code>9</code><br>目标量:<code>10</code><br>目标剩余量:<code>11</code><br>持仓数量:<code>12</code></td></tr><tr><td>VolumeRate</td><td>float</td><td>单笔下单比率[<code>0-1</code>]</td></tr><tr><td>SingleNumMin</td><td>float</td><td>单笔下单量最小值</td></tr><tr><td>SingleNumMax</td><td>float</td><td>单笔下单量最大值</td></tr><tr><td>ValidTimeType</td><td>int</td><td>有效时间类型:<br><code>0</code>:按持续时间<br><code>1</code> 按时间区间，默认为0</td></tr><tr><td>ValidTimeElapse</td><td>int</td><td>有效持续时间,ValidTimeType设置为0时生效</td></tr><tr><td>ValidTimeStart</td><td>int</td><td>有效开始时间偏移,ValidTimeType设置为1时生效</td></tr><tr><td>ValidTimeEnd</td><td>int</td><td>有效结束时间偏移,ValidTimeType设置为1时生效</td></tr><tr><td>UndealtEntrustRule</td><td>int</td><td>未成委托处理数值同prType</td></tr><tr><td>PlaceOrderInterval</td><td>int</td><td>下撤单时间间隔</td></tr><tr><td>UseTrigger</td><td>int</td><td>是否触价:<br>否:<code>0</code><br>是:<code>1</code></td></tr><tr><td>TriggerType</td><td>int</td><td>触价类型:<br>最新价大于:<code>1</code><br>最新价小于:<code>2</code></td></tr><tr><td>TriggerPrice</td><td>float</td><td>触价价格</td></tr><tr><td>SuperPriceEnable</td><td>int</td><td>超价启用笔数</td></tr></tbody></table><p><strong>返回</strong><br> 无<br><strong>示例</strong></p><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-586-0" aria-selected="true">python</button></div><!--[--><div class="vp-tab active" id="tab-586-0" role="tabpanel" aria-expanded="true"><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#6272A4;">#coding:gbk</span></span>
<span class="line"><span style="color:#F8F8F2;">userparam </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">OrderType</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;">: </span><span style="color:#BD93F9;">1</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">MaxOrderCount</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;">: </span><span style="color:#BD93F9;">20</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">SuperPriceType</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;">: </span><span style="color:#BD93F9;">1</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">SuperPriceValue</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;">: </span><span style="color:#BD93F9;">1.12</span><span style="color:#F8F8F2;">}</span></span>
<span class="line"><span style="color:#F8F8F2;">accid </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">918800000818</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">  </span><span style="color:#6272A4;">#资金账号</span></span>
<span class="line"><span style="color:#F8F8F2;">algo_passorder(</span><span style="color:#BD93F9;">23</span><span style="color:#F8F8F2;">,</span><span style="color:#BD93F9;">1101</span><span style="color:#F8F8F2;">,accid,</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">000001.SZ</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">,</span><span style="color:#BD93F9;">5</span><span style="color:#F8F8F2;">,</span><span style="color:#BD93F9;">15</span><span style="color:#F8F8F2;">,</span><span style="color:#BD93F9;">1000</span><span style="color:#F8F8F2;">,</span><span style="color:#E9F284;">&#39;&#39;</span><span style="color:#F8F8F2;">,</span><span style="color:#BD93F9;">1</span><span style="color:#F8F8F2;">,</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">strReMark</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">,userparam,ContextInfo)</span></span>
<span class="line"><span style="color:#6272A4;">#表示修改算法交易的最大委托次数为20,单笔下单基准类型为按价格类型超价,单笔超价1.12元,其他参数同函数交易参数中设置</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--]--></div><h3 id="smart-algo-passorder-智能算法-vwap-等-函数" tabindex="-1"><a class="header-anchor" href="#smart-algo-passorder-智能算法-vwap-等-函数" aria-hidden="true">#</a> smart_algo_passorder - 智能算法（VWAP 等）函数</h3><p>用于使用主动算法或被动算法交易的函数如VWAP TWAP等</p><p><strong>调用方法一：</strong><br></p><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-600-0" aria-selected="true">python</button></div><!--[--><div class="vp-tab active" id="tab-600-0" role="tabpanel" aria-expanded="true"><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#F8F8F2;">smart_algo_passorder(opType,orderType,accountid,orderCode,prType,price,volume,strageName,quickTrade,userOrderId,smartAlgoType,limitOverRate,minAmountPerOrder,[targetPriceLevel,startTime,endTime,limitControl],ContextInfo)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></div><!--]--></div><div class="custom-container tip"><p class="custom-container-title">提示</p><p>可选参数可缺省</p></div><p><strong>参数：</strong><br> 其他参数同<code>passorder</code>，详细解释可参考<a href="../innerApi/trading_function.html#passorder-%E7%BB%BC%E5%90%88%E4%B8%8B%E5%8D%95%E5%87%BD%E6%95%B0" target="_blank" rel="noopener noreferrer">passorder的说明<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a></p><table><thead><tr><th>参数名</th><th>类型</th><th>说明</th><th>提示</th></tr></thead><tbody><tr><td>prType</td><td>int</td><td><strong>可选值</strong>：<br>11:限价（只对单股情况支持,对组合交易不支持）<br> 12:市价 <br><strong>特别的对于套利：这个prType只对篮子起作用，期货的采用默认的方式</strong></td><td></td></tr><tr><td>smartAlgoType</td><td>str</td><td>智能算法类型 [<a href="../innerApi/enum_constants.html#enum-eordertype-%E7%AE%97%E6%B3%95%E4%BA%A4%E6%98%93%E3%80%81%E6%99%AE%E9%80%9A%E4%BA%A4%E6%98%93%E7%B1%BB%E5%9E%8B" target="_blank" rel="noopener noreferrer">enum_constants#smartAlgoType智能算法类型<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a>]</td><td></td></tr><tr><td>limitOverRate</td><td>int</td><td>量比 数据范围0-100</td><td>网格算法无此项<br>若在algoParam中填写量比，则填写范围0-1的小数。</td></tr><tr><td>minAmountPerOrder</td><td>int</td><td>智能算法最小委托金额，数据范围0-100000</td><td></td></tr><tr><td>targetPriceLevel</td><td>int</td><td>智能算法目标价格,可选值：<br>1：己方盘口 1<br> 2：己方盘口2<br>3：己方盘口3<br>4：己方盘口4<br>5：己方盘口5<br>6：最新价<br>7：对方盘口</td><td>一、输入无效值则targetPriceLevel为1<br>二、本项只针对冰山算法,其他算法可缺省。</td></tr><tr><td>startTime</td><td>str</td><td>智能算法开始时间</td><td>格式&quot;HH:MM:SS&quot;，如&quot;10:30:00&quot;。如果缺省值，则默认为&quot;09:30:00&quot;</td></tr><tr><td>endTime</td><td>str</td><td>智能算法截止时间</td><td>格式&quot;HH:MM:SS&quot;，如&quot;14:30:00&quot;。如果缺省值，则默认为&quot;15:30:00&quot;</td></tr><tr><td>limitControl</td><td>int</td><td>涨跌停控制</td><td>默认值为1<br>1：涨停不卖跌停不卖<br>0：无限制</td></tr></tbody></table><p><strong>返回</strong><br> 无</p><p><strong>示例：</strong></p><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-751-0" aria-selected="true">python</button></div><!--[--><div class="vp-tab active" id="tab-751-0" role="tabpanel" aria-expanded="true"><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#6272A4;">#coding:gbk</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6;">def</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">init</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">ContextInfo</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#FF79C6;">pass</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6;">def</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">after_init</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">ContextInfo</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#6272A4;"># # 使用smart_algo_passorder 下单</span></span>
<span class="line"><span style="color:#F8F8F2;">    smart_algo_passorder(</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#BD93F9;">23</span><span style="color:#F8F8F2;">,                </span><span style="color:#6272A4;"># 买入</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#BD93F9;">1101</span><span style="color:#F8F8F2;">,              </span><span style="color:#6272A4;"># 表示volume的单位是股</span></span>
<span class="line"><span style="color:#F8F8F2;">        account,           </span><span style="color:#6272A4;"># 资金账号</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">000001.SZ</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#BD93F9;">12</span><span style="color:#F8F8F2;">,                </span><span style="color:#6272A4;">#  11限价，12市价</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#BD93F9;">0</span><span style="color:#F8F8F2;">,                 </span><span style="color:#6272A4;"># 限价时，价格填任意数量占位</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#BD93F9;">50000</span><span style="color:#F8F8F2;">,             </span><span style="color:#6272A4;"># 5000股</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#E9F284;">&#39;&#39;</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#BD93F9;">2</span><span style="color:#F8F8F2;">,                 </span><span style="color:#6272A4;"># quickTrade</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#E9F284;">&#39;&#39;</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">VWAP</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#BD93F9;">25</span><span style="color:#F8F8F2;">,                 </span><span style="color:#6272A4;"># 量比25%</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#BD93F9;">0</span><span style="color:#F8F8F2;">,                  </span><span style="color:#6272A4;"># 智能算法最小委托金额</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#BD93F9;">1</span><span style="color:#F8F8F2;">,                  </span><span style="color:#6272A4;"># 智能算法目标价格 本项只针对冰山算法,其他算法可缺省。</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">10:25:00</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;">,         </span><span style="color:#6272A4;"># 开始时间</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">14:50:00</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;">,         </span><span style="color:#6272A4;"># 结束时间</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#BD93F9;">1</span><span style="color:#F8F8F2;">,                  </span><span style="color:#6272A4;"># 涨跌停控制 1为涨停不卖跌停不卖 0 为无限制</span></span>
<span class="line"><span style="color:#F8F8F2;">        ContextInfo</span></span>
<span class="line"><span style="color:#F8F8F2;">        )</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--]--></div><p><strong>调用方法二：</strong><br> 当时用algoParam时，函数声明为：<code>smart_algo_passorder(opType,orderType,accountid,orderCode,prType,modelprice,volume,strageName,quickTrade,userid,smartAlgoType,startTime,endTime,algoParam,ContextInfo)</code>参数均不可缺省<br><code>smartAlgoType</code>,<code>startTime</code>,<code>endTime</code> 含义同上，<code>algoParam</code>请使用下面的方法获取：</p><h4 id="获取algoparam具体字段" tabindex="-1"><a class="header-anchor" href="#获取algoparam具体字段" aria-hidden="true">#</a> 获取algoParam具体字段</h4><p><strong>释义</strong></p><p>获取智能算法参数配置信息</p><p><strong>用法</strong></p><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-771-0" aria-selected="true">python</button></div><!--[--><div class="vp-tab active" id="tab-771-0" role="tabpanel" aria-expanded="true"><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#F8F8F2;">get_smart_algo_param(algoList)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></div><!--]--></div><p><strong>参数</strong></p><table><thead><tr><th>参数</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td><code>algoList</code></td><td>list</td><td>需要查询参数配置信息的算法名称列表, 若传空则查询全部有权限的算法参数配置信息</td></tr></tbody></table><p><strong>返回</strong></p><p>返回一个字典，键为算法名称，值为参数字典列表。</p><table><thead><tr><th>字段</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td><code>key</code></td><td>string</td><td>参数名称key值,即<code>smart_algo_order</code>中<code>algoList</code>字典需要传的键值</td></tr><tr><td><code>name</code></td><td>string</td><td>参数名称</td></tr><tr><td><code>dataType</code></td><td>string</td><td>参数类型</td></tr><tr><td><code>valueRange</code></td><td>string</td><td>参数范围</td></tr><tr><td><code>defaultValue</code></td><td>string</td><td>参数默认值</td></tr><tr><td><code>enumName</code></td><td>string</td><td>参数枚举值的名称</td></tr><tr><td><code>enumValue</code></td><td>string</td><td>参数实际的枚举值</td></tr><tr><td><code>unit</code></td><td>string</td><td>参数的单位, 当单位为%时, 值要填写小数而非参数范围所示的百分数值</td></tr><tr><td><code>valueRangeByName</code></td><td>string</td><td>不同算法参数范围</td></tr><tr><td><code>defaultValueByName</code></td><td>string</td><td>不同算法参数默认值</td></tr></tbody></table><p><strong>示例</strong></p><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-943-0" aria-selected="true">python</button></div><!--[--><div class="vp-tab active" id="tab-943-0" role="tabpanel" aria-expanded="true"><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#6272A4;">#coding:gbk</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6;">def</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">init</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">ContextInfo</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#FF79C6;">pass</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#6272A4;"># 方法2 使用algoParam 和smart_algo_passorder</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#6272A4;"># 该方法部分旧版本客户端可能会不支持</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#6272A4;"># algoParam</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#6272A4;"># 先获取所有需要传入的参数</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#6272A4;">#</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#8BE9FD;">print</span><span style="color:#F8F8F2;">(get_smart_algo_param([</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">VWAP</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">]))</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#6272A4;">&#39;&#39;&#39;</span></span>
<span class="line"><span style="color:#6272A4;">    输出：[2024-01-30 11:21:10][智能算法1][SH000300][日线] </span></span>
<span class="line"><span style="color:#6272A4;">    {&#39;VWAP&#39;: [</span></span>
<span class="line"><span style="color:#6272A4;">        {&#39;key&#39;: &#39;m_dLimitOverRate&#39;, &#39;name&#39;: &#39;量比比例&#39;, &#39;dataType&#39;: &#39;浮点数&#39;, &#39;valueRange&#39;: &#39;0.00-100.00&#39;, &#39;defaultValue&#39;: &#39;20.00&#39;, &#39;enumName&#39;: &#39;&#39;, &#39;enumValue&#39;: &#39;&#39;, &#39;unit&#39;: &#39;%&#39;, &#39;valueRangByName&#39;: &#39;&#39;, &#39;defaultValueByName&#39;: &#39;&#39;}, </span></span>
<span class="line"><span style="color:#6272A4;">        {&#39;key&#39;: &#39;m_dMinAmountPerOrder&#39;, &#39;name&#39;: &#39;委托最小金额&#39;, &#39;dataType&#39;: &#39;整数&#39;, &#39;valueRange&#39;: &#39;0-100000&#39;, &#39;defaultValue&#39;: &#39;0&#39;, &#39;enumName&#39;: &#39;&#39;, &#39;enumValue&#39;: &#39;&#39;, &#39;unit&#39;: &#39;&#39;, &#39;valueRangByName&#39;: &#39;&#39;, &#39;defaultValueByName&#39;: &#39;&#39;},</span></span>
<span class="line"><span style="color:#6272A4;">        {&#39;key&#39;: &#39;m_dMaxAmountPerOrder&#39;, &#39;name&#39;: &#39;委托最大金额&#39;, &#39;dataType&#39;: &#39;浮点数&#39;, &#39;valueRange&#39;: &#39;0.00-100000000.00&#39;, &#39;defaultValue&#39;: &#39;0&#39;, &#39;enumName&#39;: &#39;&#39;, &#39;enumValue&#39;: &#39;&#39;, &#39;unit&#39;: &#39;&#39;, &#39;valueRangByName&#39;: &#39;&#39;, &#39;defaultValueByName&#39;: &#39;&#39;}, </span></span>
<span class="line"><span style="color:#6272A4;">        {&#39;key&#39;: &#39;m_nStopTradeForOwnHiLow&#39;, &#39;name&#39;: &#39;涨跌停控制&#39;, &#39;dataType&#39;: &#39;整数&#39;, &#39;valueRange&#39;: &#39;&#39;, &#39;defaultValue&#39;: &#39;涨停不卖跌停不买&#39;, &#39;enumName&#39;: &#39;无,涨停不卖跌停不买&#39;, &#39;enumValue&#39;: &#39;0,1&#39;, &#39;unit&#39;: &#39;&#39;, &#39;valueRangByName&#39;: &#39;&#39;, &#39;defaultValueByName&#39;: &#39;&#39;}, </span></span>
<span class="line"><span style="color:#6272A4;">        {&#39;key&#39;: &#39;m_dMulitAccountRate&#39;, &#39;name&#39;: &#39;多账号总量比&#39;, &#39;dataType&#39;: &#39;浮点数&#39;, &#39;valueRange&#39;: &#39;0.00-100.00&#39;, &#39;defaultValue&#39;: &#39;0&#39;, &#39;enumName&#39;: &#39;&#39;, &#39;enumValue&#39;: &#39;&#39;, &#39;unit&#39;: &#39;%&#39;, &#39;valueRangByName&#39;: &#39;&#39;, &#39;defaultValueByName&#39;: &#39;&#39;}, </span></span>
<span class="line"><span style="color:#6272A4;">        {&#39;key&#39;: &#39;m_strCmdRemark&#39;, &#39;name&#39;: &#39;投资备注&#39;, &#39;dataType&#39;: &#39;字符串&#39;, &#39;valueRange&#39;: &#39;&#39;, &#39;defaultValue&#39;: &#39;&#39;, &#39;enumName&#39;: &#39;&#39;, &#39;enumValue&#39;: &#39;&#39;, &#39;unit&#39;: &#39;&#39;, &#39;valueRangByName&#39;: &#39;&#39;, &#39;defaultValueByName&#39;: &#39;&#39;}]}</span></span>
<span class="line"><span style="color:#6272A4;">    &#39;&#39;&#39;</span></span>
<span class="line"><span style="color:#F8F8F2;">    algoParam</span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;">{</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">m_dLimitOverRate</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">: </span><span style="color:#BD93F9;">0.25</span><span style="color:#F8F8F2;">,      </span><span style="color:#6272A4;"># 量比 25%</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">m_dMinAmountPerOrder</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">:</span><span style="color:#BD93F9;">0</span><span style="color:#F8F8F2;">,      </span><span style="color:#6272A4;"># 委托最小金额</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">m_dMaxAmountPerOrder</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">:</span><span style="color:#BD93F9;">10000</span><span style="color:#F8F8F2;">,  </span><span style="color:#6272A4;"># 委托最大金额</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">m_nStopTradeForOwnHiLow</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">: </span><span style="color:#BD93F9;">1</span><span style="color:#F8F8F2;">,  </span><span style="color:#6272A4;"># 涨跌停控制</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">m_dMulitAccountRate</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">:</span><span style="color:#BD93F9;">0.30</span><span style="color:#F8F8F2;">,    </span><span style="color:#6272A4;"># 多账号总量比</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">m_strCmdRemark</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">:  </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">投资备注1</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">  </span><span style="color:#6272A4;"># 投资备注</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"><span style="color:#F8F8F2;">    smart_algo_passorder(</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#BD93F9;">23</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#BD93F9;">1101</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#F8F8F2;">        account,</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">600000.SH</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#BD93F9;">12</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#BD93F9;">0</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#BD93F9;">10000</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#E9F284;">&#39;&#39;</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#BD93F9;">2</span><span style="color:#F8F8F2;">,               </span><span style="color:#6272A4;"># quickTrade</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">投资备注</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">VWAP</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">10:25:00</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;">,      </span><span style="color:#6272A4;"># 开始时间</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">14:50:00</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;">,      </span><span style="color:#6272A4;"># 结束时间</span></span>
<span class="line"><span style="color:#F8F8F2;">        algoParam,       </span><span style="color:#6272A4;"># 算法参数</span></span>
<span class="line"><span style="color:#F8F8F2;">        ContextInfo</span></span>
<span class="line"><span style="color:#F8F8F2;">        ) </span></span>
<span class="line"><span style="color:#F8F8F2;">    </span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--]--></div><h3 id="cancel-撤销委托" tabindex="-1"><a class="header-anchor" href="#cancel-撤销委托" aria-hidden="true">#</a> cancel-撤销委托</h3><p><strong>调用方法</strong><code>cancel(orderId, accountId, accountType, ContextInfo)</code></p><p><strong>参数</strong></p><table><thead><tr><th>参数名</th><th>类型</th><th>含义</th><th>说明</th></tr></thead><tbody><tr><td>orderId</td><td>string</td><td>委托号</td><td>必填</td></tr><tr><td>accountID</td><td>string</td><td>资金账号</td><td>必填</td></tr><tr><td>AccountType</td><td>string</td><td>账号类型 可选：<br>&#39;FUTURE&#39;：期货<br>&#39;STOCK&#39;：股票<br>&#39;CREDIT&#39;：信用<br>&#39;HUGANGTONG&#39;：沪港通<br>&#39;SHENGANGTONG&#39;：深港通<br>&#39;STOCK_OPTION&#39;：期权<br></td><td>必填</td></tr><tr><td>ContextInfo</td><td>class</td><td>含有k线信息和接口的上下文对象</td><td>必填</td></tr></tbody></table><p><strong>返回</strong> bool，是否发出了取消委托信号，返回值含义：</p><blockquote><p>True：是<br> False：否</p></blockquote><p><strong>示例</strong></p><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-1044-0" aria-selected="true">python</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-1044-1" aria-selected="false">返回值</button></div><!--[--><div class="vp-tab active" id="tab-1044-0" role="tabpanel" aria-expanded="true"><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#6272A4;">#coding:gbk</span></span>
<span class="line"><span style="color:#6272A4;">&#39;&#39;&#39;</span></span>
<span class="line"><span style="color:#6272A4;">（1）下单前,根据 get_trade_detail_data 函数返回账号的信息，判定资金是否充足，账号是否在登录状态，统计持仓情况等等。</span></span>
<span class="line"><span style="color:#6272A4;">（2）满足一定的模型条件，用 passorder 下单。</span></span>
<span class="line"><span style="color:#6272A4;">（3）下单后，时刻根据 get_last_order_id 函数获取委托和成交的最新id，注意如果委托生成了，就有了委托号（这个id需要自己保存做一个全局控制）。</span></span>
<span class="line"><span style="color:#6272A4;">（4）用该委托号根据 get_value_by_order_id 函数查看委托的状态，各种情况等。</span></span>
<span class="line"><span style="color:#6272A4;">当一个委托的状态变成“已成&#39;后，那么对应的成交 deal 信息就有一条成交数据；用该委托号可查看成交情况。</span></span>
<span class="line"><span style="color:#6272A4;">*注：委托列表和成交列表中的委托号是一样的,都是这个 m_strOrderSysID 属性值。</span></span>
<span class="line"><span style="color:#6272A4;">可用 get_last_order_id 获取最新的 order 的委托号,然后根据这个委托号获取 deal 的信息，当获取成功后，也说明这笔交易是成了，可再根据 position 持仓信息再进一步验证。</span></span>
<span class="line"><span style="color:#6272A4;">（5）根据委托号获取委托信息，根据委托状态，或模型设定，用 cancel 取消委托。</span></span>
<span class="line"><span style="color:#6272A4;">&#39;&#39;&#39;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6;">def</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">init</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">ContextInfo</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">    ContextInfo.accid </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">6000000248</span><span style="color:#E9F284;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6;">def</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">handlebar</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">ContextInfo</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#FF79C6;">if</span><span style="color:#F8F8F2;"> ContextInfo.is_last_bar():</span></span>
<span class="line"><span style="color:#F8F8F2;">        orderid </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> get_last_order_id(ContextInfo.accid, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">stock</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">order</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#8BE9FD;">print</span><span style="color:#F8F8F2;">(cancel(orderid, ContextInfo.accid, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">stock</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, ContextInfo))</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div class="vp-tab" id="tab-1044-1" role="tabpanel" aria-expanded="false"><div class="language-text line-numbers-mode" data-ext="text"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#F8F8F2;">[2023-10-31 13:27:48][TESTC][SH000300][日线] True</span></span>
<span class="line"><span style="color:#F8F8F2;"></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></div><!--]--></div><h3 id="cancel-task-撤销任务" tabindex="-1"><a class="header-anchor" href="#cancel-task-撤销任务" aria-hidden="true">#</a> cancel_task - 撤销任务</h3><p><strong>调用方法</strong><code>cancel_task(taskId,accountId,accountType,ContextInfo)</code></p><p><strong>参数</strong></p><table><thead><tr><th>参数名</th><th>类型</th><th>含义</th><th>说明</th></tr></thead><tbody><tr><td>taskId</td><td>string</td><td>委托号</td><td>必填</td></tr><tr><td>accountID</td><td>string</td><td>资金账号</td><td>必填</td></tr><tr><td>AccountType</td><td>string</td><td>账号类型 可选：<br>&#39;FUTURE&#39;：期货<br>&#39;STOCK&#39;：股票<br>&#39;CREDIT&#39;：信用<br>&#39;HUGANGTONG&#39;：沪港通<br>&#39;SHENGANGTONG&#39;：深港通<br>&#39;STOCK_OPTION&#39;：期权<br></td><td>必填</td></tr><tr><td>ContextInfo</td><td>class</td><td>含有k线信息和接口的上下文对象</td><td>必填</td></tr></tbody></table><p><strong>返回</strong> bool，是否发出了撤销任务信号，返回值含义：</p><blockquote><p>True：是</p><p>False：否</p></blockquote><p><strong>示例</strong></p><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-1151-0" aria-selected="true">python</button></div><!--[--><div class="vp-tab active" id="tab-1151-0" role="tabpanel" aria-expanded="true"><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#6272A4;">#coding:gbk</span></span>
<span class="line"><span style="color:#6272A4;">&#39;&#39;&#39;</span></span>
<span class="line"><span style="color:#6272A4;">（1）根据get_trade_detail_data函数返回任务的信息,获取任务编号（m_nTaskId），任务状态等等；</span></span>
<span class="line"><span style="color:#6272A4;">（2）根据任务编号，用cancel_task取消委托。</span></span>
<span class="line"><span style="color:#6272A4;">&#39;&#39;&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6;">def</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">init</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">ContextInfo</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">    ContextInfo.accid </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">6000000248</span><span style="color:#E9F284;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6;">def</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">handlebar</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">ContextInfo</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#6272A4;"># 获取当前客户端所有的任务</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#FF79C6;">if</span><span style="color:#F8F8F2;"> ContextInfo.is_last_bar():</span></span>
<span class="line"><span style="color:#F8F8F2;">        objlist </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> get_trade_detail_data(ContextInfo.accid,</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">stock</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">,</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">task</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#FF79C6;">for</span><span style="color:#F8F8F2;"> obj </span><span style="color:#FF79C6;">in</span><span style="color:#F8F8F2;"> objlist:</span></span>
<span class="line"><span style="color:#F8F8F2;">            cancel_task(</span><span style="color:#8BE9FD;font-style:italic;">str</span><span style="color:#F8F8F2;">(obj.m_nTaskId),ContextInfo.accid,</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">stock</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">,ContextInfo)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--]--></div><h3 id="pause-task-暂停任务" tabindex="-1"><a class="header-anchor" href="#pause-task-暂停任务" aria-hidden="true">#</a> pause_task - 暂停任务</h3><p>暂停智能算法任务</p><p><strong>调用方法</strong> pause_task(taskId,accountId,accountType,ContextInfo)</p><p><strong>参数</strong></p><table><thead><tr><th>参数名</th><th>类型</th><th>含义</th><th>说明</th></tr></thead><tbody><tr><td>taskId</td><td>string</td><td>委托号</td><td>必填</td></tr><tr><td>accountID</td><td>string</td><td>资金账号</td><td>必填</td></tr><tr><td>AccountType</td><td>string</td><td>账号类型 可选：<br>&#39;FUTURE&#39;：期货<br>&#39;STOCK&#39;：股票<br>&#39;CREDIT&#39;：信用<br>&#39;HUGANGTONG&#39;：沪港通<br>&#39;SHENGANGTONG&#39;：深港通<br>&#39;STOCK_OPTION&#39;：期权<br></td><td>必填</td></tr><tr><td>ContextInfo</td><td>class</td><td>含有k线信息和接口的上下文对象</td><td>必填</td></tr></tbody></table><p><strong>返回</strong> bool，是否发出了暂停任务信号，返回值含义：</p><blockquote><p>True：是</p><p>False：否</p></blockquote><p><strong>示例</strong></p><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-1258-0" aria-selected="true">python</button></div><!--[--><div class="vp-tab active" id="tab-1258-0" role="tabpanel" aria-expanded="true"><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#6272A4;">#coding:gbk</span></span>
<span class="line"><span style="color:#6272A4;">&#39;&#39;&#39;</span></span>
<span class="line"><span style="color:#6272A4;">（1）根据get_trade_detail_data函数返回任务的信息,获取任务编号（m_nTaskId），任务状态等等；</span></span>
<span class="line"><span style="color:#6272A4;">（2）根据任务编号，用pause_task暂停智能算法任务。</span></span>
<span class="line"><span style="color:#6272A4;">&#39;&#39;&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6;">def</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">init</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">ContextInfo</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">    ContextInfo.accid </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">6000000248</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">    </span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6;">def</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">handlebar</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">ContextInfo</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#FF79C6;">if</span><span style="color:#F8F8F2;"> ContextInfo.is_last_bar():</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#6272A4;"># 获取当前客户端所有的任务</span></span>
<span class="line"><span style="color:#F8F8F2;">        objlist </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> get_trade_detail_data(ContextInfo.accid,</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">stock</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">,</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">task</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#FF79C6;">for</span><span style="color:#F8F8F2;"> obj </span><span style="color:#FF79C6;">in</span><span style="color:#F8F8F2;"> objlist:</span></span>
<span class="line"><span style="color:#F8F8F2;">            pause_task(obj.m_nTaskId,ContextInfo.accid,</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">stock</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">,ContextInfo)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--]--></div><h3 id="resume-task-继续任务" tabindex="-1"><a class="header-anchor" href="#resume-task-继续任务" aria-hidden="true">#</a> resume_task - 继续任务</h3><p>继续智能算法任务</p><p><strong>调用方法</strong><code>resume_task(taskId,accountId,accountType,ContextInfo)</code></p><p><strong>参数</strong></p><table><thead><tr><th>参数名</th><th>类型</th><th>含义</th><th>说明</th></tr></thead><tbody><tr><td>taskId</td><td>string</td><td>委托号</td><td>必填</td></tr><tr><td>accountID</td><td>string</td><td>资金账号</td><td>必填</td></tr><tr><td>AccountType</td><td>string</td><td>账号类型 可选：<br>&#39;FUTURE&#39;：期货<br>&#39;STOCK&#39;：股票<br>&#39;CREDIT&#39;：信用<br>&#39;HUGANGTONG&#39;：沪港通<br>&#39;SHENGANGTONG&#39;：深港通<br>&#39;STOCK_OPTION&#39;：期权<br></td><td>必填</td></tr><tr><td>ContextInfo</td><td>class</td><td>含有k线信息和接口的上下文对象</td><td>必填</td></tr></tbody></table><p><strong>返回</strong> bool，是否发出了重启任务信号，返回值含义：</p><blockquote><p>True：是</p><p>False：否</p></blockquote><p><strong>示例</strong></p><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-1365-0" aria-selected="true">python</button></div><!--[--><div class="vp-tab active" id="tab-1365-0" role="tabpanel" aria-expanded="true"><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#6272A4;">#coding:gbk</span></span>
<span class="line"><span style="color:#6272A4;">&#39;&#39;&#39;</span></span>
<span class="line"><span style="color:#6272A4;">（1）根据get_trade_detail_data函数返回任务的信息,获取任务编号（m_nTaskId），任务状态等等；</span></span>
<span class="line"><span style="color:#6272A4;">（2）根据任务编号，用resume_task启动已暂停智能算法任务。</span></span>
<span class="line"><span style="color:#6272A4;">&#39;&#39;&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6;">def</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">init</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">ContextInfo</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">    ContextInfo.accid </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">6000000248</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">    </span></span>
<span class="line"><span style="color:#FF79C6;">def</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">handlebar</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">ContextInfo</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#FF79C6;">if</span><span style="color:#F8F8F2;"> ContextInfo.is_last_bar():</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#6272A4;"># 获取当前客户端所有的任务</span></span>
<span class="line"><span style="color:#F8F8F2;">        objlist </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> get_trade_detail_data(ContextInfo.accid,</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">stock</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">,</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">task</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#FF79C6;">for</span><span style="color:#F8F8F2;"> obj </span><span style="color:#FF79C6;">in</span><span style="color:#F8F8F2;"> objlist:</span></span>
<span class="line"><span style="color:#F8F8F2;">            resume_task(obj.m_nTaskId,ContextInfo.accid,</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">stock</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">,ContextInfo)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--]--></div><h2 id="交易查询函数" tabindex="-1"><a class="header-anchor" href="#交易查询函数" aria-hidden="true">#</a> 交易查询函数</h2><h3 id="get-trade-detail-data-查询账号资金信息、委托记录等" tabindex="-1"><a class="header-anchor" href="#get-trade-detail-data-查询账号资金信息、委托记录等" aria-hidden="true">#</a> get_trade_detail_data-查询账号资金信息、委托记录等</h3><p><strong>调用方法</strong> <code>get_trade_detail_data(accountID, strAccountType, strDatatype, strategyName) </code><br> 或不区分策略<br><code>get_trade_detail_data(accountID, strAccountType, strDatatype)</code></p><p><strong>参数</strong></p><table><thead><tr><th>参数名</th><th>类型</th><th>说明</th><th>备注</th></tr></thead><tbody><tr><td>accountID</td><td>string</td><td>资金账号</td><td>必填</td></tr><tr><td>strAccountType</td><td>string</td><td>账号类型 可选：<br>&#39;FUTURE&#39;：期货<br>&#39;STOCK&#39;：股票<br>&#39;CREDIT&#39;：信用<br>&#39;HUGANGTONG&#39;：沪港通<br>&#39;SHENGANGTONG&#39;：深港通<br>&#39;STOCK_OPTION&#39;：期权<br></td><td>必填</td></tr><tr><td>strDatatype</td><td>string</td><td>要查询数据类型 可选：<br><code>ACCOUNT</code>：<a href="../innerApi/data_structure.html#account-%E8%B4%A6%E6%88%B7%E5%AF%B9%E8%B1%A1" target="_blank" rel="noopener noreferrer">账号对象<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a>或<a href="../innerApi/data_structure.html#ccreditaccountdetail-%E4%BF%A1%E7%94%A8%E8%B4%A6%E5%8F%B7%E5%AF%B9%E8%B1%A1-%E9%9D%9E%E6%9F%A5%E6%9F%9C%E5%8F%B0" target="_blank" rel="noopener noreferrer">信用账号对象<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a><br><code>POSITION</code>：<a href="../innerApi/data_structure.html#position-statistics-%E6%8C%81%E4%BB%93%E7%BB%9F%E8%AE%A1%E5%AF%B9%E8%B1%A1" target="_blank" rel="noopener noreferrer">持仓<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a><br><code>POSITION_STATISTICS</code>：<a href="../innerApi/data_structure.html#position-statistics-%E6%8C%81%E4%BB%93%E7%BB%9F%E8%AE%A1%E5%AF%B9%E8%B1%A1" target="_blank" rel="noopener noreferrer">持仓统计<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a><br><code>ORDER</code>：<a href="../innerApi/data_structure.html#order-%E5%A7%94%E6%89%98%E5%AF%B9%E8%B1%A1" target="_blank" rel="noopener noreferrer">委托<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a><br><code>DEAL</code> ：<a href="../innerApi/data_structure.html#deal-%E6%88%90%E4%BA%A4%E5%AF%B9%E8%B1%A1" target="_blank" rel="noopener noreferrer">成交<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a><br><code>TASK</code>：<a href="../innerApi/data_structure.html#ctaskdetail-%E4%BB%BB%E5%8A%A1%E5%AF%B9%E8%B1%A1" target="_blank" rel="noopener noreferrer">任务<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a></td><td>必填</td></tr><tr><td>strategyName</td><td>string</td><td>策略 当用<code>passorder</code>下单时指定了strategyName 参数时，当查询成交和委托时传入同样的<code>strageName</code>，则可以只返回包含<code>strategyName</code>的委托子集或成交子集</td><td><code>strategyName</code>参数只对成交和委托有效,选填</td></tr></tbody></table><p><strong>返回</strong> list，list 中放的是对应strDatatype的 Python对象，通过 dir(pythonobj) 可返回某个对象的属性列表。</p><div class="custom-container tip"><p class="custom-container-title">有五种交易相关信息，包括：</p><p>ACCOUNT：<a href="../innerApi/data_structure.html#account-%E8%B4%A6%E6%88%B7%E5%AF%B9%E8%B1%A1" target="_blank" rel="noopener noreferrer">账号对象<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a>或<a href="../innerApi/data_structure.html#ccreditaccountdetail-%E4%BF%A1%E7%94%A8%E8%B4%A6%E5%8F%B7%E5%AF%B9%E8%B1%A1-%E9%9D%9E%E6%9F%A5%E6%9F%9C%E5%8F%B0" target="_blank" rel="noopener noreferrer">信用账号对象<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a></p><p>POSITION：<a href="../innerApi/data_structure.html#position-%E6%8C%81%E4%BB%93%E5%AF%B9%E8%B1%A1" target="_blank" rel="noopener noreferrer">持仓明细<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a></p><p>POSITION_STATISTICS: <a href="../innerApi/data_structure.html#position-statistics-%E6%8C%81%E4%BB%93%E7%BB%9F%E8%AE%A1%E5%AF%B9%E8%B1%A1" target="_blank" rel="noopener noreferrer">持仓统计<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a></p><p>ORDER：<a href="../innerApi/data_structure.html#order-%E5%A7%94%E6%89%98%E5%AF%B9%E8%B1%A1" target="_blank" rel="noopener noreferrer">委托<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a></p><p>DEAL：<a href="../innerApi/data_structure.html#deal-%E6%88%90%E4%BA%A4%E5%AF%B9%E8%B1%A1" target="_blank" rel="noopener noreferrer">成交<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a></p><p>TASK：<a href="../innerApi/data_structure.html#ctaskdetail-%E4%BB%BB%E5%8A%A1%E5%AF%B9%E8%B1%A1" target="_blank" rel="noopener noreferrer">任务<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a></p></div><p><strong>示例：</strong></p><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-1484-0" aria-selected="true">python</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-1484-1" aria-selected="false">返回值</button></div><!--[--><div class="vp-tab active" id="tab-1484-0" role="tabpanel" aria-expanded="true"><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="color:#6272A4;">#coding:gbk</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">account </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">800174</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;"> </span><span style="color:#6272A4;"># 在策略交易界面运行时，account的值会被赋值为策略配置中的账号，编辑器界面运行时，需要手动赋值；编译器环境里执行的下单函数不会产生实际委托</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6;">def</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">init</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">ContextInfo</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#FF79C6;">pass</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6;">def</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">handlebar</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">ContextInfo</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#FF79C6;">if</span><span style="color:#F8F8F2;"> </span><span style="color:#FF79C6;">not</span><span style="color:#F8F8F2;"> ContextInfo.is_last_bar():</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#FF79C6;">return</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span></span>
<span class="line"><span style="color:#F8F8F2;">    orders </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> get_trade_detail_data(account, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">stock</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">order</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#8BE9FD;">print</span><span style="color:#F8F8F2;">(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">查询委托结果：</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#FF79C6;">for</span><span style="color:#F8F8F2;"> o </span><span style="color:#FF79C6;">in</span><span style="color:#F8F8F2;"> orders:</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#8BE9FD;">print</span><span style="color:#F8F8F2;">(</span><span style="color:#FF79C6;">f</span><span style="color:#F1FA8C;">&#39;股票代码: </span><span style="color:#BD93F9;">{</span><span style="color:#F8F8F2;">o.m_strInstrumentID</span><span style="color:#BD93F9;">}</span><span style="color:#F1FA8C;">, 市场类型: </span><span style="color:#BD93F9;">{</span><span style="color:#F8F8F2;">o.m_strExchangeID</span><span style="color:#BD93F9;">}</span><span style="color:#F1FA8C;">, 证券名称: </span><span style="color:#BD93F9;">{</span><span style="color:#F8F8F2;">o.m_strInstrumentName</span><span style="color:#BD93F9;">}</span><span style="color:#F1FA8C;">, 买卖方向: </span><span style="color:#BD93F9;">{</span><span style="color:#F8F8F2;">o.m_nOffsetFlag</span><span style="color:#BD93F9;">}</span><span style="color:#F1FA8C;">&#39;</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#FF79C6;">f</span><span style="color:#F1FA8C;">&#39;委托数量: </span><span style="color:#BD93F9;">{</span><span style="color:#F8F8F2;">o.m_nVolumeTotalOriginal</span><span style="color:#BD93F9;">}</span><span style="color:#F1FA8C;">, 成交均价: </span><span style="color:#BD93F9;">{</span><span style="color:#F8F8F2;">o.m_dTradedPrice</span><span style="color:#BD93F9;">}</span><span style="color:#F1FA8C;">, 成交数量: </span><span style="color:#BD93F9;">{</span><span style="color:#F8F8F2;">o.m_nVolumeTraded</span><span style="color:#BD93F9;">}</span><span style="color:#F1FA8C;">, 成交金额:</span><span style="color:#BD93F9;">{</span><span style="color:#F8F8F2;">o.m_dTradeAmount</span><span style="color:#BD93F9;">}</span><span style="color:#F1FA8C;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">    deals </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> get_trade_detail_data(account, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">stock</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">deal</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#8BE9FD;">print</span><span style="color:#F8F8F2;">(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">查询成交结果：</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#FF79C6;">for</span><span style="color:#F8F8F2;"> dt </span><span style="color:#FF79C6;">in</span><span style="color:#F8F8F2;"> deals:</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#8BE9FD;">print</span><span style="color:#F8F8F2;">(</span><span style="color:#FF79C6;">f</span><span style="color:#F1FA8C;">&#39;股票代码: </span><span style="color:#BD93F9;">{</span><span style="color:#F8F8F2;">dt.m_strInstrumentID</span><span style="color:#BD93F9;">}</span><span style="color:#F1FA8C;">, 市场类型: </span><span style="color:#BD93F9;">{</span><span style="color:#F8F8F2;">dt.m_strExchangeID</span><span style="color:#BD93F9;">}</span><span style="color:#F1FA8C;">, 证券名称: </span><span style="color:#BD93F9;">{</span><span style="color:#F8F8F2;">dt.m_strInstrumentName</span><span style="color:#BD93F9;">}</span><span style="color:#F1FA8C;">, 买卖方向: </span><span style="color:#BD93F9;">{</span><span style="color:#F8F8F2;">dt.m_nOffsetFlag</span><span style="color:#BD93F9;">}</span><span style="color:#F1FA8C;">&#39;</span><span style="color:#F8F8F2;">, </span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#FF79C6;">f</span><span style="color:#F1FA8C;">&#39;成交价格: </span><span style="color:#BD93F9;">{</span><span style="color:#F8F8F2;">dt.m_dPrice</span><span style="color:#BD93F9;">}</span><span style="color:#F1FA8C;">, 成交数量: </span><span style="color:#BD93F9;">{</span><span style="color:#F8F8F2;">dt.m_nVolume</span><span style="color:#BD93F9;">}</span><span style="color:#F1FA8C;">, 成交金额: </span><span style="color:#BD93F9;">{</span><span style="color:#F8F8F2;">dt.m_dTradeAmount</span><span style="color:#BD93F9;">}</span><span style="color:#F1FA8C;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">    positions </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> get_trade_detail_data(account, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">stock</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">position</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#8BE9FD;">print</span><span style="color:#F8F8F2;">(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">查询持仓结果：</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#FF79C6;">for</span><span style="color:#F8F8F2;"> dt </span><span style="color:#FF79C6;">in</span><span style="color:#F8F8F2;"> positions:</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#8BE9FD;">print</span><span style="color:#F8F8F2;">(</span><span style="color:#FF79C6;">f</span><span style="color:#F1FA8C;">&#39;股票代码: </span><span style="color:#BD93F9;">{</span><span style="color:#F8F8F2;">dt.m_strInstrumentID</span><span style="color:#BD93F9;">}</span><span style="color:#F1FA8C;">, 市场类型: </span><span style="color:#BD93F9;">{</span><span style="color:#F8F8F2;">dt.m_strExchangeID</span><span style="color:#BD93F9;">}</span><span style="color:#F1FA8C;">, 证券名称: </span><span style="color:#BD93F9;">{</span><span style="color:#F8F8F2;">dt.m_strInstrumentName</span><span style="color:#BD93F9;">}</span><span style="color:#F1FA8C;">, 持仓量: </span><span style="color:#BD93F9;">{</span><span style="color:#F8F8F2;">dt.m_nVolume</span><span style="color:#BD93F9;">}</span><span style="color:#F1FA8C;">, 可用数量: </span><span style="color:#BD93F9;">{</span><span style="color:#F8F8F2;">dt.m_nCanUseVolume</span><span style="color:#BD93F9;">}</span><span style="color:#F1FA8C;">&#39;</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#FF79C6;">f</span><span style="color:#F1FA8C;">&#39;成本价: </span><span style="color:#BD93F9;">{</span><span style="color:#F8F8F2;">dt.m_dOpenPrice</span><span style="color:#FF79C6;">:.2f</span><span style="color:#BD93F9;">}</span><span style="color:#F1FA8C;">, 市值: </span><span style="color:#BD93F9;">{</span><span style="color:#F8F8F2;">dt.m_dInstrumentValue</span><span style="color:#FF79C6;">:.2f</span><span style="color:#BD93F9;">}</span><span style="color:#F1FA8C;">, 持仓成本: </span><span style="color:#BD93F9;">{</span><span style="color:#F8F8F2;">dt.m_dPositionCost</span><span style="color:#FF79C6;">:.2f</span><span style="color:#BD93F9;">}</span><span style="color:#F1FA8C;">, 盈亏: </span><span style="color:#BD93F9;">{</span><span style="color:#F8F8F2;">dt.m_dPositionProfit</span><span style="color:#FF79C6;">:.2f</span><span style="color:#BD93F9;">}</span><span style="color:#F1FA8C;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">    accounts </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> get_trade_detail_data(account, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">stock</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">account</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#8BE9FD;">print</span><span style="color:#F8F8F2;">(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">查询账号结果：</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#FF79C6;">for</span><span style="color:#F8F8F2;"> dt </span><span style="color:#FF79C6;">in</span><span style="color:#F8F8F2;"> accounts:</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#8BE9FD;">print</span><span style="color:#F8F8F2;">(</span><span style="color:#FF79C6;">f</span><span style="color:#F1FA8C;">&#39;总资产: </span><span style="color:#BD93F9;">{</span><span style="color:#F8F8F2;">dt.m_dBalance</span><span style="color:#FF79C6;">:.2f</span><span style="color:#BD93F9;">}</span><span style="color:#F1FA8C;">, 净资产: </span><span style="color:#BD93F9;">{</span><span style="color:#F8F8F2;">dt.m_dAssureAsset</span><span style="color:#FF79C6;">:.2f</span><span style="color:#BD93F9;">}</span><span style="color:#F1FA8C;">, 总市值: </span><span style="color:#BD93F9;">{</span><span style="color:#F8F8F2;">dt.m_dInstrumentValue</span><span style="color:#FF79C6;">:.2f</span><span style="color:#BD93F9;">}</span><span style="color:#F1FA8C;">&#39;</span><span style="color:#F8F8F2;">, </span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#FF79C6;">f</span><span style="color:#F1FA8C;">&#39;总负债: </span><span style="color:#BD93F9;">{</span><span style="color:#F8F8F2;">dt.m_dTotalDebit</span><span style="color:#FF79C6;">:.2f</span><span style="color:#BD93F9;">}</span><span style="color:#F1FA8C;">, 可用金额: </span><span style="color:#BD93F9;">{</span><span style="color:#F8F8F2;">dt.m_dAvailable</span><span style="color:#FF79C6;">:.2f</span><span style="color:#BD93F9;">}</span><span style="color:#F1FA8C;">, 盈亏: </span><span style="color:#BD93F9;">{</span><span style="color:#F8F8F2;">dt.m_dPositionProfit</span><span style="color:#FF79C6;">:.2f</span><span style="color:#BD93F9;">}</span><span style="color:#F1FA8C;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span></span>
<span class="line"><span style="color:#F8F8F2;">    position_statistics </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> get_trade_detail_data(account,</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">FUTURE</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;">,</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">POSITION_STATISTICS</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#FF79C6;">for</span><span style="color:#F8F8F2;"> obj </span><span style="color:#FF79C6;">in</span><span style="color:#F8F8F2;"> position_statistics:</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#FF79C6;">if</span><span style="color:#F8F8F2;"> obj.m_nDirection </span><span style="color:#FF79C6;">==</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;">49</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#F8F8F2;">			</span><span style="color:#FF79C6;">continue</span></span>
<span class="line"><span style="color:#F8F8F2;">		PositionInfo_dict[obj.m_strInstrumentID</span><span style="color:#FF79C6;">+</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">.</span><span style="color:#E9F284;">&quot;</span><span style="color:#FF79C6;">+</span><span style="color:#F8F8F2;">obj.m_strExchangeID]</span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;">{</span></span>
<span class="line"><span style="color:#F8F8F2;">		</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">持仓</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;">:obj.m_nPosition,</span></span>
<span class="line"><span style="color:#F8F8F2;">		</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">成本</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;">:obj.m_dPositionCost,</span></span>
<span class="line"><span style="color:#F8F8F2;">		</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">浮动盈亏</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;">:obj.m_dFloatProfit,</span></span>
<span class="line"><span style="color:#F8F8F2;">		</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">保证金占用</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;">:obj.m_dUsedMargin</span></span>
<span class="line"><span style="color:#F8F8F2;">		}</span></span>
<span class="line"><span style="color:#F8F8F2;">	</span><span style="color:#8BE9FD;">print</span><span style="color:#F8F8F2;">(PositionInfo_dict)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">	</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div class="vp-tab" id="tab-1484-1" role="tabpanel" aria-expanded="false"><div class="language-text line-numbers-mode" data-ext="text"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#F8F8F2;">8000000213</span></span>
<span class="line"><span style="color:#F8F8F2;">【2023-10-31 13:35:41.063】  [quote]start simulation mode</span></span>
<span class="line"><span style="color:#F8F8F2;">【2023-10-31 13:35:41.125】  查询委托结果：</span></span>
<span class="line"><span style="color:#F8F8F2;">股票代码: 000001, 市场类型: SZ, 证券名称: 平安银行, 买卖方向: 48 委托数量: 5000, 成交均价: 10.43, 成交数量: 2500, 成交金额:26075.0</span></span>
<span class="line"><span style="color:#F8F8F2;">查询成交结果：</span></span>
<span class="line"><span style="color:#F8F8F2;">股票代码: 000001, 市场类型: SZ, 证券名称: 平安银行, 买卖方向: 48 成交价格: 10.43, 成交数量: 2500, 成交金额: 26075.0</span></span>
<span class="line"><span style="color:#F8F8F2;">查询持仓结果：</span></span>
<span class="line"><span style="color:#F8F8F2;">股票代码: 110055, 市场类型: SH, 证券名称: 伊力转债, 持仓量: 10, 可用数量: 10 成本价: 174.66, 市值: 1767.50, 持仓成本: 1746.57, 盈亏: 20.93</span></span>
<span class="line"><span style="color:#F8F8F2;">股票代码: 000001, 市场类型: SZ, 证券名称: 平安银行, 持仓量: 2500, 可用数量: 0 成本价: 10.43, 市值: 26150.00, 持仓成本: 26075.00, 盈亏: 75.00</span></span>
<span class="line"><span style="color:#F8F8F2;">股票代码: 123018, 市场类型: SZ, 证券名称: 溢利转债, 持仓量: 10, 可用数量: 10 成本价: 353.02, 市值: 3117.42, 持仓成本: 3530.23, 盈亏: -412.81</span></span>
<span class="line"><span style="color:#F8F8F2;">股票代码: 128136, 市场类型: SZ, 证券名称: 立讯转债, 持仓量: 60, 可用数量: 60 成本价: 109.30, 市值: 6715.56, 持仓成本: 6558.03, 盈亏: 157.53</span></span>
<span class="line"><span style="color:#F8F8F2;">查询账号结果：总资产: 999999839.30, 净资产: 999999839.30, 总市值: 37750.48 总负债: 0.00, 可用金额: 999962089.17, 盈亏: -159.35</span></span>
<span class="line"><span style="color:#F8F8F2;">{&#39;持仓&#39;: 22, &#39;成本&#39;: 1726450.0, &#39;浮动盈亏&#39;: 0.0, &#39;保证金占用&#39;: 207174.0}</span></span>
<span class="line"><span style="color:#F8F8F2;"></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--]--></div><h3 id="get-ipo-data-获取当日新股新债信息" tabindex="-1"><a class="header-anchor" href="#get-ipo-data-获取当日新股新债信息" aria-hidden="true">#</a> get_ipo_data-获取当日新股新债信息</h3><p><strong>用法：</strong> get_ipo_data([,type])</p><p><strong>释义：</strong> 获取当日新股新债信息，返回结果为一个字典,包括新股申购代码,申购名称,最大申购数量,最小申购数量等数据</p><p><strong>参数：</strong></p><ul><li>type：为空时返回新股新债信息，type=&quot;STOCK&quot;时只返回新股申购信息，type=&quot;BOND&quot;时只返回新债申购信息</li></ul><p><strong>示例：</strong></p><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#6272A4;">#coding:gbk</span></span>
<span class="line"><span style="color:#FF79C6;">def</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">init</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">ContextInfo</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">    ipoData</span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;">get_ipo_data()</span><span style="color:#6272A4;"># 返回新股新债信息</span></span>
<span class="line"><span style="color:#F8F8F2;">    ipoStock</span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;">get_ipo_data(</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">STOCK</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;">)</span><span style="color:#6272A4;"># 返回新股信息</span></span>
<span class="line"><span style="color:#F8F8F2;">    ipoCB</span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;">get_ipo_data(</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">BOND</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;">)</span><span style="color:#6272A4;"># 返回新债申购信息</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="get-new-purchase-limit-获取账户新股申购额度" tabindex="-1"><a class="header-anchor" href="#get-new-purchase-limit-获取账户新股申购额度" aria-hidden="true">#</a> get_new_purchase_limit-获取账户新股申购额度</h3><p><strong>用法：</strong> get_new_purchase_limit(accid)</p><p><strong>释义：</strong> 获取账户新股申购额度，返回结果为一个字典,包括上海主板,深圳市场,上海科创版的申购额度</p><p><strong>参数：</strong></p><ul><li>accid：资金账号，必须时股票账号或者信用账号</li></ul><p><strong>示例：</strong></p><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#FF79C6;">def</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">init</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">ContextInfo</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">    ContextInfo.accid</span><span style="color:#FF79C6;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">10000001</span><span style="color:#E9F284;">&quot;</span><span style="color:#6272A4;"># 返回新股新债信息</span></span>
<span class="line"><span style="color:#F8F8F2;">    purchase_limit</span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;">get_new_purchase_limit(ContextInfo.accid)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="get-value-by-order-id-根据委托号获取委托或成交信息" tabindex="-1"><a class="header-anchor" href="#get-value-by-order-id-根据委托号获取委托或成交信息" aria-hidden="true">#</a> get_value_by_order_id-根据委托号获取委托或成交信息</h3><p><strong>调用方法</strong><code>get_value_by_order_id(orderId, accountID, strAccountType, strDatatype)</code></p><p><strong>参数</strong></p><table><thead><tr><th>参数名</th><th>类型</th><th>含义</th><th>说明</th></tr></thead><tbody><tr><td>orderId</td><td>string</td><td>委托号</td><td>必填</td></tr><tr><td>accountID</td><td>string</td><td>资金账号</td><td>必填</td></tr><tr><td>strAccountType</td><td>string</td><td>账号类型 可选：<br>&#39;FUTURE&#39;：期货<br>&#39;STOCK&#39;：股票<br>&#39;CREDIT&#39;：信用<br>&#39;HUGANGTONG&#39;：沪港通<br>&#39;SHENGANGTONG&#39;：深港通<br>&#39;STOCK_OPTION&#39;：期权<br></td><td>必填</td></tr><tr><td>strDatatype</td><td>string</td><td>要查询数据类型 可选：<br>&#39;ORDER&#39;：委托<br>&#39;DEAL&#39; ：成交</td><td>必填</td></tr></tbody></table><p><strong>返回</strong></p><p><a href="">委托对象</a> 或 <a href="">成交对象</a></p><p><strong>示例</strong></p><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-1632-0" aria-selected="true">python</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-1632-1" aria-selected="false">返回值</button></div><!--[--><div class="vp-tab active" id="tab-1632-0" role="tabpanel" aria-expanded="true"><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#FF79C6;">def</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">init</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">ContextInfo</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">    ContextInfo.accid </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">6000000248</span><span style="color:#E9F284;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6;">def</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">handlebar</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">ContextInfo</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">    orderid </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> get_last_order_id(ContextInfo.accid, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">stock</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">order</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#8BE9FD;">print</span><span style="color:#F8F8F2;">(orderid)</span></span>
<span class="line"><span style="color:#F8F8F2;">    obj </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> get_value_by_order_id(orderid,ContextInfo.accid, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">stock</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">order</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#8BE9FD;">print</span><span style="color:#F8F8F2;">(obj.m_strInstrumentID)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div class="vp-tab" id="tab-1632-1" role="tabpanel" aria-expanded="false"><div class="language-text line-numbers-mode" data-ext="text"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#F8F8F2;"></span></span>
<span class="line"><span style="color:#F8F8F2;">【2023-10-31 13:20:51.440】  [quote]start simulation mode</span></span>
<span class="line"><span style="color:#F8F8F2;">【2023-10-31 13:20:51.464】  719000001</span></span>
<span class="line"><span style="color:#F8F8F2;">000001</span></span>
<span class="line"><span style="color:#F8F8F2;"></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="get-last-order-id-获取最新的委托或成交的委托号" tabindex="-1"><a class="header-anchor" href="#get-last-order-id-获取最新的委托或成交的委托号" aria-hidden="true">#</a> get_last_order_id-获取最新的委托或成交的委托号</h3><p>获取最新的委托或成交的委托号</p><div class="custom-container tip"><p class="custom-container-title">提示</p><p>注意，下单后需要一段不确定的时间才能查询到此次委托的委托号，而且如果委托废单，则只能查询到上次成功下单的委托号</p></div></div><!--]--></div><p><strong>调用方法</strong></p><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-1654-0" aria-selected="true">python</button></div><!--[--><div class="vp-tab active" id="tab-1654-0" role="tabpanel" aria-expanded="true"><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#6272A4;"># 区分策略，添加策略名称参数 strategyName</span></span>
<span class="line"><span style="color:#F8F8F2;">get_last_order_id(accountID, strAccountType, strDatatype, strategyName)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4;"># 不区分策略</span></span>
<span class="line"><span style="color:#F8F8F2;">get_last_order_id(accountID, strAccountType, strDatatype)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--]--></div><p><strong>参数</strong></p><table><thead><tr><th>参数名</th><th>类型</th><th>含义</th><th>说明</th></tr></thead><tbody><tr><td>accountID</td><td>string</td><td>资金账号</td><td>必填</td></tr><tr><td>strAccountType</td><td>string</td><td>账号类型 可选：<br>&#39;FUTURE&#39;：期货<br>&#39;STOCK&#39;：股票<br>&#39;CREDIT&#39;：信用<br>&#39;HUGANGTONG&#39;：沪港通<br>&#39;SHENGANGTONG&#39;：深港通<br>&#39;STOCK_OPTION&#39;：期权<br></td><td>必填</td></tr><tr><td>strDatatype</td><td>string</td><td>要查询数据类型 可选：<br>&#39;ORDER&#39;：委托<br>&#39;DEAL&#39; ：成交</td><td>必填</td></tr><tr><td>strategyName</td><td>string</td><td>策略 当用passorder下单时指定了strategyName 参数时，当查询成交和委托时传入同样的strageName，则可以只返回包含strategyName的委托子集或成交子集</td><td>选填</td></tr></tbody></table><p><strong>返回</strong></p><p>String，委托号，如果没找到返回 &#39;-1&#39;。</p><p><strong>示例</strong></p><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#FF79C6;">def</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">init</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">ContextInfo</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">    ContextInfo.accid </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">6000000248</span><span style="color:#E9F284;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6;">def</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">handlebar</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">ContextInfo</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">    orderid </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> get_last_order_id(ContextInfo.accid, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">stock</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">order</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#8BE9FD;">print</span><span style="color:#F8F8F2;">(orderid)</span></span>
<span class="line"><span style="color:#F8F8F2;">    obj </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> get_value_by_order_id(orderid,ContextInfo.accid, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">stock</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">order</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#8BE9FD;">print</span><span style="color:#F8F8F2;">(obj.m_strInstrumentID)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="get-assure-contract-获取两融担保标的明细" tabindex="-1"><a class="header-anchor" href="#get-assure-contract-获取两融担保标的明细" aria-hidden="true">#</a> get_assure_contract-获取两融担保标的明细</h3><p><strong>用法：</strong> get_assure_contract(accId)</p><p><strong>释义：</strong> 获取信用账户担保合约明细</p><p><strong>参数：</strong></p><ul><li>accId：信用账户</li></ul><p><strong>返回：</strong> list，list 中放的是 <a href="../innerApi/data_structure.html#stkcompacts-%E8%B4%9F%E5%80%BA%E5%90%88%E7%BA%A6%E5%AF%B9%E8%B1%A1" target="_blank" rel="noopener noreferrer">StkSubjects<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a>，通过 dir(pythonobj) 可返回某个对象的属性列表。</p><p><strong>示例：</strong></p><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-1773-0" aria-selected="true">python</button></div><!--[--><div class="vp-tab active" id="tab-1773-0" role="tabpanel" aria-expanded="true"><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="color:#FF79C6;">def</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">show_data</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">data</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">    tdata </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> {}</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#FF79C6;">for</span><span style="color:#F8F8F2;"> ar </span><span style="color:#FF79C6;">in</span><span style="color:#F8F8F2;"> </span><span style="color:#8BE9FD;">dir</span><span style="color:#F8F8F2;">(data):</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#FF79C6;">if</span><span style="color:#F8F8F2;"> ar[</span><span style="color:#FF79C6;">:</span><span style="color:#BD93F9;">2</span><span style="color:#F8F8F2;">] </span><span style="color:#FF79C6;">!=</span><span style="color:#F8F8F2;"> </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">m_</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">:</span><span style="color:#FF79C6;">continue</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#FF79C6;">try</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#F8F8F2;">            tdata[ar] </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> data.</span><span style="color:#BD93F9;">__getattribute__</span><span style="color:#F8F8F2;">(ar)</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#FF79C6;">except</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#F8F8F2;">            tdata[ar] </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">&lt;CanNotConvert&gt;</span><span style="color:#E9F284;">&#39;</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#FF79C6;">return</span><span style="color:#F8F8F2;"> tdata</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6;">def</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">handlebar</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">ContextInfo</span><span style="color:#F8F8F2;">): </span></span>
<span class="line"><span style="color:#F8F8F2;">    obj </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> get_assure_contract(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">6000000248</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#FF79C6;">for</span><span style="color:#F8F8F2;"> i </span><span style="color:#FF79C6;">in</span><span style="color:#F8F8F2;"> obj[</span><span style="color:#FF79C6;">:</span><span style="color:#BD93F9;">3</span><span style="color:#F8F8F2;">]:</span></span>
<span class="line"><span style="color:#F8F8F2;">		</span><span style="color:#8BE9FD;">print</span><span style="color:#F8F8F2;">(show_data(i))</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4;">&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#6272A4;">{&#39;m_dAssureRatio&#39;: 0.0, # 担保品折算比例</span></span>
<span class="line"><span style="color:#6272A4;">&#39;m_dFinRatio&#39;: 0.8, # 融资保证金比例</span></span>
<span class="line"><span style="color:#6272A4;">&#39;m_dSloRatio&#39;: 1.0,  # 融券保证金比例</span></span>
<span class="line"><span style="color:#6272A4;">&#39;m_eAssureStatus&#39;: 50,  # 是否可做担保</span></span>
<span class="line"><span style="color:#6272A4;">&#39;m_eCreditFundCtl&#39;: 50, # 融资交易控制</span></span>
<span class="line"><span style="color:#6272A4;">&#39;m_eCreditStkCtl&#39;: 50, # 融券交易控制</span></span>
<span class="line"><span style="color:#6272A4;">&#39;m_eFinStatus&#39;: 48, # 融资状态</span></span>
<span class="line"><span style="color:#6272A4;">&#39;m_eSloStatus&#39;: 48, # 融券状态</span></span>
<span class="line"><span style="color:#6272A4;">&#39;m_nPlatformID&#39;: 10064,  # 平台号</span></span>
<span class="line"><span style="color:#6272A4;">&#39;m_strAccountID&#39;: &#39;95000857&#39;,  # 资金账号</span></span>
<span class="line"><span style="color:#6272A4;">&#39;m_strBrokerID&#39;: &#39;003&#39;, # 经纪公司编号</span></span>
<span class="line"><span style="color:#6272A4;">&#39;m_strBrokerName&#39;: &#39;光大证券信用&#39;,  # 证券公司</span></span>
<span class="line"><span style="color:#6272A4;">&#39;m_strExchangeID&#39;: &#39;SH&#39;, # 交易所</span></span>
<span class="line"><span style="color:#6272A4;">&#39;m_strInstrumentID&#39;:&#39;510150&#39; # 证券代码</span></span>
<span class="line"><span style="color:#6272A4;">&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--]--></div><h3 id="get-enable-short-contract-获取可融券明细" tabindex="-1"><a class="header-anchor" href="#get-enable-short-contract-获取可融券明细" aria-hidden="true">#</a> get_enable_short_contract-获取可融券明细</h3><div class="custom-container tip"><p class="custom-container-title">提示</p><p>注:由于字段m_dSloRatio、m_dSloStatus提供来源和取担保品明细(<a href="../innerApi/innerApi/trading_function.html#get-assure-contract-%E8%8E%B7%E5%8F%96%E4%B8%A4%E8%9E%8D%E6%8B%85%E4%BF%9D%E6%A0%87%E7%9A%84%E6%98%8E%E7%BB%86" class="">get_assure_contract</a>)重复，字段在2021年9月移除，后续用担保品明细接口获取,具体见 <a href="../innerApi/data_structure.html#stkcompacts-%E8%B4%9F%E5%80%BA%E5%90%88%E7%BA%A6%E5%AF%B9%E8%B1%A1" target="_blank" rel="noopener noreferrer">担保标的对象字段说明<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a></p></div><p><strong>用法：</strong> get_enable_short_contract(accId)</p><p><strong>释义：</strong> 获取信用账户当前可融券的明细</p><p><strong>参数：</strong></p><ul><li>accId：信用账户</li></ul><p><strong>返回：</strong> list，list 中放的是 <a href="../innerApi/data_structure.html#creditsloenableamount-%E5%8F%AF%E8%9E%8D%E5%88%B8%E6%98%8E%E7%BB%86%E5%AF%B9%E8%B1%A1" target="_blank" rel="noopener noreferrer">CreditSloEnableAmount<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a>，通过 dir(pythonobj) 可返回某个对象的属性列表。</p><p><strong>示例：</strong></p><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-1808-0" aria-selected="true">python</button></div><!--[--><div class="vp-tab active" id="tab-1808-0" role="tabpanel" aria-expanded="true"><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="color:#FF79C6;">def</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">show_data</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">data</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">    tdata </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> {}</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#FF79C6;">for</span><span style="color:#F8F8F2;"> ar </span><span style="color:#FF79C6;">in</span><span style="color:#F8F8F2;"> </span><span style="color:#8BE9FD;">dir</span><span style="color:#F8F8F2;">(data):</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#FF79C6;">if</span><span style="color:#F8F8F2;"> ar[</span><span style="color:#FF79C6;">:</span><span style="color:#BD93F9;">2</span><span style="color:#F8F8F2;">] </span><span style="color:#FF79C6;">!=</span><span style="color:#F8F8F2;"> </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">m_</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">:</span><span style="color:#FF79C6;">continue</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#FF79C6;">try</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#F8F8F2;">            tdata[ar] </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> data.</span><span style="color:#BD93F9;">__getattribute__</span><span style="color:#F8F8F2;">(ar)</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#FF79C6;">except</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#F8F8F2;">            tdata[ar] </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">&lt;CanNotConvert&gt;</span><span style="color:#E9F284;">&#39;</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#FF79C6;">return</span><span style="color:#F8F8F2;"> tdata</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6;">def</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">handlebar</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">ContextInfo</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">    obj </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> get_enable_short_contract(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">6000000248</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#FF79C6;">for</span><span style="color:#F8F8F2;"> i </span><span style="color:#FF79C6;">in</span><span style="color:#F8F8F2;"> obj[</span><span style="color:#FF79C6;">:</span><span style="color:#BD93F9;">3</span><span style="color:#F8F8F2;">]:</span></span>
<span class="line"><span style="color:#F8F8F2;">		</span><span style="color:#8BE9FD;">print</span><span style="color:#F8F8F2;">(show_data(i))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4;">&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#6272A4;">Rerutn:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4;">{&#39;m_eQuerySloType&#39;: 48, # 查询类型</span></span>
<span class="line"><span style="color:#6272A4;">&#39;m_nEnableAmount&#39;: 0,  # 融券可融数量</span></span>
<span class="line"><span style="color:#6272A4;">&#39;m_nPlatformID&#39;: 10064,  # 平台号</span></span>
<span class="line"><span style="color:#6272A4;">&#39;m_strAccountID&#39;: &#39;95000857&#39;,  # 资金账号</span></span>
<span class="line"><span style="color:#6272A4;">&#39;m_strBrokerID&#39;: &#39;003&#39;,  # 经纪公司编号</span></span>
<span class="line"><span style="color:#6272A4;">&#39;m_strBrokerName&#39;: &#39;光大证券信用&#39;,  # 证券公司</span></span>
<span class="line"><span style="color:#6272A4;">&#39;m_strExchangeID&#39;: &#39;SH&#39;, # 标的市场</span></span>
<span class="line"><span style="color:#6272A4;">&#39;m_strInstrumentID&#39;: &#39;688321&#39; # 证券代码</span></span>
<span class="line"><span style="color:#6272A4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4;">&quot;&quot;&quot;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--]--></div><h3 id="query-credit-account-查询信用账户明细" tabindex="-1"><a class="header-anchor" href="#query-credit-account-查询信用账户明细" aria-hidden="true">#</a> query_credit_account - 查询信用账户明细</h3><div class="custom-container warning"><p class="custom-container-title">注意</p><ol><li>本函数一次最多查询200只股票的两融最大下单量，且同时只能有一个查询,如果前面的查询正在进行中,后面的查询将会提前返回。本函数从服务器查询数据,建议平均查询时间间隔180s一次,不可频繁调用。</li><li>该函数必须配合credit_account_callback回调才能使用，关于此回调的说明请看<a href="../innerApi/callback_function.html?id=7zqjlm#credit-account-callback-%E6%9F%A5%E8%AF%A2%E4%BF%A1%E7%94%A8%E8%B4%A6%E6%88%B7%E6%98%8E%E7%BB%86%E5%9B%9E%E8%B0%83" target="_blank" rel="noopener noreferrer">credit_account_callback<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a></li><li>callback返回的对象是<a href="../innerApi/data_structure.html?id=7zqjlm#ccreditaccountdetail-%E4%BF%A1%E7%94%A8%E8%B4%A6%E5%8F%B7%E5%AF%B9%E8%B1%A1-%E9%9D%9E%E6%9F%A5%E6%9F%9C%E5%8F%B0" target="_blank" rel="noopener noreferrer">CCreditAccountDetail<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a></li></ol></div><p>调用query_credit_account，该接口的查询结果将会推送给credit_account_callback，所以程序里需要按照函数参数实现函数<code>credit_account_callback</code>,callback返回的对象是<a href="../innerApi/data_structure.html?id=7zqjlm#ccreditaccountdetail-%E4%BF%A1%E7%94%A8%E8%B4%A6%E5%8F%B7%E5%AF%B9%E8%B1%A1-%E9%9D%9E%E6%9F%A5%E6%9F%9C%E5%8F%B0" target="_blank" rel="noopener noreferrer">CCreditAccountDetail<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a></p><p><strong>用法：</strong> query_credit_account(accountId,seq,ContextInfo)<br><strong>释义：</strong> 查询信用账户明细。本函数只能有一个查询，如果前面的查询正在进行中，后面的查询将会提前返回。</p><p><strong>参数：</strong></p><ul><li><p>accountId：string，查询的两融账号</p></li><li><p>seq：int，查询序列号，建议输入唯一值以便对应结果回调</p></li></ul><p><strong>示例：</strong></p><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-1859-0" aria-selected="true">python</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-1859-1" aria-selected="false">返回值</button></div><!--[--><div class="vp-tab active" id="tab-1859-0" role="tabpanel" aria-expanded="true"><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#6272A4;">#coding:gbk</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6;">import</span><span style="color:#F8F8F2;"> time</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6;">def</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">init</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">ContextInfo</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">	ContextInfo.accid</span><span style="color:#FF79C6;">=</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">200133</span><span style="color:#E9F284;">&#39;</span></span>
<span class="line"><span style="color:#F8F8F2;">	</span></span>
<span class="line"><span style="color:#FF79C6;">def</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">handlebar</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">ContextInfo</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">	</span><span style="color:#FF79C6;">if</span><span style="color:#F8F8F2;"> ContextInfo.is_last_bar():</span></span>
<span class="line"><span style="color:#F8F8F2;">		query_credit_account(ContextInfo.accid,</span><span style="color:#8BE9FD;font-style:italic;">int</span><span style="color:#F8F8F2;">(time.time()),ContextInfo)</span></span>
<span class="line"><span style="color:#6272A4;"># 该函数必须配合credit_account_callback回调才能使用</span></span>
<span class="line"><span style="color:#FF79C6;">def</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">credit_account_callback</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">ContextInfo</span><span style="color:#F8F8F2;">,</span><span style="color:#FFB86C;font-style:italic;">seq</span><span style="color:#F8F8F2;">,</span><span style="color:#FFB86C;font-style:italic;">result</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">	</span><span style="color:#8BE9FD;">print</span><span style="color:#F8F8F2;">(seq)</span></span>
<span class="line"><span style="color:#F8F8F2;">	</span><span style="color:#8BE9FD;">print</span><span style="color:#F8F8F2;">(</span><span style="color:#FF79C6;">f</span><span style="color:#F1FA8C;">&quot;:维持担保比例:</span><span style="color:#BD93F9;">{</span><span style="color:#F8F8F2;">result.m_dPerAssurescaleValue</span><span style="color:#FF79C6;">:.2f</span><span style="color:#BD93F9;">}</span><span style="color:#F1FA8C;">,总负债:</span><span style="color:#BD93F9;">{</span><span style="color:#F8F8F2;">result.m_dTotalDebt</span><span style="color:#FF79C6;">:.2f</span><span style="color:#BD93F9;">}</span><span style="color:#F1FA8C;">&quot;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div class="vp-tab" id="tab-1859-1" role="tabpanel" aria-expanded="false"><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#F8F8F2;">{</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">m_dAssureAsset</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">: </span><span style="color:#BD93F9;">0.0</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">m_dAssureEnbuyBalance</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">: </span><span style="color:#BD93F9;">0.0</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">m_dAvailable</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">: </span><span style="color:#BD93F9;">0.0</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">m_dBalance</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">: </span><span style="color:#BD93F9;">0.0</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">m_dEnableBailBalance</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">: </span><span style="color:#BD93F9;">0.0</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">m_dFinDealAvl</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">: </span><span style="color:#BD93F9;">0.0</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">m_dFinDebt</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">: </span><span style="color:#BD93F9;">0.0</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">m_dFinEnableQuota</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">: </span><span style="color:#BD93F9;">0.0</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">m_dFinFee</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">: </span><span style="color:#BD93F9;">0.0</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">m_dFinMaxQuota</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">: </span><span style="color:#BD93F9;">0.0</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">m_dFinUsedQuota</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">: </span><span style="color:#BD93F9;">0.0</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">m_dFundValue</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">: </span><span style="color:#BD93F9;">1.7976931348623157e+308</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">m_dMarketValue</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">: </span><span style="color:#BD93F9;">0.0</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">m_dOtherFare</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">: </span><span style="color:#BD93F9;">0.0</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">m_dPerAssurescaleValue</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">: </span><span style="color:#BD93F9;">9999.0</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">m_dSloDebt</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">: </span><span style="color:#BD93F9;">0.0</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">m_dSloEnableQuota</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">: </span><span style="color:#BD93F9;">0.0</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">m_dSloFee</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">: </span><span style="color:#BD93F9;">0.0</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">m_dSloMarketValue</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">: </span><span style="color:#BD93F9;">0.0</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">m_dSloMaxQuota</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">: </span><span style="color:#BD93F9;">0.0</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">m_dSloSellBalance</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">: </span><span style="color:#BD93F9;">0.0</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">m_dSloUsedQuota</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">: </span><span style="color:#BD93F9;">0.0</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">m_dStockValue</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">: </span><span style="color:#BD93F9;">1.7976931348623157e+308</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">m_dSurplusSloSellBalance</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">: </span><span style="color:#BD93F9;">0.0</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">m_dTotalDebt</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">: </span><span style="color:#BD93F9;">0.0</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">m_dUsedSloSellBalance</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">: </span><span style="color:#BD93F9;">0.0</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">m_strAccountID</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">: </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">800000857</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div><!--]--></div><p><strong>回调示例</strong> 见<a href="../innerApi/code_examples.html?id=7zqjlm#%E8%8E%B7%E5%8F%96%E4%B8%A4%E8%9E%8D%E8%B4%A6%E5%8F%B7%E4%BF%A1%E6%81%AF%E7%A4%BA%E4%BE%8B" target="_blank" rel="noopener noreferrer">query_credit_account<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a></p><h3 id="query-credit-opvolume-查询两融最大可下单量" tabindex="-1"><a class="header-anchor" href="#query-credit-opvolume-查询两融最大可下单量" aria-hidden="true">#</a> query_credit_opvolume - 查询两融最大可下单量</h3><div class="custom-container warning"><p class="custom-container-title">注意</p><ol><li>本函数一次最多查询200只股票的两融最大下单量，且同时只能有一个查询,如果前面的查询正在进行中,后面的查询将会提前返回。本函数从服务器查询数据,建议平均查询时间间隔180s一次,不可频繁调用。</li><li>该函数必须配合credit_opvolume_callback回调才能使用,关于此回调的说明请看<a href="../innerApi/callback_function.html?id=7zqjlm#credit-opvolume-callback-%E6%9F%A5%E8%AF%A2%E4%B8%A4%E8%9E%8D%E6%9C%80%E5%A4%A7%E5%8F%AF%E4%B8%8B%E5%8D%95%E9%87%8F%E7%9A%84%E5%9B%9E%E8%B0%83" target="_blank" rel="noopener noreferrer">credit_account_callback<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a></li></ol></div><p>调用query_credit_opvolume，该接口的查询结果将会推送给credit_opvolume_callback，所以程序里需要按照函数参数实现函数<code>credit_opvolume_callback</code></p><p><strong>用法：</strong> <code>query_credit_opvolume(accountId,stockCode,opType,prType,seq,price,ContextInfo)</code></p><p><strong>释义：</strong> 查询两融最大可下单量。</p><p><strong>参数：</strong></p><ul><li><code>accountId</code>:查询的两融账号</li><li><code>stockCode</code>:需要查询的股票代码,stockCode为List的类型,可以查询多只股票</li><li><code>opType</code>:两融下单类型,同<code>passorder</code>的下单类型</li><li><code>prType</code>:报单价格类型,同<code>passorder</code>的报价类型</li><li><code>seq</code>:查询序列号,int型，建议输入唯一值以便对应结果回调</li><li><code>price</code>:报价(非限价单可以填任意值),如果<code>stockCode</code>为<code>List</code>类型,报价也需要为长度相同的List</li></ul><p><strong>示例：</strong></p><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-1934-0" aria-selected="true">python</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-1934-1" aria-selected="false">返回值</button></div><!--[--><div class="vp-tab active" id="tab-1934-0" role="tabpanel" aria-expanded="true"><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#6272A4;">#coding:gbk</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6;">import</span><span style="color:#F8F8F2;"> time</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6;">def</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">init</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">ContextInfo</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">	ContextInfo.accid</span><span style="color:#FF79C6;">=</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">200133</span><span style="color:#E9F284;">&#39;</span></span>
<span class="line"><span style="color:#F8F8F2;">	</span></span>
<span class="line"><span style="color:#FF79C6;">def</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">handlebar</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">ContextInfo</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">	</span><span style="color:#FF79C6;">if</span><span style="color:#F8F8F2;"> ContextInfo.is_last_bar():</span></span>
<span class="line"><span style="color:#F8F8F2;">		query_credit_opvolume(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">95000857</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">,</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">000001.SZ</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">,</span><span style="color:#BD93F9;">27</span><span style="color:#F8F8F2;">,</span><span style="color:#BD93F9;">11</span><span style="color:#F8F8F2;">,</span><span style="color:#8BE9FD;font-style:italic;">int</span><span style="color:#F8F8F2;">(time.time()),</span><span style="color:#BD93F9;">10</span><span style="color:#F8F8F2;">,C) </span><span style="color:#6272A4;"># 查询两融最大可下单量。</span></span>
<span class="line"><span style="color:#F8F8F2;">		time.sleep(</span><span style="color:#BD93F9;">0.5</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">		query_credit_opvolume(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">95000857</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">,</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">000001.SZ</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">,</span><span style="color:#BD93F9;">27</span><span style="color:#F8F8F2;">,</span><span style="color:#BD93F9;">11</span><span style="color:#F8F8F2;">,</span><span style="color:#8BE9FD;font-style:italic;">int</span><span style="color:#F8F8F2;">(time.time()),</span><span style="color:#BD93F9;">10</span><span style="color:#F8F8F2;">,C) </span><span style="color:#6272A4;"># 查询两融最大可下单量。</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4;"># 该函数必须配合credit_opvolume_callback回调才能使用</span></span>
<span class="line"><span style="color:#FF79C6;">def</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">credit_opvolume_callback</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">ContextInfo</span><span style="color:#F8F8F2;">,</span><span style="color:#FFB86C;font-style:italic;">accid</span><span style="color:#F8F8F2;">,</span><span style="color:#FFB86C;font-style:italic;">seq</span><span style="color:#F8F8F2;">,</span><span style="color:#FFB86C;font-style:italic;">ret</span><span style="color:#F8F8F2;">,</span><span style="color:#FFB86C;font-style:italic;">result</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">	</span><span style="color:#8BE9FD;">print</span><span style="color:#F8F8F2;">(seq)</span></span>
<span class="line"><span style="color:#F8F8F2;">	</span><span style="color:#8BE9FD;">print</span><span style="color:#F8F8F2;">(</span><span style="color:#FF79C6;">f</span><span style="color:#F1FA8C;">&#39;查询结果:</span><span style="color:#BD93F9;">{</span><span style="color:#F8F8F2;">ret</span><span style="color:#BD93F9;">}</span><span style="color:#F1FA8C;">&#39;</span><span style="color:#F8F8F2;">) </span><span style="color:#6272A4;"># 正常返回:1,正在查询中-1,输入账号非法:-2,输入查询参数非法:-3,超时等服务器返回报错:-4</span></span>
<span class="line"><span style="color:#F8F8F2;">	</span><span style="color:#8BE9FD;">print</span><span style="color:#F8F8F2;">(result)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div class="vp-tab" id="tab-1934-1" role="tabpanel" aria-expanded="false"><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#BD93F9;">10</span></span>
<span class="line"><span style="color:#F8F8F2;">查询结果:</span><span style="color:#BD93F9;">1</span></span>
<span class="line"><span style="color:#F8F8F2;">{</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">000001.SZ</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">: </span><span style="color:#BD93F9;">0</span><span style="color:#F8F8F2;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--]--></div><h3 id="get-option-subject-position-取期权标的持仓" tabindex="-1"><a class="header-anchor" href="#get-option-subject-position-取期权标的持仓" aria-hidden="true">#</a> get_option_subject_position-取期权标的持仓</h3><p><strong>用法：</strong> get_option_subject_position(accountID)</p><p><strong>释义：</strong> 取期权标的持仓</p><p><strong>参数：</strong></p><ul><li>accountID：string,账号</li></ul><p><strong>返回：</strong> list,list中放的是<a href="../innerApi/data_structure.html?id=7zqjlm#clockposition-%E6%9C%9F%E6%9D%83%E6%A0%87%E7%9A%84%E6%8C%81%E4%BB%93" target="_blank" rel="noopener noreferrer">CLockPosition<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a>,通过dir(pythonobj)可返回某个对象的属性列表</p><p><strong>示例：</strong></p><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#F8F8F2;">data</span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;">get_option_subject_position(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">880399990383</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#8BE9FD;">print</span><span style="color:#F8F8F2;">(</span><span style="color:#8BE9FD;">len</span><span style="color:#F8F8F2;">(data))</span><span style="color:#F8F8F2;font-style:italic;text-decoration:underline;">;</span></span>
<span class="line"><span style="color:#F8F8F2;">forobjindata:</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#8BE9FD;">print</span><span style="color:#F8F8F2;">(obj.m_strInstrumentName,obj.m_lockVol,obj.m_coveredVol)</span><span style="color:#F8F8F2;font-style:italic;text-decoration:underline;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="get-comb-option-取期权组合持仓" tabindex="-1"><a class="header-anchor" href="#get-comb-option-取期权组合持仓" aria-hidden="true">#</a> get_comb_option-取期权组合持仓</h3><p><strong>用法：</strong> get_comb_option(accountID)</p><p><strong>释义：</strong> 取期权组合持仓</p><p><strong>参数：</strong></p><ul><li>accountID：string,账号</li></ul><p><strong>返回：</strong> list,list中放的是<a href="../innerApi/data_structure.html?id=7zqjlm#cstkoptcombpositiondetail-%E6%9C%9F%E6%9D%83%E7%BB%84%E5%90%88%E6%8C%81%E4%BB%93" target="_blank" rel="noopener noreferrer">CStkOptCombPositionDetail <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a>,通过dir(pythonobj)可返回某个对象的属性列表</p><p><strong>示例：</strong></p><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#F8F8F2;">obj_list</span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;">get_comb_option(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">880399990383</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#8BE9FD;">print</span><span style="color:#F8F8F2;">(</span><span style="color:#8BE9FD;">len</span><span style="color:#F8F8F2;">(obj_list))</span><span style="color:#F8F8F2;font-style:italic;text-decoration:underline;">;</span></span>
<span class="line"><span style="color:#F8F8F2;">forobjinobj_list:</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#8BE9FD;">print</span><span style="color:#F8F8F2;">(obj.m_strCombCodeName,obj.m_strCombID,obj.m_nVolume,obj.m_nFrozenVolume)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="get-unclosed-compacts-获取未了结负债合约明细" tabindex="-1"><a class="header-anchor" href="#get-unclosed-compacts-获取未了结负债合约明细" aria-hidden="true">#</a> get_unclosed_compacts-获取未了结负债合约明细</h3><p><strong>用法：</strong> get_unclosed_compacts(accountID,accountType)</p><p><strong>释义：</strong> 获取未了结负债合约明细</p><p><strong>参数：</strong></p><ul><li>accountID：str，资金账号</li><li>accountType：str，账号类型，这里应该填&#39;CREDIT&#39;</li></ul><p><strong>返回：</strong></p><p>list([ CStkUnclosedCompacts, ... ]) 负债列表，CStkUnclosedCompacts属性如下：</p><table><thead><tr><th>字段名称</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td><code>m_strAccountID</code></td><td>string</td><td>账号ID</td></tr><tr><td><code>m_nBrokerType</code></td><td>int</td><td>账号类型<br>1-期货账号<br>2-股票账号<br>3-信用账号<br>5-期货期权账号<br>6-股票期权账号<br>7-沪港通账号<br>11-深港通账号</td></tr><tr><td><code>m_strExchangeID</code></td><td>string</td><td>市场</td></tr><tr><td><code>m_strInstrumentID</code></td><td>string</td><td>证券代码</td></tr><tr><td><code>m_eCompactType</code></td><td>int</td><td>合约类型<br>32-不限制<br>48-融资<br>49-融券</td></tr><tr><td><code>m_eCashgroupProp</code></td><td>int</td><td>头寸来源<br>32-不限制<br>48-普通头寸<br>49-专项头寸</td></tr><tr><td><code>m_nOpenDate</code></td><td>int</td><td>开仓日期(如&#39;20201231&#39;)</td></tr><tr><td><code>m_nBusinessVol</code></td><td>int</td><td>合约证券数量</td></tr><tr><td><code>m_nRealCompactVol</code></td><td>int</td><td>未还合约数量</td></tr><tr><td><code>m_nRetEndDate</code></td><td>int</td><td>到期日(如&#39;20201231&#39;)</td></tr><tr><td><code>m_dBusinessBalance</code></td><td>float</td><td>合约金额</td></tr><tr><td><code>m_dBusinessFare</code></td><td>float</td><td>合约息费</td></tr><tr><td><code>m_dRealCompactBalance</code></td><td>float</td><td>未还合约金额</td></tr><tr><td><code>m_dRealCompactFare</code></td><td>float</td><td>未还合约息费</td></tr><tr><td><code>m_dRepaidFare</code></td><td>float</td><td>已还息费</td></tr><tr><td><code>m_dRepaidBalance</code></td><td>float</td><td>已还金额</td></tr><tr><td><code>m_strCompactId</code></td><td>string</td><td>合约编号</td></tr><tr><td><code>m_strEntrustNo</code></td><td>string</td><td>委托编号</td></tr><tr><td><code>m_nRepayPriority</code></td><td>int</td><td>偿还优先级</td></tr><tr><td><code>m_strPositionStr</code></td><td>string</td><td>定位串</td></tr><tr><td><code>m_eCompactRenewalStatus</code></td><td>int</td><td>合约展期状态<br>48-可申请<br>49-已申请<br>50-审批通过<br>51-审批不通过<br>52-不可申请<br>53-已执行<br>54-已取消</td></tr><tr><td><code>m_nDeferTimes</code></td><td>int</td><td>展期次数</td></tr></tbody></table><p><strong>示例：</strong></p><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#F8F8F2;">get_unclosed_compacts(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">6000000248</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">CREDIT</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="get-closed-compacts-获取已了结负债合约明细" tabindex="-1"><a class="header-anchor" href="#get-closed-compacts-获取已了结负债合约明细" aria-hidden="true">#</a> get_closed_compacts-获取已了结负债合约明细</h3><p><strong>用法：</strong> get_closed_compacts(accountID,accountType)</p><p><strong>释义：</strong> 获取已了结负债合约明细</p><p><strong>参数：</strong></p><ul><li>accountID：str，资金账号</li><li>accountType：str，账号类型，这里应该填&#39;CREDIT&#39;</li></ul><p><strong>返回：</strong></p><p>list([ CStkUnclosedCompacts, ... ]) 负债列表，CStkUnclosedCompacts属性如下：</p><table><thead><tr><th>字段名</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td><code>m_strAccountID</code></td><td>string</td><td>账号ID</td></tr><tr><td><code>m_nBrokerType</code></td><td>int</td><td>账号类型<br>1-期货账号<br>2-股票账号<br>3-信用账号<br>5-期货期权账号<br>6-股票期权账号<br>7-沪港通账号<br>11-深港通账号</td></tr><tr><td><code>m_strExchangeID</code></td><td>string</td><td>市场</td></tr><tr><td><code>m_strInstrumentID</code></td><td>string</td><td>证券代码</td></tr><tr><td><code>m_eCompactType</code></td><td>int</td><td>合约类型<br>32-不限制<br>48-融资<br>49-融券</td></tr><tr><td><code>m_eCashgroupProp</code></td><td>int</td><td>头寸来源<br>32-不限制<br>48-普通头寸<br>49-专项头寸</td></tr><tr><td><code>m_nOpenDate</code></td><td>int</td><td>开仓日期(如&#39;20201231&#39;)</td></tr><tr><td><code>m_nBusinessVol</code></td><td>int</td><td>合约证券数量</td></tr><tr><td><code>m_nRetEndDate</code></td><td>int</td><td>到期日(如&#39;20201231&#39;)</td></tr><tr><td><code>m_nDateClear</code></td><td>int</td><td>了结日期(如&#39;20201231&#39;)</td></tr><tr><td><code>m_nEntrustVol</code></td><td>int</td><td>委托数量</td></tr><tr><td><code>m_dEntrustBalance</code></td><td>float</td><td>委托金额</td></tr><tr><td><code>m_dBusinessBalance</code></td><td>float</td><td>合约金额</td></tr><tr><td><code>m_dBusinessFare</code></td><td>float</td><td>合约息费</td></tr><tr><td><code>m_dRepaidFare</code></td><td>float</td><td>已还息费</td></tr><tr><td><code>m_dRepaidBalance</code></td><td>float</td><td>已还金额</td></tr><tr><td><code>m_strCompactId</code></td><td>string</td><td>合约编号</td></tr><tr><td><code>m_strEntrustNo</code></td><td>string</td><td>委托编号</td></tr><tr><td><code>m_strPositionStr</code></td><td>string</td><td>定位串</td></tr></tbody></table><p><strong>示例：</strong></p><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#F8F8F2;">get_closed_compacts(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">6000000248</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">CREDIT</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="其他交易函数-仅回测可用" tabindex="-1"><a class="header-anchor" href="#其他交易函数-仅回测可用" aria-hidden="true">#</a> 其他交易函数（仅回测可用）</h2><div class="custom-container danger"><p class="custom-container-title">警告</p><p>以下函数仅回测生效，实盘和模拟盘交易均不可用</p></div><h3 id="get-basket-获取股票篮子" tabindex="-1"><a class="header-anchor" href="#get-basket-获取股票篮子" aria-hidden="true">#</a> get_basket-获取股票篮子</h3><p><strong>用法：</strong> get_basket(basketName)</p><p><strong>释义：</strong> 获取股票篮子</p><p><strong>参数：</strong></p><ul><li>basketName：股票篮子名称</li></ul><p><strong>示例：</strong></p><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#8BE9FD;">print</span><span style="color:#F8F8F2;">( get_basket(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">basket1</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">) )</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="set-basket-设置股票篮子" tabindex="-1"><a class="header-anchor" href="#set-basket-设置股票篮子" aria-hidden="true">#</a> set_basket-设置股票篮子</h3><p><strong>用法：</strong> set_basket(basketDict)</p><p><strong>释义：</strong> 设置passorder的股票篮子,仅用于passorder进行篮子交易,设置成功后,用get_basket可以取出后即可进行passorder组合交易下单</p><p><strong>参数：</strong></p><ul><li>basketDict：股票篮子 {&#39;name&#39;:股票篮子名称,&#39;stocks&#39;:[{&#39;stock&#39;:股票名称,&#39;weight&#39;,权重,&#39;quantity&#39;:数量,&#39;optType&#39;:交易类型}]} 。</li></ul><p><strong>示例：</strong></p><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#F8F8F2;">table</span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;">[</span></span>
<span class="line"><span style="color:#F8F8F2;">    {</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">stock</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">:</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">600000.SH</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">,</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">weight</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">:</span><span style="color:#BD93F9;">0.11</span><span style="color:#F8F8F2;">,</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">quantity</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">:</span><span style="color:#BD93F9;">100</span><span style="color:#F8F8F2;">,</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">optType</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">:</span><span style="color:#BD93F9;">23</span><span style="color:#F8F8F2;">},</span></span>
<span class="line"><span style="color:#F8F8F2;">    {</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">stock</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">:</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">600028.SH</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">,</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">weight</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">:</span><span style="color:#BD93F9;">0.11</span><span style="color:#F8F8F2;">,</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">quantity</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">:</span><span style="color:#BD93F9;">200</span><span style="color:#F8F8F2;">,</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">optType</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">:</span><span style="color:#BD93F9;">24</span><span style="color:#F8F8F2;">},</span></span>
<span class="line"><span style="color:#F8F8F2;">]</span></span>
<span class="line"><span style="color:#F8F8F2;">basket</span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;">{</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">name</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">:</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">basket1</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">,</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">stocks</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">:table}</span></span>
<span class="line"><span style="color:#F8F8F2;">set_basket(basket)</span></span>
<span class="line"><span style="color:#6272A4;">#一键买卖2份(2101代表用篮子里quantity字段)basket1里面的股票组合，即600000.SH买入200股，600028.SH卖出400股</span></span>
<span class="line"><span style="color:#F8F8F2;">passorder(</span><span style="color:#BD93F9;">35</span><span style="color:#F8F8F2;">,</span><span style="color:#BD93F9;">2101</span><span style="color:#F8F8F2;">,ContextInfo.accid,</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">basket1</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">,</span><span style="color:#BD93F9;">5</span><span style="color:#F8F8F2;">,</span><span style="color:#FF79C6;">-</span><span style="color:#BD93F9;">1</span><span style="color:#F8F8F2;">,</span><span style="color:#BD93F9;">2</span><span style="color:#F8F8F2;">,</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">basketOrder</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">,</span><span style="color:#BD93F9;">2</span><span style="color:#F8F8F2;">,</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">basketOrder</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">,ContextInfo)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="order-lots-指定手数交易" tabindex="-1"><a class="header-anchor" href="#order-lots-指定手数交易" aria-hidden="true">#</a> order_lots-指定手数交易</h3><p><strong>用法：</strong> order_lots(stockcode, lots[, style, price], ContextInfo[, accId])</p><p><strong>释义：</strong> 指定手数交易，指定手数发送买/卖单。如有需要落单类型当做一个参量传入，如果忽略掉落单类型，那么默认以最新价下单。</p><p><strong>参数：</strong></p><ul><li><p>stockcode：代码，string，如 &#39;000002.SZ&#39;</p></li><li><p>lots：手数，int</p></li><li><p>style：下单选价类型，string，默认为最新价 &#39;LATEST&#39;，可选值：</p><blockquote><p>&#39;LATEST&#39;：最新</p><p>&#39;FIX&#39;：指定 选此参数时必须指定有效的<code>price</code>参数，其他style值可不用传入price参数</p><p>&#39;HANG&#39;：挂单 用己方盘口挂单，即买入时用盘口买一价下单，卖出时用卖一价挂单，</p><p>&#39;COMPETE&#39;：对手</p><p>&#39;MARKET&#39;：市价</p><p>&#39;SALE5&#39;, &#39;SALE4&#39;, &#39;SALE3&#39;, &#39;SALE2&#39;, &#39;SALE1&#39;：卖5-1价</p><p>&#39;BUY1&#39;, &#39;BUY2&#39;, &#39;BUY3&#39;, &#39;BUY4&#39;, &#39;BUY5&#39;：买1-5价</p></blockquote></li><li><p>price：价格，double</p></li><li><p>ContextInfo：PythonObj，Python 对象，这里必须是 ContextInfo</p></li><li><p>accId：账号，string</p></li></ul><p><strong>返回：</strong> 无</p><p><strong>示例：</strong></p><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#FF79C6;">def</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">handlebar</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">ContextInfo</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#6272A4;"># 按最新价下 1 手买入</span></span>
<span class="line"><span style="color:#F8F8F2;">    order_lots(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">000002.SZ</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#BD93F9;">1</span><span style="color:#F8F8F2;">, ContextInfo, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">600000248</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#6272A4;"># 用对手价下 1 手卖出</span></span>
<span class="line"><span style="color:#F8F8F2;">    order_lots(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">000002.SZ</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#FF79C6;">-</span><span style="color:#BD93F9;">1</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">COMPETE</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, ContextInfo, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">600000248</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#6272A4;"># 用指定价 37.5 下 2 手卖出</span></span>
<span class="line"><span style="color:#F8F8F2;">    order_lots(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">000002.SZ</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#FF79C6;">-</span><span style="color:#BD93F9;">2</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">fix</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#BD93F9;">37.5</span><span style="color:#F8F8F2;">, ContextInfo, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">600000248</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="order-value-指定价值交易" tabindex="-1"><a class="header-anchor" href="#order-value-指定价值交易" aria-hidden="true">#</a> order_value-指定价值交易</h3><p><strong>用法：</strong> order_value(stockcode, value[, style, price], ContextInfo[, accId])</p><p><strong>释义：</strong> 指定价值交易，使用想要花费的金钱买入 / 卖出股票，而不是买入 / 卖出想要的股数，正数代表买入，负数代表卖出。股票的股数总是会被调整成对应的 100 的倍数（在中国 A 股市场 1 手是 100 股）。当您提交一个卖单时，该方法代表的意义是您希望通过卖出该股票套现的金额，如果金额超出了您所持有股票的价值，那么您将卖出所有股票。需要注意，如果资金不足，该 API 将不会创建发送订单。</p><p><strong>参数：</strong></p><ul><li><p>stockcode：代码，string，如 &#39;000002.SZ&#39;</p></li><li><p>value：金额（元），double</p></li><li><p>style：下单选价类型，string，默认为最新价 &#39;LATEST&#39;，可选值：</p><blockquote><p>&#39;LATEST&#39;：最新</p><p>&#39;FIX&#39;：指定</p><p>&#39;HANG&#39;：挂单</p><p>&#39;COMPETE&#39;：对手</p><p>&#39;MARKET&#39;：市价</p><p>&#39;SALE5&#39;, &#39;SALE4&#39;, &#39;SALE3&#39;, &#39;SALE2&#39;, &#39;SALE1&#39;：卖5-1价</p><p>&#39;BUY1&#39;, &#39;BUY2&#39;, &#39;BUY3&#39;, &#39;BUY4&#39;, &#39;BUY5&#39;：买1-5价</p></blockquote></li><li><p>price：价格，double</p></li><li><p>ContextInfo：PythonObj，Python 对象，这里必须是 ContextInfo</p></li><li><p>accId：账号，string</p></li></ul><p><strong>返回：</strong> 无</p><p><strong>示例：</strong></p><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#FF79C6;">def</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">handlebar</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">ContextInfo</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#6272A4;"># 按最新价下 10000 元买入</span></span>
<span class="line"><span style="color:#F8F8F2;">    order_value(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">000002.SZ</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#BD93F9;">10000</span><span style="color:#F8F8F2;">, ContextInfo, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">600000248</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#6272A4;"># 用对手价下 10000 元卖出</span></span>
<span class="line"><span style="color:#F8F8F2;">    order_value(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">000002.SZ</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#FF79C6;">-</span><span style="color:#BD93F9;">10000</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">COMPETE</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, ContextInfo, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">600000248</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#6272A4;"># 用指定价 37.5 下 20000 元卖出</span></span>
<span class="line"><span style="color:#F8F8F2;">    order_value(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">000002.SZ</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#FF79C6;">-</span><span style="color:#BD93F9;">20000</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">fix</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#BD93F9;">37.5</span><span style="color:#F8F8F2;">, ContextInfo, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">600000248</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="order-percent-指定比例交易" tabindex="-1"><a class="header-anchor" href="#order-percent-指定比例交易" aria-hidden="true">#</a> order_percent-指定比例交易</h3><p><strong>用法：</strong> order_percent(stockcode, percent[, style, price], ContextInfo[, accId])</p><p><strong>释义：</strong> 指定比例交易，发送一个等于目前投资组合价值（市场价值和目前现金的总和）一定百分比的买 / 卖单，正数代表买，负数代表卖。股票的股数总是会被调整成对应的一手的股票数的倍数（1 手是 100 股）。百分比是一个小数，并且小于或等于1（小于等于100%），0.5 表示的是 50%。需要注意，如果资金不足，该 API 将不会创建发送订单。</p><p><strong>参数：</strong></p><ul><li><p>stockcode：代码，string，如 &#39;000002.SZ&#39;</p></li><li><p>percent：比例，double</p></li><li><p>style：下单选价类型，string，默认为最新价 &#39;LATEST&#39;，可选值：</p><blockquote><p>&#39;LATEST&#39;：最新</p><p>&#39;FIX&#39;：指定</p><p>&#39;HANG&#39;：挂单</p><p>&#39;COMPETE&#39;：对手</p><p>&#39;MARKET&#39;：市价</p><p>&#39;SALE5&#39;, &#39;SALE4&#39;, &#39;SALE3&#39;, &#39;SALE2&#39;, &#39;SALE1&#39;：卖5-1价</p><p>&#39;BUY1&#39;, &#39;BUY2&#39;, &#39;BUY3&#39;, &#39;BUY4&#39;, &#39;BUY5&#39;：买1-5价</p></blockquote></li><li><p>price：价格，double</p></li><li><p>ContextInfo：PythonObj，Python 对象，这里必须是 ContextInfo</p></li><li><p>accId：账号，string</p></li></ul><p><strong>返回：</strong> 无</p><p><strong>示例：</strong></p><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#FF79C6;">def</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">handlebar</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">ContextInfo</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#6272A4;"># 按最新价下 5.1% 价值买入</span></span>
<span class="line"><span style="color:#F8F8F2;">    order_percent(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">000002.SZ</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#BD93F9;">0.051</span><span style="color:#F8F8F2;">, ContextInfo, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">600000248</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#6272A4;"># 用对手价下 5.1% 价值卖出</span></span>
<span class="line"><span style="color:#F8F8F2;">    order_percent(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">000002.SZ</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#FF79C6;">-</span><span style="color:#BD93F9;">0.051</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">COMPETE</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, ContextInfo, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">600000248</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#6272A4;"># 用指定价 37.5 下 10.2% 价值卖出</span></span>
<span class="line"><span style="color:#F8F8F2;">    order_percent(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">000002.SZ</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#FF79C6;">-</span><span style="color:#BD93F9;">0.102</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">fix</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#BD93F9;">37.5</span><span style="color:#F8F8F2;">, ContextInfo, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">600000248</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="order-target-value-指定目标价值交易" tabindex="-1"><a class="header-anchor" href="#order-target-value-指定目标价值交易" aria-hidden="true">#</a> order_target_value-指定目标价值交易</h3><p><strong>用法：</strong> order_target_value(stockcode, tar_value[, style, price], ContextInfo[, accId])</p><p><strong>释义：</strong> 指定目标价值交易，买入 / 卖出并且自动调整该证券的仓位到一个目标价值。如果还没有任何该证券的仓位，那么会买入全部目标价值的证券；如果已经有了该证券的仓位，则会买入 / 卖出调整该证券的现在仓位和目标仓位的价值差值的数目的证券。需要注意，如果资金不足，该API将不会创建发送订单。</p><p><strong>参数：</strong></p><ul><li><p>stockcode：代码，string，如 &#39;000002.SZ&#39;</p></li><li><p>tar_value：目标金额（元），double，非负数</p></li><li><p>style：下单选价类型，string，默认为最新价 &#39;LATEST&#39;，可选值：</p><blockquote><p>&#39;LATEST&#39;：最新</p><p>&#39;FIX&#39;：指定</p><p>&#39;HANG&#39;：挂单</p><p>&#39;COMPETE&#39;：对手</p><p>&#39;MARKET&#39;：市价</p><p>&#39;SALE5&#39;, &#39;SALE4&#39;, &#39;SALE3&#39;, &#39;SALE2&#39;, &#39;SALE1&#39;：卖5-1价</p><p>&#39;BUY1&#39;, &#39;BUY2&#39;, &#39;BUY3&#39;, &#39;BUY4&#39;, &#39;BUY5&#39;：买1-5价</p></blockquote></li><li><p>price：价格，double</p></li><li><p>ContextInfo：PythonObj，Python 对象，这里必须是 ContextInfo</p></li><li><p>accId：账号，string</p></li></ul><p><strong>返回：</strong> 无</p><p><strong>示例：</strong></p><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#FF79C6;">def</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">handlebar</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">ContextInfo</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#6272A4;"># 按最新价下调仓到 10000 元持仓   </span></span>
<span class="line"><span style="color:#F8F8F2;">    order_target_value(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">000002.SZ</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#BD93F9;">10000</span><span style="color:#F8F8F2;">, ContextInfo, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">600000248</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#6272A4;"># 用对手价调仓到 10000 元持仓   </span></span>
<span class="line"><span style="color:#F8F8F2;">    order_target_value(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">000002.SZ</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#BD93F9;">10000</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">COMPETE</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, ContextInfo, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">600000248</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#6272A4;"># 用指定价 37.5 下调仓到 20000 元持仓</span></span>
<span class="line"><span style="color:#F8F8F2;">    order_target_value(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">000002.SZ</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#BD93F9;">20000</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">fix</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#BD93F9;">37.5</span><span style="color:#F8F8F2;">, ContextInfo, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">600000248</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="order-target-percent-指定目标比例交易" tabindex="-1"><a class="header-anchor" href="#order-target-percent-指定目标比例交易" aria-hidden="true">#</a> order_target_percent-指定目标比例交易</h3><p><strong>用法：</strong> order_target_percent(stockcode, tar_percent[, style, price], ContextInfo[, accId])</p><p><strong>释义：</strong> 指定目标比例交易，买入 / 卖出证券以自动调整该证券的仓位到占有一个指定的投资组合的目标百分比。投资组合价值等于所有已有仓位的价值和剩余现金的总和。买 / 卖单会被下舍入一手股数（A 股是 100 的倍数）的倍数。目标百分比应该是一个小数，并且最大值应该小于等于1，比如 0.5 表示 50%，需要注意，如果资金不足，该API将不会创建发送订单。</p><p><strong>参数：</strong></p><ul><li><p>stockcode：代码，string，如 &#39;000002.SZ&#39;</p></li><li><p>tar_percent：目标百分比 [0 ~ 1]，double</p></li><li><p>style：下单选价类型，string，默认为最新价 &#39;LATEST&#39;，可选值：</p><blockquote><p>&#39;LATEST&#39;：最新</p><p>&#39;FIX&#39;：指定</p><p>&#39;HANG&#39;：挂单</p><p>&#39;COMPETE&#39;：对手</p><p>&#39;MARKET&#39;：市价</p><p>&#39;SALE5&#39;, &#39;SALE4&#39;, &#39;SALE3&#39;, &#39;SALE2&#39;, &#39;SALE1&#39;：卖5-1价</p><p>&#39;BUY1&#39;, &#39;BUY2&#39;, &#39;BUY3&#39;, &#39;BUY4&#39;, &#39;BUY5&#39;：买1-5价</p></blockquote></li><li><p>price：价格，double</p></li><li><p>ContextInfo：PythonObj，Python 对象，这里必须是 ContextInfo</p></li><li><p>accId：账号，string</p></li></ul><p><strong>返回：</strong> 无</p><p><strong>示例：</strong></p><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#FF79C6;">def</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">handlebar</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">ContextInfo</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#6272A4;"># 按最新价下买入调仓到 5.1% 持仓</span></span>
<span class="line"><span style="color:#F8F8F2;">    order_target_percent(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">000002.SZ</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#BD93F9;">0.051</span><span style="color:#F8F8F2;">, ContextInfo, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">600000248</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#6272A4;"># 用对手价调仓到 5.1% 持仓   </span></span>
<span class="line"><span style="color:#F8F8F2;">    order_target_percent(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">000002.SZ</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#BD93F9;">0.051</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">COMPETE</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, ContextInfo, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">600000248</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#6272A4;"># 用指定价 37.5 调仓到 10.2% 持仓</span></span>
<span class="line"><span style="color:#F8F8F2;">    order_target_percent(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">000002.SZ</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#BD93F9;">0.102</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">fix</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#BD93F9;">37.5</span><span style="color:#F8F8F2;">, ContextInfo, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">600000248</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="order-shares-指定股数交易" tabindex="-1"><a class="header-anchor" href="#order-shares-指定股数交易" aria-hidden="true">#</a> order_shares-指定股数交易</h3><p><strong>用法：</strong> order_shares(stockcode, shares[, style, price], ContextInfo[, accId])</p><p><strong>释义：</strong> 指定股数交易，指定股数的买 / 卖单,最常见的落单方式之一。如有需要落单类型当做一个参量传入，如果忽略掉落单类型，那么默认以最新价下单。</p><p><strong>参数：</strong></p><ul><li><p>stockcode：代码，string，如 &#39;000002.SZ&#39;</p></li><li><p>shares：股数，int</p></li><li><p>style：下单选价类型，string，默认为最新价 &#39;LATEST&#39;，可选值：</p><blockquote><p>&#39;LATEST&#39;：最新</p><p>&#39;FIX&#39;：指定</p><p>&#39;HANG&#39;：挂单</p><p>&#39;COMPETE&#39;：对手</p><p>&#39;MARKET&#39;：市价</p><p>&#39;SALE5&#39;, &#39;SALE4&#39;, &#39;SALE3&#39;, &#39;SALE2&#39;, &#39;SALE1&#39;：卖5-1价</p><p>&#39;BUY1&#39;, &#39;BUY2&#39;, &#39;BUY3&#39;, &#39;BUY4&#39;, &#39;BUY5&#39;：买1-5价</p></blockquote></li><li><p>price：价格，double</p></li><li><p>ContextInfo：PythonObj，Python 对象，这里必须是 ContextInfo</p></li><li><p>accId：账号，string</p></li></ul><p><strong>返回：</strong> 无</p><p><strong>示例：</strong></p><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#FF79C6;">def</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">handlebar</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">ContextInfo</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#6272A4;"># 按最新价下 100 股买入 </span></span>
<span class="line"><span style="color:#F8F8F2;">    order_shares(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">000002.SZ</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#BD93F9;">100</span><span style="color:#F8F8F2;">, ContextInfo, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">600000248</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#6272A4;"># 用对手价下 100 股卖出   </span></span>
<span class="line"><span style="color:#F8F8F2;">    order_shares(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">000002.SZ</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#FF79C6;">-</span><span style="color:#BD93F9;">100</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">COMPETE</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, ContextInfo, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">600000248</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#6272A4;"># 用指定价 37.5 下 200 股卖出</span></span>
<span class="line"><span style="color:#F8F8F2;">    order_shares(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">000002.SZ</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#FF79C6;">-</span><span style="color:#BD93F9;">200</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">fix</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#BD93F9;">37.5</span><span style="color:#F8F8F2;">, ContextInfo, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">600000248</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="buy-open-货买入开仓" tabindex="-1"><a class="header-anchor" href="#buy-open-货买入开仓" aria-hidden="true">#</a> buy_open-货买入开仓</h3><p><strong>用法：</strong> buy_open(stockcode, amount[, style, price], ContextInfo[, accId])</p><p><strong>释义：</strong> 期货买入开仓</p><p><strong>参数：</strong></p><ul><li><p>stockcode：代码，string，如 &#39;IF1805.IF&#39;</p></li><li><p>amount：手数，int</p></li><li><p>style：下单选价类型，string，默认为最新价 &#39;LATEST&#39;，可选值：</p><blockquote><p>&#39;LATEST&#39;：最新</p><p>&#39;FIX&#39;：指定</p><p>&#39;HANG&#39;：挂单</p><p>&#39;COMPETE&#39;：对手</p><p>&#39;MARKET&#39;：市价</p><p>&#39;SALE1&#39;：卖一价</p><p>&#39;BUY1&#39;：买一价</p></blockquote></li><li><p>price：价格，double</p></li><li><p>ContextInfo：PythonObj，Python 对象，这里必须是 ContextInfo</p></li><li><p>accId：账号，string</p></li></ul><p><strong>返回：</strong> 无</p><p><strong>示例：</strong></p><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#FF79C6;">def</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">handlebar</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">ContextInfo</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#6272A4;"># 按最新价 1 手买入开仓 </span></span>
<span class="line"><span style="color:#F8F8F2;">    buy_open(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">IF1805.IF</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#BD93F9;">1</span><span style="color:#F8F8F2;">, ContextInfo, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">110476</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#6272A4;"># 用对手价 1 手买入开仓   </span></span>
<span class="line"><span style="color:#F8F8F2;">    buy_open(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">IF1805.IF</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#BD93F9;">1</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">COMPETE</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, ContextInfo, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">110476</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#6272A4;"># 用指定价 3750 元 2 手买入开仓</span></span>
<span class="line"><span style="color:#F8F8F2;">    buy_open(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">IF1805.IF</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#BD93F9;">2</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">fix</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#BD93F9;">3750</span><span style="color:#F8F8F2;">, ContextInfo, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">110476</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="buy-close-tdayfirst-期货买入平仓-平今优先" tabindex="-1"><a class="header-anchor" href="#buy-close-tdayfirst-期货买入平仓-平今优先" aria-hidden="true">#</a> buy_close_tdayfirst-期货买入平仓（平今优先）</h3><p><strong>用法：</strong> buy_close_tdayfirst(stockcode, amount[, style, price], ContextInfo[, accId])</p><p><strong>释义：</strong> 期货买入平仓，平今优先</p><p><strong>参数：</strong></p><ul><li><p>stockcode：代码，string，如 &#39;IF1805.IF&#39;</p></li><li><p>amount：手数，int</p></li><li><p>style：下单选价类型，string，默认为最新价 &#39;LATEST&#39;，可选值：</p><blockquote><p>&#39;LATEST&#39;：最新</p><p>&#39;FIX&#39;：指定</p><p>&#39;HANG&#39;：挂单</p><p>&#39;COMPETE&#39;：对手</p><p>&#39;MARKET&#39;：市价</p><p>&#39;SALE1&#39;：卖一价</p><p>&#39;BUY1&#39;：买一价</p></blockquote></li><li><p>price：价格，double</p></li><li><p>ContextInfo：PythonObj，Python 对象，这里必须是 ContextInfo</p></li><li><p>accId：账号，string</p></li></ul><p><strong>返回：</strong> 无</p><p><strong>示例：</strong></p><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#FF79C6;">def</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">handlebar</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">ContextInfo</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#6272A4;"># 按最新价 1 手买入平仓，平今优先  </span></span>
<span class="line"><span style="color:#F8F8F2;">    buy_close_tdayfirst(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">IF1805.IF</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#BD93F9;">1</span><span style="color:#F8F8F2;">, ContextInfo, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">110476</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#6272A4;"># 用对手价 1 手买入平仓，平今优先   </span></span>
<span class="line"><span style="color:#F8F8F2;">    buy_close_tdayfirst(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">IF1805.IF</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#BD93F9;">1</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">COMPETE</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, ContextInfo, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">110476</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#6272A4;"># 用指定价 3750 元 2 手买入平仓，平今优先</span></span>
<span class="line"><span style="color:#F8F8F2;">    buy_close_tdayfirst(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">IF1805.IF</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#BD93F9;">2</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">fix</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#BD93F9;">3750</span><span style="color:#F8F8F2;">, ContextInfo, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">110476</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="buy-close-ydayfirst-期货买入平仓-平昨优先" tabindex="-1"><a class="header-anchor" href="#buy-close-ydayfirst-期货买入平仓-平昨优先" aria-hidden="true">#</a> buy_close_ydayfirst-期货买入平仓（平昨优先）</h3><p><strong>用法：</strong> buy_close_ydayfirst(stockcode, amount[, style, price], ContextInfo[, accId])</p><p><strong>释义：</strong> 期货买入开仓，平昨优先</p><p><strong>参数：</strong></p><ul><li><p>stockcode：代码，string，如 &#39;IF1805.IF&#39;</p></li><li><p>amount：手数，int</p></li><li><p>style：下单选价类型，string，默认为最新价 &#39;LATEST&#39;，可选值：</p><blockquote><p>&#39;LATEST&#39;：最新</p><p>&#39;FIX&#39;：指定</p><p>&#39;HANG&#39;：挂单</p><p>&#39;COMPETE&#39;：对手</p><p>&#39;MARKET&#39;：市价</p><p>&#39;SALE1&#39;：卖一价</p><p>&#39;BUY1&#39;：买一价</p></blockquote></li><li><p>price：价格，double</p></li><li><p>ContextInfo：PythonObj，Python 对象，这里必须是 ContextInfo</p></li><li><p>accId：账号，string</p></li></ul><p><strong>返回：</strong> 无</p><p><strong>示例：</strong></p><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#FF79C6;">def</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">handlebar</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">ContextInfo</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#6272A4;"># 按最新价 1 手买入平仓，平昨优先</span></span>
<span class="line"><span style="color:#F8F8F2;">    buy_close_ydayfirst(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">IF1805.IF</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#BD93F9;">1</span><span style="color:#F8F8F2;">, ContextInfo, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">110476</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#6272A4;"># 用对手价 1 手买入平仓，平昨优先   </span></span>
<span class="line"><span style="color:#F8F8F2;">    buy_close_ydayfirst(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">IF1805.IF</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#BD93F9;">1</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">COMPETE</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, ContextInfo, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">110476</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#6272A4;"># 用指定价 3750 元 2 手买入平仓，平昨优先</span></span>
<span class="line"><span style="color:#F8F8F2;">    buy_close_ydayfirst(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">IF1805.IF</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#BD93F9;">2</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">fix</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#BD93F9;">3750</span><span style="color:#F8F8F2;">, ContextInfo, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">110476</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="sell-open-期货卖出开仓" tabindex="-1"><a class="header-anchor" href="#sell-open-期货卖出开仓" aria-hidden="true">#</a> sell_open-期货卖出开仓</h3><p><strong>用法：</strong> sell_open(stockcode, amount[, style, price], ContextInfo[, accId])</p><p><strong>释义：</strong> 期货卖出开仓</p><p><strong>参数：</strong></p><ul><li><p>stockcode：代码，string，如 &#39;IF1805.IF&#39;</p></li><li><p>amount：手数，int</p></li><li><p>style：下单选价类型，string，默认为最新价 &#39;LATEST&#39;，可选值：</p><blockquote><p>&#39;LATEST&#39;：最新</p><p>&#39;FIX&#39;：指定</p><p>&#39;HANG&#39;：挂单</p><p>&#39;COMPETE&#39;：对手</p><p>&#39;MARKET&#39;：市价</p><p>&#39;SALE1&#39;：卖一价</p><p>&#39;BUY1&#39;：买一价</p></blockquote></li><li><p>price：价格，double</p></li><li><p>ContextInfo：PythonObj，Python 对象，这里必须是 ContextInfo</p></li><li><p>accId：账号，string</p></li></ul><p><strong>返回：</strong> 无</p><p><strong>示例：</strong></p><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#FF79C6;">def</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">handlebar</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">ContextInfo</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#6272A4;"># 按最新价 1 手卖出开仓</span></span>
<span class="line"><span style="color:#F8F8F2;">    sell_open(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">IF1805.IF</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#BD93F9;">1</span><span style="color:#F8F8F2;">, ContextInfo, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">110476</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#6272A4;"># 用对手价 1 手卖出开仓   </span></span>
<span class="line"><span style="color:#F8F8F2;">    sell_open(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">IF1805.IF</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#BD93F9;">1</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">COMPETE</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, ContextInfo, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">110476</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#6272A4;"># 用指定价 3750 元 2 手卖出开仓</span></span>
<span class="line"><span style="color:#F8F8F2;">    sell_open(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">IF1805.IF</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#BD93F9;">2</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">fix</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">,</span><span style="color:#BD93F9;">3750</span><span style="color:#F8F8F2;">, ContextInfo, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">110476</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="sell-close-tdayfirst-期货卖出平仓-平今优先" tabindex="-1"><a class="header-anchor" href="#sell-close-tdayfirst-期货卖出平仓-平今优先" aria-hidden="true">#</a> sell_close_tdayfirst-期货卖出平仓（平今优先）</h3><p><strong>用法：</strong> sell_close_tdayfirst(stockcode, amount[, style, price], ContextInfo[, accId])</p><p><strong>释义：</strong> 期货卖出平仓，平今优先</p><p><strong>参数：</strong></p><ul><li><p>stockcode：代码，string，如 &#39;IF1805.IF&#39;</p></li><li><p>amount：手数，int</p></li><li><p>style：下单选价类型，string，默认为最新价 &#39;LATEST&#39;，可选值：</p><blockquote><p>&#39;LATEST&#39;：最新</p><p>&#39;FIX&#39;：指定</p><p>&#39;HANG&#39;：挂单</p><p>&#39;COMPETE&#39;：对手</p><p>&#39;MARKET&#39;：市价</p><p>&#39;SALE1&#39;：卖一价</p><p>&#39;BUY1&#39;：买一价</p></blockquote></li><li><p>price：价格，double</p></li><li><p>ContextInfo：PythonObj，Python 对象，这里必须是 ContextInfo</p></li><li><p>accId：账号，string</p></li></ul><p><strong>返回：</strong> 无</p><p><strong>示例：</strong></p><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#FF79C6;">def</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">handlebar</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">ContextInfo</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#6272A4;"># 按最新价下 1 手卖出平仓，平今优先</span></span>
<span class="line"><span style="color:#F8F8F2;">    sell_close_tdayfirst(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">IF1805.IF</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#BD93F9;">1</span><span style="color:#F8F8F2;">, ContextInfo, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">110476</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#6272A4;"># 用对手价 1 手卖出平仓，平今优先</span></span>
<span class="line"><span style="color:#F8F8F2;">    sell_close_tdayfirst(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">IF1805.IF</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#BD93F9;">1</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">COMPETE</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, ContextInfo, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">110476</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#6272A4;"># 用指定价 3750 元 2 手卖出平仓，平今优先</span></span>
<span class="line"><span style="color:#F8F8F2;">    sell_close_tdayfirst(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">IF1805.IF</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#BD93F9;">1</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">fix</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#BD93F9;">3750</span><span style="color:#F8F8F2;">, ContextInfo, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">110476</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="sell-close-ydayfirst-期货卖出平仓-平昨优先" tabindex="-1"><a class="header-anchor" href="#sell-close-ydayfirst-期货卖出平仓-平昨优先" aria-hidden="true">#</a> sell_close_ydayfirst-期货卖出平仓（平昨优先）</h3><p><strong>用法：</strong> sell_close_ydayfirst(stockcode, amount[, style, price], ContextInfo[, accId])</p><p><strong>释义：</strong> 期货卖出平仓，平昨优先</p><p><strong>参数：</strong></p><ul><li><p>stockcode：代码，string，如 &#39;IF1805.IF&#39;</p></li><li><p>amount：手数，int</p></li><li><p>style：下单选价类型，string，默认为最新价 &#39;LATEST&#39;，可选值：</p><blockquote><p>&#39;LATEST&#39;：最新</p><p>&#39;FIX&#39;：指定</p><p>&#39;HANG&#39;：挂单</p><p>&#39;COMPETE&#39;：对手</p><p>&#39;MARKET&#39;：市价</p><p>&#39;SALE1&#39;：卖一价</p><p>&#39;BUY1&#39;：买一价</p></blockquote></li><li><p>price：价格，double</p></li><li><p>ContextInfo：PythonObj，Python 对象，这里必须是 ContextInfo</p></li><li><p>accId：账号，string</p></li></ul><p><strong>返回：</strong> 无</p><p><strong>示例：</strong></p><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#FF79C6;">def</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">handlebar</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">ContextInfo</span><span style="color:#F8F8F2;">): </span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#6272A4;"># 按最新价 1 手卖出平仓，平昨优先 </span></span>
<span class="line"><span style="color:#F8F8F2;">    sell_close_ydayfirst(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">IF1805.IF</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#BD93F9;">1</span><span style="color:#F8F8F2;">, ContextInfo, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">110476</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#6272A4;"># 用对手价 1 手卖出平仓，平昨优先   </span></span>
<span class="line"><span style="color:#F8F8F2;">    sell_close_ydayfirst(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">IF1805.IF</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#BD93F9;">1</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">COMPETE</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, ContextInfo, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">110476</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#6272A4;"># 用指定价 3750 元 2 手卖出平仓，平昨优先</span></span>
<span class="line"><span style="color:#F8F8F2;">    sell_close_ydayfirst(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">IF1805.IF</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#BD93F9;">2</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">fix</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#BD93F9;">3750</span><span style="color:#F8F8F2;">, ContextInfo, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">110476</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="已弃用-get-debt-contract-获取两融负债合约明细" tabindex="-1"><a class="header-anchor" href="#已弃用-get-debt-contract-获取两融负债合约明细" aria-hidden="true">#</a> [已弃用] get_debt_contract-获取两融负债合约明细</h3><p><strong>用法：</strong> get_debt_contract(accId)</p><p><strong>释义：</strong> 获取信用账户负债合约明细</p><p>此接口已弃用，替代接口为get_unclosed_compacts（获取未了结负债）和get_closed_compacts（获取已了结负债）</p><p><strong>参数：</strong></p><ul><li>accId：信用账户</li></ul><p><strong>返回：</strong> list，list 中放的是 <a href="../pages/e148c4/#_5-3-7-stkcompacts%E8%B4%9F%E5%80%BA%E5%90%88%E7%BA%A6%E5%AF%B9%E8%B1%A1" class="">PythonObj</a>，通过 dir(pythonobj) 可返回某个对象的属性列表。</p><p><strong>示例：</strong></p><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#FF79C6;">def</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">handlebar</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">ContextInfo</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">    obj_list </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> get_debt_contract(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">6000000248</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#FF79C6;">for</span><span style="color:#F8F8F2;"> obj </span><span style="color:#FF79C6;">in</span><span style="color:#F8F8F2;"> obj_list:</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#6272A4;"># 输出负债合约名</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#8BE9FD;">print</span><span style="color:#F8F8F2;">(obj.m_strInstrumentName)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="get-hkt-exchange-rate-获取沪深港通汇率数据" tabindex="-1"><a class="header-anchor" href="#get-hkt-exchange-rate-获取沪深港通汇率数据" aria-hidden="true">#</a> get_hkt_exchange_rate-获取沪深港通汇率数据</h3><p><strong>用法：</strong> get_hkt_exchange_rate(accountID,accountType)</p><p><strong>释义：</strong> 获取沪深港通汇率数据</p><p><strong>参数：</strong></p><ul><li>accountID：string,账号；</li><li>accountType:string,账号类型,必须填HUGANGTONG或者SHENGANGTONG</li></ul><p><strong>返回：</strong></p><blockquote><p>dict,字段释义：</p><p>bidReferenceRate:买入参考汇率</p><p>askReferenceRate:卖出参考汇率</p><p>dayBuyRiseRate:日间买入参考汇率浮动比例</p><p>daySaleRiseRate:日间卖出参考汇率浮动比例</p></blockquote><p><strong>示例：</strong></p><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#FF79C6;">def</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">init</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">ContextInfo</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">      data</span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;">get_hkt_exchange_rate(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">6000000248</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">,</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">HUGANGTONG</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">      </span><span style="color:#8BE9FD;">print</span><span style="color:#F8F8F2;">(data)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><!--[--><!--]--></div>

<nav class="page-nav" data-v-3c904194><p class="inner"><span class="prev"><a href="../innerApi/data_function.html" class="" aria-label="行情函数"><!--[--><!--]--> 行情函数 <!--[--><!--]--></a></span><span class="next"><a href="../innerApi/callback_function.html" class="" aria-label="成交回报实时主推函数"><!--[--><!--]--> 成交回报实时主推函数 <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    
  <div class="toFixedCopy wxFixed" style="text-align: center"><a href="https://work.weixin.qq.com/ca/cawcde1dc261ca71f1" target="_blank" rel="noopener noreferrer">联系微信获取权限<br><img src="../assets/联系客户经理.png" alt="微信扫码联系客服" title="点击联系客服" style="width:150px;"></a></div></body>
</html>
