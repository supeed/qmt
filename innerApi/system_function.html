
<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.67">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    
	<title>系统函数</title><meta name="description" content="QMT说明, QMT-Python-API, QMT用户手册。">
    
<link rel="preload" href="../assets/style-8436f03b.css" as="style">
<link rel="stylesheet" href="../assets/style-8436f03b.css">
    
<link rel="modulepreload" href="../assets/app-4f7ad5aa.js">
<link rel="modulepreload" href="../assets/system_function.html-03a1dc3a.js">
<link rel="modulepreload" href="../assets/system_function.html-4e6487d0.js">
<link rel="prefetch" href="../assets/index.html-93a0007d.js" as="script">
<link rel="prefetch" href="../assets/basic_syntax.html-e393df56.js" as="script">
<link rel="prefetch" href="../assets/check_sheet.html-a405c8a3.js" as="script">
<link rel="prefetch" href="../assets/code_examples.html-985b4984.js" as="script">
<link rel="prefetch" href="../assets/control_statement.html-bf992bd7.js" as="script">
<link rel="prefetch" href="../assets/operating_mode.html-a2f39c1a.js" as="script">
<link rel="prefetch" href="../assets/start_now.html-1be21f8a.js" as="script">
<link rel="prefetch" href="../assets/system_function.html-49a65798.js" as="script">
<link rel="prefetch" href="../assets/python调用VBA.html-e92f2331.js" as="script">
<link rel="prefetch" href="../assets/全市场涨跌幅度统计.html-b8ba35f1.js" as="script">
<link rel="prefetch" href="../assets/全市场资金流向.html-3bd359eb.js" as="script">
<link rel="prefetch" href="../assets/北向资金.html-c14449da.js" as="script">
<link rel="prefetch" href="../assets/南向资金.html-ed8f1d67.js" as="script">
<link rel="prefetch" href="../assets/外盘_内盘.html-f9f023d3.js" as="script">
<link rel="prefetch" href="../assets/多空对比.html-a634bb69.js" as="script">
<link rel="prefetch" href="../assets/委买价_委卖价_委买量_委卖量.html-e791f06d.js" as="script">
<link rel="prefetch" href="../assets/总市值.html-54cae4e7.js" as="script">
<link rel="prefetch" href="../assets/总股本_涨停_跌停.html-9495eb6a.js" as="script">
<link rel="prefetch" href="../assets/换手.html-396e0a2d.js" as="script">
<link rel="prefetch" href="../assets/最新_今开_最高_最低_总额_总手_交易状态.html-1ae0fd22.js" as="script">
<link rel="prefetch" href="../assets/注册资本.html-061f0b8d.js" as="script">
<link rel="prefetch" href="../assets/流通盘.html-26dbb5b3.js" as="script">
<link rel="prefetch" href="../assets/涨跌_涨幅.html-c4201ae4.js" as="script">
<link rel="prefetch" href="../assets/涨跌家数变化.html-a30316a7.js" as="script">
<link rel="prefetch" href="../assets/规模风向标.html-d7dc3f5e.js" as="script">
<link rel="prefetch" href="../assets/量比.html-ca6f9a2e.js" as="script">
<link rel="prefetch" href="../assets/index.html-179668eb.js" as="script">
<link rel="prefetch" href="../assets/bond.html-d9c1be0d.js" as="script">
<link rel="prefetch" href="../assets/floorfunds.html-8810bed2.js" as="script">
<link rel="prefetch" href="../assets/future.html-8c1c26b7.js" as="script">
<link rel="prefetch" href="../assets/indexes.html-ec6ecef0.js" as="script">
<link rel="prefetch" href="../assets/industry.html-cffc4e77.js" as="script">
<link rel="prefetch" href="../assets/option.html-1d25e189.js" as="script">
<link rel="prefetch" href="../assets/question_answer.html-bed5ae76.js" as="script">
<link rel="prefetch" href="../assets/stock.html-035c3630.js" as="script">
<link rel="prefetch" href="../assets/rookie.html-df76d0ad.js" as="script">
<link rel="prefetch" href="../assets/callback_function.html-4153be6c.js" as="script">
<link rel="prefetch" href="../assets/code_examples.html-c1ae1001.js" as="script">
<link rel="prefetch" href="../assets/data_function.html-a6b5f1c5.js" as="script">
<link rel="prefetch" href="../assets/data_structure.html-a96a202d.js" as="script">
<link rel="prefetch" href="../assets/drawing_function.html-dee669df.js" as="script">
<link rel="prefetch" href="../assets/enum_constants.html-2c1f6dcc.js" as="script">
<link rel="prefetch" href="../assets/interface_operation.html-47a2cf15.js" as="script">
<link rel="prefetch" href="../assets/question_answer.html-4f12deae.js" as="script">
<link rel="prefetch" href="../assets/quote_function.html-827e9fb8.js" as="script">
<link rel="prefetch" href="../assets/related_instructions.html-9b630c20.js" as="script">
<link rel="prefetch" href="../assets/start_now.html-79f8f415.js" as="script">
<link rel="prefetch" href="../assets/trading_function.html-3c0f4ee8.js" as="script">
<link rel="prefetch" href="../assets/user_attention.html-e0d27a96.js" as="script">
<link rel="prefetch" href="../assets/variable_convention.html-17caf0d6.js" as="script">
<link rel="prefetch" href="../assets/code_examples.html-f1708e88.js" as="script">
<link rel="prefetch" href="../assets/download_xtquant.html-337a4246.js" as="script">
<link rel="prefetch" href="../assets/question_function.html-92b003d3.js" as="script">
<link rel="prefetch" href="../assets/start_now.html-b45a357d.js" as="script">
<link rel="prefetch" href="../assets/xtdata.html-97c855c0.js" as="script">
<link rel="prefetch" href="../assets/xttrader.html-cb4abe04.js" as="script">
<link rel="prefetch" href="../assets/JoinQuant2QMT.html-38cb9974.js" as="script">
<link rel="prefetch" href="../assets/index.html-22b6b31a.js" as="script">
<link rel="prefetch" href="../assets/daoru_daochu.html-c8cace75.js" as="script">
<link rel="prefetch" href="../assets/hangqing_setting.html-1a9570b3.js" as="script">
<link rel="prefetch" href="../assets/ty_add_indicator.html-1f2f4b0a.js" as="script">
<link rel="prefetch" href="../assets/ty_backtest_strategy.html-270aeeab.js" as="script">
<link rel="prefetch" href="../assets/ty_code_review_backtest.html-200ceddd.js" as="script">
<link rel="prefetch" href="../assets/ty_content.html-bac1ad25.js" as="script">
<link rel="prefetch" href="../assets/ty_data_download.html-351b4a4f.js" as="script">
<link rel="prefetch" href="../assets/ty_data_interface.html-2e32a98a.js" as="script">
<link rel="prefetch" href="../assets/ty_direct_connect.html-f8b10f83.js" as="script">
<link rel="prefetch" href="../assets/ty_factor_data.html-1746bcaa.js" as="script">
<link rel="prefetch" href="../assets/ty_linux_xtquant_data.html-44bf60fb.js" as="script">
<link rel="prefetch" href="../assets/ty_native_python.html-8028f714.js" as="script">
<link rel="prefetch" href="../assets/ty_register_install.html-0d2c078f.js" as="script">
<link rel="prefetch" href="../assets/404.html-f9875e7b.js" as="script">
<link rel="prefetch" href="../assets/index.html-766f0669.js" as="script">
<link rel="prefetch" href="../assets/basic_syntax.html-5d89ee34.js" as="script">
<link rel="prefetch" href="../assets/check_sheet.html-f9ed5248.js" as="script">
<link rel="prefetch" href="../assets/code_examples.html-b9cb08f4.js" as="script">
<link rel="prefetch" href="../assets/control_statement.html-efd069de.js" as="script">
<link rel="prefetch" href="../assets/operating_mode.html-8477b54e.js" as="script">
<link rel="prefetch" href="../assets/start_now.html-ffa9b752.js" as="script">
<link rel="prefetch" href="../assets/system_function.html-3b0e07c1.js" as="script">
<link rel="prefetch" href="../assets/python调用VBA.html-04a53346.js" as="script">
<link rel="prefetch" href="../assets/全市场涨跌幅度统计.html-52d1f349.js" as="script">
<link rel="prefetch" href="../assets/全市场资金流向.html-faf4d3d8.js" as="script">
<link rel="prefetch" href="../assets/北向资金.html-c65ffe41.js" as="script">
<link rel="prefetch" href="../assets/南向资金.html-f0b9a7f7.js" as="script">
<link rel="prefetch" href="../assets/外盘_内盘.html-99b15d0e.js" as="script">
<link rel="prefetch" href="../assets/多空对比.html-1b5dda20.js" as="script">
<link rel="prefetch" href="../assets/委买价_委卖价_委买量_委卖量.html-10ef3ff4.js" as="script">
<link rel="prefetch" href="../assets/总市值.html-3f06554a.js" as="script">
<link rel="prefetch" href="../assets/总股本_涨停_跌停.html-fa561e62.js" as="script">
<link rel="prefetch" href="../assets/换手.html-50b0fe55.js" as="script">
<link rel="prefetch" href="../assets/最新_今开_最高_最低_总额_总手_交易状态.html-ac059782.js" as="script">
<link rel="prefetch" href="../assets/注册资本.html-ed642b18.js" as="script">
<link rel="prefetch" href="../assets/流通盘.html-cb0af016.js" as="script">
<link rel="prefetch" href="../assets/涨跌_涨幅.html-4bdf807b.js" as="script">
<link rel="prefetch" href="../assets/涨跌家数变化.html-39d9d51b.js" as="script">
<link rel="prefetch" href="../assets/规模风向标.html-61f057d8.js" as="script">
<link rel="prefetch" href="../assets/量比.html-946984fa.js" as="script">
<link rel="prefetch" href="../assets/index.html-343a9bc9.js" as="script">
<link rel="prefetch" href="../assets/bond.html-b95fe2e7.js" as="script">
<link rel="prefetch" href="../assets/floorfunds.html-8f40ab6c.js" as="script">
<link rel="prefetch" href="../assets/future.html-bc8a6747.js" as="script">
<link rel="prefetch" href="../assets/indexes.html-12cf3b96.js" as="script">
<link rel="prefetch" href="../assets/industry.html-5afe454b.js" as="script">
<link rel="prefetch" href="../assets/option.html-41035b2b.js" as="script">
<link rel="prefetch" href="../assets/question_answer.html-2e60f1af.js" as="script">
<link rel="prefetch" href="../assets/stock.html-3ddf1187.js" as="script">
<link rel="prefetch" href="../assets/rookie.html-1880c6e7.js" as="script">
<link rel="prefetch" href="../assets/callback_function.html-7b61dc3e.js" as="script">
<link rel="prefetch" href="../assets/code_examples.html-e4d0c98f.js" as="script">
<link rel="prefetch" href="../assets/data_function.html-c585078e.js" as="script">
<link rel="prefetch" href="../assets/data_structure.html-00957d9f.js" as="script">
<link rel="prefetch" href="../assets/drawing_function.html-6fd79a20.js" as="script">
<link rel="prefetch" href="../assets/enum_constants.html-e026c5f8.js" as="script">
<link rel="prefetch" href="../assets/interface_operation.html-294f10dc.js" as="script">
<link rel="prefetch" href="../assets/question_answer.html-b40d9b88.js" as="script">
<link rel="prefetch" href="../assets/quote_function.html-65e64c4b.js" as="script">
<link rel="prefetch" href="../assets/related_instructions.html-4bd31d1e.js" as="script">
<link rel="prefetch" href="../assets/start_now.html-b5537d3a.js" as="script">
<link rel="prefetch" href="../assets/trading_function.html-8de10c2f.js" as="script">
<link rel="prefetch" href="../assets/user_attention.html-a4aafcf1.js" as="script">
<link rel="prefetch" href="../assets/variable_convention.html-ee437d4a.js" as="script">
<link rel="prefetch" href="../assets/code_examples.html-5b70b4b7.js" as="script">
<link rel="prefetch" href="../assets/download_xtquant.html-cd71994a.js" as="script">
<link rel="prefetch" href="../assets/question_function.html-0e56fa2f.js" as="script">
<link rel="prefetch" href="../assets/start_now.html-ccb2e41b.js" as="script">
<link rel="prefetch" href="../assets/xtdata.html-6eed3ea1.js" as="script">
<link rel="prefetch" href="../assets/xttrader.html-95a0f11e.js" as="script">
<link rel="prefetch" href="../assets/JoinQuant2QMT.html-4689d313.js" as="script">
<link rel="prefetch" href="../assets/index.html-3d5e006c.js" as="script">
<link rel="prefetch" href="../assets/daoru_daochu.html-a8aa83da.js" as="script">
<link rel="prefetch" href="../assets/hangqing_setting.html-5f096289.js" as="script">
<link rel="prefetch" href="../assets/ty_add_indicator.html-d492a779.js" as="script">
<link rel="prefetch" href="../assets/ty_backtest_strategy.html-a88bc371.js" as="script">
<link rel="prefetch" href="../assets/ty_code_review_backtest.html-d46b1117.js" as="script">
<link rel="prefetch" href="../assets/ty_content.html-5ebd8aae.js" as="script">
<link rel="prefetch" href="../assets/ty_data_download.html-afb26211.js" as="script">
<link rel="prefetch" href="../assets/ty_data_interface.html-c02f6dd1.js" as="script">
<link rel="prefetch" href="../assets/ty_direct_connect.html-96b151d2.js" as="script">
<link rel="prefetch" href="../assets/ty_factor_data.html-288cd2ef.js" as="script">
<link rel="prefetch" href="../assets/ty_linux_xtquant_data.html-b4e8a806.js" as="script">
<link rel="prefetch" href="../assets/ty_native_python.html-0a5cdc64.js" as="script">
<link rel="prefetch" href="../assets/ty_register_install.html-72528567.js" as="script">
<link rel="prefetch" href="../assets/404.html-d17800ac.js" as="script">
<link rel="prefetch" href="../assets/SearchBox-7eee7251.js" as="script">
<link rel="prefetch" href="../assets/auto-6adc87e8.js" as="script">
<link rel="prefetch" href="../assets/index-2bf332f6.js" as="script">
<link rel="prefetch" href="../assets/flowchart-c441f34d.js" as="script">
<link rel="prefetch" href="../assets/SignPanel-522772a1.js" as="script">
<link rel="prefetch" href="../assets/SignPanel-522772a1.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[-->

	<aside class="sidebar">
	
	<ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading active">内置Python <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="../innerApi/start_now.html" class="sidebar-item" aria-label="快速开始"><!--[--><!--]--> 快速开始 <!--[--><!--]--></a><!----></li><li><a href="../innerApi/user_attention.html" class="sidebar-item" aria-label="使用须知"><!--[--><!--]--> 使用须知 <!--[--><!--]--></a><!----></li><li><a href="../innerApi/interface_operation.html" class="sidebar-item" aria-label="界面操作"><!--[--><!--]--> 界面操作 <!--[--><!--]--></a><!----></li><li><a href="../innerApi/variable_convention.html" class="sidebar-item" aria-label="变量约定"><!--[--><!--]--> 变量约定 <!--[--><!--]--></a><!----></li><li><a href="../innerApi/data_structure.html" class="sidebar-item" aria-label="数据结构"><!--[--><!--]--> 数据结构 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="../innerApi/system_function.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="系统函数"><!--[--><!--]--> 系统函数 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="../innerApi/system_function.html#contextinfo-对象" class="router-link-active router-link-exact-active sidebar-item" aria-label="ContextInfo 对象"><!--[--><!--]--> ContextInfo 对象 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="../innerApi/system_function.html#init-初始化函数" class="router-link-active router-link-exact-active sidebar-item" aria-label="init - 初始化函数"><!--[--><!--]--> init - 初始化函数 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="../innerApi/system_function.html#after-init-初始化后函数" class="router-link-active router-link-exact-active sidebar-item" aria-label="after_init - 初始化后函数"><!--[--><!--]--> after_init - 初始化后函数 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="../innerApi/system_function.html#handlebar-行情事件函数" class="router-link-active router-link-exact-active sidebar-item" aria-label="handlebar - 行情事件函数"><!--[--><!--]--> handlebar - 行情事件函数 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="../innerApi/system_function.html#contextinfo-schedule-run-设置定时器" class="router-link-active router-link-exact-active sidebar-item" aria-label="ContextInfo.schedule_run - 设置定时器"><!--[--><!--]--> ContextInfo.schedule_run - 设置定时器 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="../innerApi/system_function.html#contextinfo-cancel-schedule-run-取消由schedule-run产生的定时任务" class="router-link-active router-link-exact-active sidebar-item" aria-label="ContextInfo.cancel_schedule_run - 取消由schedule_run产生的定时任务"><!--[--><!--]--> ContextInfo.cancel_schedule_run - 取消由schedule_run产生的定时任务 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="../innerApi/system_function.html#contextinfo-run-time-设置定时器" class="router-link-active router-link-exact-active sidebar-item" aria-label="ContextInfo.run_time - 设置定时器"><!--[--><!--]--> ContextInfo.run_time - 设置定时器 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="../innerApi/system_function.html#stop-停止处理函数" class="router-link-active router-link-exact-active sidebar-item" aria-label="stop - 停止处理函数"><!--[--><!--]--> stop - 停止处理函数 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="../innerApi/system_function.html#contextinfo-is-last-bar-是否为最后一根k线" class="router-link-active router-link-exact-active sidebar-item" aria-label="ContextInfo.is_last_bar - 是否为最后一根K线"><!--[--><!--]--> ContextInfo.is_last_bar - 是否为最后一根K线 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="../innerApi/system_function.html#contextinfo-is-new-bar-判定是否为新的-k-线" class="router-link-active router-link-exact-active sidebar-item" aria-label="ContextInfo.is_new_bar - 判定是否为新的 K 线"><!--[--><!--]--> ContextInfo.is_new_bar - 判定是否为新的 K 线 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="../innerApi/system_function.html#contextinfo-get-stock-name-根据代码获取名称" class="router-link-active router-link-exact-active sidebar-item" aria-label="ContextInfo.get_stock_name - 根据代码获取名称"><!--[--><!--]--> ContextInfo.get_stock_name - 根据代码获取名称 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="../innerApi/system_function.html#contextinfo-get-open-date-根据代码返回对应股票的上市时间" class="router-link-active router-link-exact-active sidebar-item" aria-label="ContextInfo.get_open_date - 根据代码返回对应股票的上市时间"><!--[--><!--]--> ContextInfo.get_open_date - 根据代码返回对应股票的上市时间 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="../innerApi/system_function.html#create-sector-创建板块" class="router-link-active router-link-exact-active sidebar-item" aria-label="create_sector - 创建板块"><!--[--><!--]--> create_sector - 创建板块 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="../innerApi/system_function.html#create-sector-folder-创建板块目录节点" class="router-link-active router-link-exact-active sidebar-item" aria-label="create_sector_folder - 创建板块目录节点"><!--[--><!--]--> create_sector_folder - 创建板块目录节点 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="../innerApi/system_function.html#get-sector-list-获取板块目录信息" class="router-link-active router-link-exact-active sidebar-item" aria-label="get_sector_list - 获取板块目录信息"><!--[--><!--]--> get_sector_list - 获取板块目录信息 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="../innerApi/system_function.html#reset-sector-stock-list-设置板块成分股" class="router-link-active router-link-exact-active sidebar-item" aria-label="reset_sector_stock_list - 设置板块成分股"><!--[--><!--]--> reset_sector_stock_list - 设置板块成分股 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="../innerApi/system_function.html#remove-stock-from-sector-移除板块成分股" class="router-link-active router-link-exact-active sidebar-item" aria-label="remove_stock_from_sector - 移除板块成分股"><!--[--><!--]--> remove_stock_from_sector - 移除板块成分股 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="../innerApi/system_function.html#add-stock-to-sector-添加板块成分股" class="router-link-active router-link-exact-active sidebar-item" aria-label="add_stock_to_sector - 添加板块成分股"><!--[--><!--]--> add_stock_to_sector - 添加板块成分股 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="../innerApi/data_function.html" class="sidebar-item" aria-label="行情函数"><!--[--><!--]--> 行情函数 <!--[--><!--]--></a><!----></li><li><a href="../innerApi/trading_function.html" class="sidebar-item" aria-label="交易函数"><!--[--><!--]--> 交易函数 <!--[--><!--]--></a><!----></li><li><a href="../innerApi/callback_function.html" class="sidebar-item" aria-label="成交回报实时主推函数"><!--[--><!--]--> 成交回报实时主推函数 <!--[--><!--]--></a><!----></li><li><a href="../innerApi/quote_function.html" class="sidebar-item" aria-label="引用函数"><!--[--><!--]--> 引用函数 <!--[--><!--]--></a><!----></li><li><a href="../innerApi/drawing_function.html" class="sidebar-item" aria-label="绘图函数"><!--[--><!--]--> 绘图函数 <!--[--><!--]--></a><!----></li><li><a href="../innerApi/enum_constants.html" class="sidebar-item" aria-label="枚举常量"><!--[--><!--]--> 枚举常量 <!--[--><!--]--></a><!----></li><li><a href="../innerApi/code_examples.html" class="sidebar-item" aria-label="完整示例"><!--[--><!--]--> 完整示例 <!--[--><!--]--></a><!----></li><li><a href="../innerApi/question_answer.html" class="sidebar-item" aria-label="常见问题"><!--[--><!--]--> 常见问题 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page" data-v-3c904194><!--[--><!--]--><div class="theme-default-contents" data-v-3c904194><!----><!--[--><!--]--><div class="theme-default-content" data-v-3c904194><div data-v-3c904194><h3 id="contextinfo-对象" tabindex="-1"><a class="header-anchor" href="#contextinfo-对象" aria-hidden="true">#</a> ContextInfo 对象</h3><p>ContextInfo 是策略运行环境对象，是 init, after_init, handlebar 等基本方法的入参，里面包括了终端自带的属性和方法。一般情况下不建议对ContextInfo添加自定义属性，ContextInfo会随着bar的切换而重置到上一根bar的结束状态，建议用自建的全局变量来存储。<a href="../innerApi/question_answer.html?id=null#%E7%B3%BB%E7%BB%9F%E5%AF%B9%E8%B1%A1-contextinfo-%E9%80%90-k-%E7%BA%BF%E4%BF%9D%E5%AD%98%E7%9A%84%E6%9C%BA%E5%88%B6" target="_blank" rel="noopener noreferrer">详细说明请看这里<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a></p><h3 id="init-初始化函数" tabindex="-1"><a class="header-anchor" href="#init-初始化函数" aria-hidden="true">#</a> init - 初始化函数</h3><p>初始化函数，只在整个策略开始时调用运行到一次。用于初始订阅行情，订阅账号信息使用。init函数执行完成前部分接口无法使用，如交易日获取函数get_trading_dates。</p><p><strong>系统函数 不可被手动调用</strong></p><p><strong>参数：</strong></p><table><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td><code>ContextInfo</code></td><td><code>object</code></td><td>策略运行环境对象，可以用于存储自定义的全局变量</td></tr></tbody></table><p><strong>返回：</strong> 无</p><p><strong>示例：</strong></p><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-52-0" aria-selected="true">python</button></div><!--[--><div class="vp-tab active" id="tab-52-0" role="tabpanel" aria-expanded="true"><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#FF79C6;">def</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">init</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">ContextInfo</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">    ContextInfo.initProfit </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;">0</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div><!--]--></div><p><strong>在init函数中订阅行情示例：</strong></p><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-60-0" aria-selected="true">python</button></div><!--[--><div class="vp-tab active" id="tab-60-0" role="tabpanel" aria-expanded="true"><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#6272A4;">#coding:gbk</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6;">def</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">init</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">C</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">	</span><span style="color:#6272A4;">#init函数入参为ContextInfo对象 定义时可以选择更简短的形参名 如C</span></span>
<span class="line"><span style="color:#F8F8F2;">	</span><span style="color:#6272A4;">#在init函数中 可以进行 订阅行情的操作</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#6272A4;">#如需在行情回调函数中下单 下单函数需要传入ContextInfo对象 可以通过在init中定义回调函数 来使用外层的ContextInfo</span></span>
<span class="line"><span style="color:#F8F8F2;">	</span><span style="color:#FF79C6;">def</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">my_callback_function</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">data</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">		</span><span style="color:#6272A4;">#自定义行情回调函数 入参为指数据字典</span></span>
<span class="line"><span style="color:#F8F8F2;">		</span><span style="color:#8BE9FD;">print</span><span style="color:#F8F8F2;">(data)</span></span>
<span class="line"><span style="color:#F8F8F2;">	stock </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">600000.SH</span><span style="color:#E9F284;">&#39;</span></span>
<span class="line"><span style="color:#F8F8F2;">	C.subscribe_quote(stock, </span><span style="color:#FFB86C;font-style:italic;">period</span><span style="color:#F8F8F2;"> </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">5m</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#FFB86C;font-style:italic;">callback</span><span style="color:#F8F8F2;"> </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> my_callback_function)</span></span>
<span class="line"><span style="color:#F8F8F2;">	</span><span style="color:#6272A4;">#init函数执行完成后 </span></span>
<span class="line"><span style="color:#F8F8F2;">	</span><span style="color:#8BE9FD;">print</span><span style="color:#F8F8F2;">(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">init函数执行完成</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--]--></div><h3 id="after-init-初始化后函数" tabindex="-1"><a class="header-anchor" href="#after-init-初始化后函数" aria-hidden="true">#</a> after_init - 初始化后函数</h3><p>后初始化函数，在初始化函数执行完成后被调用一次。可以用于放置一次性触发的下单，取数据操作代码。</p><p>系统会在<code>init</code>函数执行完后和执行<code>handlebar</code>之前调用<code>after_init</code>, 有些<code>init</code>里不支持的函数比如<a href="../pages/fd9cbd/#_23-%E8%8E%B7%E5%8F%96%E6%8C%87%E5%AE%9A%E4%B8%AA%E8%82%A1-%E5%90%88%E7%BA%A6-%E6%8C%87%E6%95%B0%E7%9A%84-k-%E7%BA%BF-%E4%BA%A4%E6%98%93%E6%97%A5-%E5%88%97%E8%A1%A8-contextinfo-get-trading-dates" class="">ContextInfo.get_trading_dates</a>可以在<code>after_init</code>里调用。</p><p><strong>系统函数 不可被手动调用</strong></p><p><strong>参数：</strong></p><table><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td><code>ContextInfo</code></td><td><code>object</code></td><td>策略运行环境对象，可以用于存储自定义的全局变量</td></tr></tbody></table><p><strong>返回：</strong> 无</p><p><strong>示例：</strong></p><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-114-0" aria-selected="true">python</button></div><!--[--><div class="vp-tab active" id="tab-114-0" role="tabpanel" aria-expanded="true"><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#6272A4;">#coding:gbk</span></span>
<span class="line"><span style="color:#FF79C6;">def</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">init</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">ContextInfo</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#8BE9FD;">print</span><span style="color:#F8F8F2;">(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">init</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)  </span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6;">def</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">after_init</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">ContextInfo</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#8BE9FD;">print</span><span style="color:#F8F8F2;">(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">系统会在init函数执行完后和执行handlebar之前调用after_init</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6;">def</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">handlebar</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">ContextInfo</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#FF79C6;">if</span><span style="color:#F8F8F2;"> ContextInfo.is_last_bar():</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#8BE9FD;">print</span><span style="color:#F8F8F2;">(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">handlebar</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--]--></div><p><strong>after_init函数中立刻下单示例：</strong></p><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-122-0" aria-selected="true">python</button></div><!--[--><div class="vp-tab active" id="tab-122-0" role="tabpanel" aria-expanded="true"><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#6272A4;">#coding:gbk</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6;">def</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">after_init</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">C</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">	</span><span style="color:#6272A4;">#after_init 函数 可以用于执行运行开始时 需要执行一次的代码 例如下一笔委托</span></span>
<span class="line"><span style="color:#F8F8F2;">	</span><span style="color:#6272A4;">#account变量是模型交易界面 添加策略时选择的资金账号 不需要手动填写 交易模型需要在模型交易界面运行 才有效</span></span>
<span class="line"><span style="color:#F8F8F2;">	</span><span style="color:#6272A4;">#快速交易参数(quickTrade )填2 passorder函数执行后立刻下单 不会等待k线走完再委托。 可以在after_init函数 run_time函数注册的回调函数里进行委托 </span></span>
<span class="line"><span style="color:#F8F8F2;">	msg </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#FF79C6;">f</span><span style="color:#F1FA8C;">&quot;投资备注字符串 用来区分不同委托&quot;</span></span>
<span class="line"><span style="color:#F8F8F2;">	passorder(</span><span style="color:#BD93F9;">23</span><span style="color:#F8F8F2;">, </span><span style="color:#BD93F9;">1101</span><span style="color:#F8F8F2;">, account, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">600000.SH</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#BD93F9;">5</span><span style="color:#F8F8F2;">, </span><span style="color:#FF79C6;">-</span><span style="color:#BD93F9;">1</span><span style="color:#F8F8F2;">, </span><span style="color:#BD93F9;">100</span><span style="color:#F8F8F2;">, </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">测试下单</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#BD93F9;">2</span><span style="color:#F8F8F2;">, msg, C)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--]--></div><h3 id="handlebar-行情事件函数" tabindex="-1"><a class="header-anchor" href="#handlebar-行情事件函数" aria-hidden="true">#</a> handlebar - 行情事件函数</h3><p><strong>系统函数 不可被手动调用</strong></p><p><strong>释义：</strong> 行情事件函数，每根 K 线运行一次；实时行情获取状态下，先每根历史 K 线运行一次，再在每个 tick 数据来后驱动运行一次</p><p>历史k线上，按时间顺序每根K线触发一次调用；盘中，每个新到达的TICK数据驱动运行一次。可以作为行情驱动的函数，实现指标计算，回测，实盘下单的效果。</p><p><strong>参数：</strong></p><table><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td><code>ContextInfo</code></td><td><code>object</code></td><td>策略运行环境对象，可以用于存储自定义的全局变量</td></tr></tbody></table><p><strong>返回：</strong> 无</p><p><strong>示例：</strong></p><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#FF79C6;">def</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">handlebar</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">ContextInfo</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#6272A4;"># 输出当前运行到的 K 线的位置</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#8BE9FD;">print</span><span style="color:#F8F8F2;">(ContextInfo.barpos)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="contextinfo-schedule-run-设置定时器" tabindex="-1"><a class="header-anchor" href="#contextinfo-schedule-run-设置定时器" aria-hidden="true">#</a> ContextInfo.schedule_run - 设置定时器</h3><div class="custom-container tip"><p class="custom-container-title">说明</p><ol><li>该函数是新版设置定时器函数，相比旧版<code>run_time</code>，新版<code>schedule_run</code>新增了<code>任务分组</code>,<code>任务取消</code>等多种功能</li></ol></div><p><strong>原型:</strong></p><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-192-0" aria-selected="true">python</button></div><!--[--><div class="vp-tab active" id="tab-192-0" role="tabpanel" aria-expanded="true"><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#F8F8F2;">ContextInfo.schedule_run(</span></span>
<span class="line"><span style="color:#F8F8F2;">    func:Callable, </span><span style="color:#6272A4;"># 回调函数，到达定时器预定时间时触发调用，参数为ContextInfo类型，无需返回值，定义示例def on_timer(C:ContextInfo):</span></span>
<span class="line"><span style="color:#F8F8F2;">    time_point:Union[dt.datetime,</span><span style="color:#8BE9FD;font-style:italic;">str</span><span style="color:#F8F8F2;">], </span><span style="color:#6272A4;"># 表示预定的第一次触发时间，如果设置定时器时已经过了预定时间，会立即执行func以及后续逻辑；当使用str类型时，格式为&#39;yyyymmddHHMMSS&#39;如&#39;20231231235959&#39;，需要满足转换dt.datetime.strptime(&#39;20231231235959&#39;,&#39;%Y%m%d%H%M%S&#39;)</span></span>
<span class="line"><span style="color:#F8F8F2;">    repeat_times:</span><span style="color:#FFB86C;font-style:italic;">int</span><span style="color:#FF79C6;">=</span><span style="color:#BD93F9;">0</span><span style="color:#F8F8F2;">, </span><span style="color:#6272A4;"># 表示在预定时间触发后按interval间隔再触发多少次</span></span>
<span class="line"><span style="color:#F8F8F2;">    interval:datetime.timedelta</span><span style="color:#FF79C6;">=</span><span style="color:#BD93F9;">None</span><span style="color:#F8F8F2;">, </span><span style="color:#6272A4;"># 表示预定时间触发后的后续重复执行的时间间隔</span></span>
<span class="line"><span style="color:#F8F8F2;">    name:</span><span style="color:#FFB86C;font-style:italic;">str</span><span style="color:#FF79C6;">=</span><span style="color:#E9F284;">&#39;&#39;</span><span style="color:#F8F8F2;"> </span><span style="color:#6272A4;"># 定时器任务组名，可用于定时器分组，多次设置同名定时任务不会互相覆盖，会计入同一个任务组，按任务组名取消时会全部取消</span></span>
<span class="line"><span style="color:#F8F8F2;">    )</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--]--></div><p><strong>参数：</strong></p><table><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td><code>func</code></td><td><code>Callable</code></td><td>回调函数，到达定时器预定时间时触发调用，参数为ContextInfo类型，无需返回值，定义示例def on_timer(C:ContextInfo): pass</td></tr><tr><td><code>time_point</code></td><td><code>Union[datetime.datetime,str]</code></td><td>表示预定的第一次触发时间，如果设置定时器时已经过了预定时间，会立即执行func以及后续逻辑；当使用str类型时，格式为&#39;yyyymmddHHMMSS&#39;如&#39;20231231235959&#39;，需要满足转换datetime.datetime.strptime(&#39;20231231235959&#39;,&#39;%Y%m%d%H%M%S&#39;)</td></tr><tr><td><code>repeat_times</code></td><td><code>int</code></td><td>表示在预定时间触发后按interval间隔再触发多少次，传<code>-1</code>表示不限制次数</td></tr><tr><td><code>interval</code></td><td><code>datetime.timedelta</code></td><td>表示预定时间触发后的后续重复执行的时间间隔</td></tr><tr><td><code>name</code></td><td><code>str</code></td><td>定时器任务组名，可用于定时器分组，多次设置同名定时任务不会互相覆盖，会计入同一个任务组，按任务组名取消时会全部取消</td></tr></tbody></table><p><strong>回调函数参数：</strong> ContextInfo：策略模型全局对象</p><p><strong>返回值：</strong></p><p><code>int</code>类型，表示本次调用后生成的定时任务号，可用于取消本次定时任务，全局唯一不重复</p><p><strong>示例：</strong></p><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-284-0" aria-selected="true">python</button></div><!--[--><div class="vp-tab active" id="tab-284-0" role="tabpanel" aria-expanded="true"><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#FF79C6;">import</span><span style="color:#F8F8F2;"> datetime </span><span style="color:#FF79C6;">as</span><span style="color:#F8F8F2;"> dt</span></span>
<span class="line"><span style="color:#FF79C6;">def</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">on_timer</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">C</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;">ContextInfo):</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#8BE9FD;">print</span><span style="color:#F8F8F2;">(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">hello world</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#FF79C6;">def</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">init</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">ContextInfo</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">    tid</span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;">ContextInfo.schedule_run(on_timer,</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">20231231235959</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">,</span><span style="color:#FF79C6;">-</span><span style="color:#BD93F9;">1</span><span style="color:#F8F8F2;">,dt.timedelta(</span><span style="color:#FFB86C;font-style:italic;">minutes</span><span style="color:#FF79C6;">=</span><span style="color:#BD93F9;">1</span><span style="color:#F8F8F2;">),</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">my_timer</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#FF79C6;">def</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">handlebar</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">ContextInfo</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#FF79C6;">pass</span></span>
<span class="line"><span style="color:#6272A4;">#此例为自2023-12-31 23:59:59后每60s运行一次on_timer</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--]--></div><h3 id="contextinfo-cancel-schedule-run-取消由schedule-run产生的定时任务" tabindex="-1"><a class="header-anchor" href="#contextinfo-cancel-schedule-run-取消由schedule-run产生的定时任务" aria-hidden="true">#</a> ContextInfo.cancel_schedule_run - 取消由schedule_run产生的定时任务</h3><p><strong>原型：</strong></p><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-295-0" aria-selected="true">python</button></div><!--[--><div class="vp-tab active" id="tab-295-0" role="tabpanel" aria-expanded="true"><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#F8F8F2;">ContextInfo.cancel_schedule_run(</span></span>
<span class="line"><span style="color:#F8F8F2;">    key:Union[seq</span><span style="color:#FF79C6;">:</span><span style="color:#8BE9FD;font-style:italic;">int</span><span style="color:#F8F8F2;">,name</span><span style="color:#FF79C6;">:</span><span style="color:#8BE9FD;font-style:italic;">str</span><span style="color:#F8F8F2;">] </span><span style="color:#6272A4;"># 定时任务号或定时任务组名称</span></span>
<span class="line"><span style="color:#F8F8F2;">    )</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--]--></div><p><strong>参数：</strong></p><table><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td><code>key:</code></td><td><code>Union[seq:int,name:str]</code></td><td>类型为int时，表示按任务号取消;类型为str时，表示按任务组取消，会取消组内所有定时任务</td></tr></tbody></table><p><strong>返回值：</strong></p><p><code>bool</code>类型，表示是否取消成功，即是否能按key找到目标定时任务</p><p><strong>示例：</strong></p><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-340-0" aria-selected="true">示例</button></div><!--[--><div class="vp-tab active" id="tab-340-0" role="tabpanel" aria-expanded="true"><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">ContextInfo.cancel_schedule_run(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">my_timer</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">) </span><span style="color:#6272A4;">#取消my_timer任务组所有定时任务</span></span>
<span class="line"><span style="color:#F8F8F2;">ContextInfo.cancel_schedule_run(</span><span style="color:#BD93F9;">1</span><span style="color:#F8F8F2;">) </span><span style="color:#6272A4;">#取消任务号为1的定时任务</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--]--></div><h3 id="contextinfo-run-time-设置定时器" tabindex="-1"><a class="header-anchor" href="#contextinfo-run-time-设置定时器" aria-hidden="true">#</a> ContextInfo.run_time - 设置定时器</h3><p>设置定时器函数，可以指定时间间隔，定时触发用户定义的回调函数。适用与在盘中，持续判断交易信号的模型。</p><p><strong>用法：</strong> <code>ContextInfo.run_time(funcName,period,startTime)</code> 定时触发指定的 funcName函数, funcName函数由用户定义, 入参为ContextInfo对象。</p><p><strong>参数：</strong></p><ul><li>funcName：回调函数名</li><li>period：重复调用的时间间隔,&#39;5nSecond&#39;表示每5秒运行1次回调函数,&#39;5nDay&#39;表示每5天运行一次回调函数,&#39;500nMilliSecond&#39;表示每500毫秒运行1次回调函数</li><li>startTime：表示定时器第一次启动的时间,如果要定时器立刻启动,可以设置历史的时间</li></ul><p><strong>回调函数参数：</strong> ContextInfo：策略模型全局对象</p><p><strong>示例：</strong></p><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-380-0" aria-selected="true">python</button></div><!--[--><div class="vp-tab active" id="tab-380-0" role="tabpanel" aria-expanded="true"><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#FF79C6;">import</span><span style="color:#F8F8F2;"> time</span></span>
<span class="line"><span style="color:#FF79C6;">def</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">init</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">ContextInfo</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">    ContextInfo.run_time(</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">f</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;">,</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">5nSecond</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;">,</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">2019-10-14 13:20:00</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#FF79C6;">def</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">f</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">ContextInfo</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#8BE9FD;">print</span><span style="color:#F8F8F2;">(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">hello world</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4;">#此例为自2019-10-14 13:20:00后每5s运行一次函数f</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container warning"><p class="custom-container-title">注意</p><ol><li>模型回测时无效</li><li>定时器没有结束方法，会随着策略的结束而结束。</li><li>period有nMilliSecond、nSecond和Day三个周期单元，部分周期下定时器函数在第一次运行之前会先等待一个period</li></ol></div></div><!--]--></div><h3 id="stop-停止处理函数" tabindex="-1"><a class="header-anchor" href="#stop-停止处理函数" aria-hidden="true">#</a> stop - 停止处理函数</h3><p><strong>系统函数 不可被手动调用</strong></p><p><strong>释义：</strong> PY策略模型关闭停止前运行到的函数，复杂策略模型，如中间有起线程可通过在该函数内实现停止线程操作。注意, 当前版本stop函数被调用时交易连接已断开, 不能在stop函数中做报单 / 撤单操作.</p><p><strong>参数：</strong></p><table><thead><tr><th>名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td><code>ContextInfo</code></td><td><code>object</code></td><td>策略运行环境对象，可以用于存储自定义的全局变量</td></tr></tbody></table><p><strong>示例：</strong></p><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-447-0" aria-selected="true">python</button></div><!--[--><div class="vp-tab active" id="tab-447-0" role="tabpanel" aria-expanded="true"><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#FF79C6;">def</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">stop</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">ContextInfo</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#8BE9FD;">print</span><span style="color:#F8F8F2;">( </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">strategy is stop !</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div><!--]--></div><h3 id="contextinfo-is-last-bar-是否为最后一根k线" tabindex="-1"><a class="header-anchor" href="#contextinfo-is-last-bar-是否为最后一根k线" aria-hidden="true">#</a> ContextInfo.is_last_bar - 是否为最后一根K线</h3><p><strong>用法：</strong> ContextInfo.is_last_bar()</p><p><strong>释义：</strong> 判定是否为最后一根 K 线</p><p><strong>参数：</strong> 无</p><p><strong>返回：</strong> bool，返回值含义：True 是右侧最新k线 False不是最新k线</p><blockquote><p>True：是</p><p>False：否</p></blockquote><p><strong>示例：</strong></p><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-478-0" aria-selected="true">python</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-478-1" aria-selected="false">result</button></div><!--[--><div class="vp-tab active" id="tab-478-0" role="tabpanel" aria-expanded="true"><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#FF79C6;">def</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">handlebar</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">ContextInfo</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#8BE9FD;">print</span><span style="color:#F8F8F2;">(ContextInfo.is_last_bar())</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div><div class="vp-tab" id="tab-478-1" role="tabpanel" aria-expanded="false"><div class="language-text line-numbers-mode" data-ext="text"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#F8F8F2;">False</span></span>
<span class="line"><span style="color:#F8F8F2;">False</span></span>
<span class="line"><span style="color:#F8F8F2;">...</span></span>
<span class="line"><span style="color:#F8F8F2;">False</span></span>
<span class="line"><span style="color:#F8F8F2;">True</span></span>
<span class="line"><span style="color:#F8F8F2;"></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--]--></div><h3 id="contextinfo-is-new-bar-判定是否为新的-k-线" tabindex="-1"><a class="header-anchor" href="#contextinfo-is-new-bar-判定是否为新的-k-线" aria-hidden="true">#</a> ContextInfo.is_new_bar - 判定是否为新的 K 线</h3><p><strong>用法：</strong> ContextInfo.is_new_bar()</p><p><strong>释义：</strong> 某根 K 线的第一个 tick 数据到来时，判定该 K 线为新的 K 线，其后的tick不会认为是新的 K 线</p><p><strong>参数：</strong> 无</p><p><strong>返回：</strong> bool，返回值含义：</p><blockquote><p>True：是</p><p>False：否</p></blockquote><p><strong>示例：</strong></p><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-512-0" aria-selected="true">python</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-512-1" aria-selected="false">result</button></div><!--[--><div class="vp-tab active" id="tab-512-0" role="tabpanel" aria-expanded="true"><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#FF79C6;">def</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">handlebar</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">ContextInfo</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#8BE9FD;">print</span><span style="color:#F8F8F2;">(ContextInfo.is_new_bar()) </span><span style="color:#6272A4;">#历史k线每根都是新k线 盘中 每根新k线第一个分笔返回True 其他分笔返回False</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div><div class="vp-tab" id="tab-512-1" role="tabpanel" aria-expanded="false"><div class="language-text line-numbers-mode" data-ext="text"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#F8F8F2;">True</span></span>
<span class="line"><span style="color:#F8F8F2;">True</span></span>
<span class="line"><span style="color:#F8F8F2;">...</span></span>
<span class="line"><span style="color:#F8F8F2;">True</span></span>
<span class="line"><span style="color:#F8F8F2;">False</span></span>
<span class="line"><span style="color:#F8F8F2;"></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--]--></div><h3 id="contextinfo-get-stock-name-根据代码获取名称" tabindex="-1"><a class="header-anchor" href="#contextinfo-get-stock-name-根据代码获取名称" aria-hidden="true">#</a> ContextInfo.get_stock_name - 根据代码获取名称</h3><p><strong>用法：</strong> ContextInfo.get_stock_name(&#39;stockcode&#39;)</p><p><strong>释义：</strong> 根据代码获取名称</p><p><strong>参数：</strong> stockcode：股票代码，如&#39;000001.SZ&#39;，缺省值 &#39; &#39; 默认为当前图代码</p><p><strong>返回：</strong> string（GBK编码）</p><p><strong>示例：</strong></p><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-538-0" aria-selected="true">示例</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-538-1" aria-selected="false">返回值</button></div><!--[--><div class="vp-tab active" id="tab-538-0" role="tabpanel" aria-expanded="true"><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#FF79C6;">def</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">handlebar</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">ContextInfo</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#8BE9FD;">print</span><span style="color:#F8F8F2;">(ContextInfo.get_stock_name(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">000001.SZ</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">))</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div><div class="vp-tab" id="tab-538-1" role="tabpanel" aria-expanded="false"><div class="language-text line-numbers-mode" data-ext="text"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#F8F8F2;">平安银行</span></span>
<span class="line"><span style="color:#F8F8F2;"></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></div><!--]--></div><h3 id="contextinfo-get-open-date-根据代码返回对应股票的上市时间" tabindex="-1"><a class="header-anchor" href="#contextinfo-get-open-date-根据代码返回对应股票的上市时间" aria-hidden="true">#</a> ContextInfo.get_open_date - 根据代码返回对应股票的上市时间</h3><p><strong>用法：</strong> ContextInfo.get_open_date(&#39;stockcode&#39;)</p><p><strong>释义：</strong> 根据代码返回对应股票的上市时间</p><p><strong>参数：</strong> stockcode：股票代码，如&#39;000001.SZ&#39;，缺省值 &#39; &#39; 默认为当前图代码</p><p><strong>返回：</strong> number</p><p><strong>示例：</strong></p><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-564-0" aria-selected="true">python</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-564-1" aria-selected="false">result</button></div><!--[--><div class="vp-tab active" id="tab-564-0" role="tabpanel" aria-expanded="true"><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#FF79C6;">def</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">init</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">ContextInfo</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#8BE9FD;">print</span><span style="color:#F8F8F2;">(ContextInfo.get_open_date(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">000001.SZ</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">))</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div><div class="vp-tab" id="tab-564-1" role="tabpanel" aria-expanded="false"><div class="language-text line-numbers-mode" data-ext="text"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#F8F8F2;">19910403</span></span>
<span class="line"><span style="color:#F8F8F2;"></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></div><!--]--></div><h3 id="create-sector-创建板块" tabindex="-1"><a class="header-anchor" href="#create-sector-创建板块" aria-hidden="true">#</a> create_sector - 创建板块</h3><p><strong>用法：</strong> create_sector(parent_node,sector_name,overwrite)</p><p><strong>释义：</strong> 创建板块</p><p><strong>参数：</strong></p><ul><li>parent_node：str，父节点，&#39;&#39;为&#39;我的&#39;（默认目录）</li><li>sector_name：str，要创建的板块名</li><li>overwrite：bool，是否覆盖。如果目标节点已存在，为True时跳过，为False时在sector_name后增加数字编号，编号为从1开始自增的第一个不重复的值。</li></ul><p><strong>返回：</strong> sector_name2：实际创建的板块名</p><p><strong>示例：</strong></p><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-607-0" aria-selected="true">python</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-607-1" aria-selected="false">result</button></div><!--[--><div class="vp-tab active" id="tab-607-0" role="tabpanel" aria-expanded="true"><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#F8F8F2;">sector</span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;">create_sector(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">我的</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">,</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">新建板块</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">,</span><span style="color:#BD93F9;">False</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></div><div class="vp-tab" id="tab-607-1" role="tabpanel" aria-expanded="false"><div class="language-text line-numbers-mode" data-ext="text"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#F8F8F2;">新建板块</span></span>
<span class="line"><span style="color:#F8F8F2;"></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></div><!--]--></div><h3 id="create-sector-folder-创建板块目录节点" tabindex="-1"><a class="header-anchor" href="#create-sector-folder-创建板块目录节点" aria-hidden="true">#</a> create_sector_folder - 创建板块目录节点</h3><p><strong>用法：</strong> create_sector_folder(parent_node,folder_name,overwrite)</p><p><strong>释义：</strong> 创建板块目录节点</p><p><strong>参数：</strong></p><ul><li>parent_node：str，父节点，&#39;&#39;为&#39;我的&#39;（默认目录）</li><li>sector_name：str，要创建的节点名</li><li>overwrite：bool，是否覆盖。如果目标节点已存在，为True时跳过，为False时在folder_name后增加数字编号，编号为从1开始自增的第一个不重复的值。</li></ul><p><strong>返回：</strong> sector_name2：实际创建的节点名</p><p><strong>示例：</strong></p><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-650-0" aria-selected="true">python</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-650-1" aria-selected="false">result</button></div><!--[--><div class="vp-tab active" id="tab-650-0" role="tabpanel" aria-expanded="true"><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#F8F8F2;">folder</span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;">create_sector_folder(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">我的</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">,</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">新建分类</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">,</span><span style="color:#BD93F9;">False</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></div><div class="vp-tab" id="tab-650-1" role="tabpanel" aria-expanded="false"><div class="language-text line-numbers-mode" data-ext="text"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#F8F8F2;">新建分类</span></span>
<span class="line"><span style="color:#F8F8F2;"></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></div><!--]--></div><h3 id="get-sector-list-获取板块目录信息" tabindex="-1"><a class="header-anchor" href="#get-sector-list-获取板块目录信息" aria-hidden="true">#</a> get_sector_list - 获取板块目录信息</h3><p><strong>用法：</strong> get_sector_list(node)</p><p><strong>释义：</strong> 获取板块目录信息</p><p><strong>参数：</strong></p><ul><li>node：str，板块节点名，&#39;&#39;为顶层目录</li></ul><p><strong>返回：</strong> info_list：[[s1,s2,...],[f1,f2,...]]s为板块名，f为目录节点名，例如[[&#39;我的自选&#39;],[&#39;新建分类1&#39;]]</p><p><strong>示例：</strong></p><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-683-0" aria-selected="true">python</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-683-1" aria-selected="false">result</button></div><!--[--><div class="vp-tab active" id="tab-683-0" role="tabpanel" aria-expanded="true"><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#F8F8F2;">get_sector_list(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">我的</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></div><div class="vp-tab" id="tab-683-1" role="tabpanel" aria-expanded="false"><div class="language-text line-numbers-mode" data-ext="text"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#F8F8F2;">[[&#39;我的自选&#39;, &#39;龙头&#39;, &#39;卖出篮子&#39;, &#39;TMP&#39;, &#39;震荡&#39;, &#39;待分析&#39;], []]</span></span>
<span class="line"><span style="color:#F8F8F2;"></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></div><!--]--></div><h3 id="reset-sector-stock-list-设置板块成分股" tabindex="-1"><a class="header-anchor" href="#reset-sector-stock-list-设置板块成分股" aria-hidden="true">#</a> reset_sector_stock_list - 设置板块成分股</h3><p><strong>用法：</strong> reset_sector_stock_list(sector,stock_list)</p><p><strong>释义：</strong> 设置板块成分股</p><p><strong>参数：</strong></p><ul><li>sector：板块名</li><li>stock_list：list，品种代码列表，例如[&#39;000001.SZ&#39;,&#39;600000.SH&#39;]</li></ul><p><strong>返回：</strong> result：bool，操作成功为True，失败为False</p><p><strong>示例：</strong></p><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-721-0" aria-selected="true">python</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-721-1" aria-selected="false">result</button></div><!--[--><div class="vp-tab active" id="tab-721-0" role="tabpanel" aria-expanded="true"><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#F8F8F2;">reset_sector_stock_list(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">我的自选</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">,[</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">000001.SZ</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">,</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">600000.SH</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">])</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></div><div class="vp-tab" id="tab-721-1" role="tabpanel" aria-expanded="false"><div class="language-text line-numbers-mode" data-ext="text"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#F8F8F2;">True / False</span></span>
<span class="line"><span style="color:#F8F8F2;"></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p></p></div><!--]--></div><h3 id="remove-stock-from-sector-移除板块成分股" tabindex="-1"><a class="header-anchor" href="#remove-stock-from-sector-移除板块成分股" aria-hidden="true">#</a> remove_stock_from_sector - 移除板块成分股</h3><p><strong>用法：</strong> remove_stock_from_sector(sector,stock_code)</p><p><strong>释义：</strong> 移除板块成分股</p><p><strong>参数：</strong></p><ul><li>sector：板块名</li><li>stock_code：品种代码，例如&#39;000001.SZ&#39;</li></ul><p><strong>返回：</strong> result：bool，操作成功为True，失败为False</p><p><strong>示例：</strong></p><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-762-0" aria-selected="true">python</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-762-1" aria-selected="false">result</button></div><!--[--><div class="vp-tab active" id="tab-762-0" role="tabpanel" aria-expanded="true"><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#F8F8F2;">remove_stock_from_sector(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">我的自选</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">,</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">000001.SZ</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></div><div class="vp-tab" id="tab-762-1" role="tabpanel" aria-expanded="false"><div class="language-text line-numbers-mode" data-ext="text"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#F8F8F2;">True / False</span></span>
<span class="line"><span style="color:#F8F8F2;"></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p></p></div><!--]--></div><h3 id="add-stock-to-sector-添加板块成分股" tabindex="-1"><a class="header-anchor" href="#add-stock-to-sector-添加板块成分股" aria-hidden="true">#</a> add_stock_to_sector - 添加板块成分股</h3><p><strong>用法：</strong> add_stock_to_sector(sector,stock_code)</p><p><strong>释义：</strong> 添加板块成分股</p><p><strong>参数：</strong></p><ul><li>sector：板块名</li><li>stock_code：品种代码，例如&#39;000001.SZ&#39;</li></ul><p><strong>返回：</strong> result：bool，操作成功为True，失败为False</p><p><strong>示例：</strong></p><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-803-0" aria-selected="true">python</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-803-1" aria-selected="false">result</button></div><!--[--><div class="vp-tab active" id="tab-803-0" role="tabpanel" aria-expanded="true"><div class="language-python line-numbers-mode" data-ext="py"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#F8F8F2;">add_stock_to_sector(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">我的自选</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">,</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">000001.SZ</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></div><div class="vp-tab" id="tab-803-1" role="tabpanel" aria-expanded="false"><div class="language-text line-numbers-mode" data-ext="text"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#F8F8F2;">True / False</span></span>
<span class="line"><span style="color:#F8F8F2;"></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p></p></div><!--]--></div></div></div><!--[--><!--]--></div>

<nav class="page-nav" data-v-3c904194><p class="inner"><span class="prev"><a href="../innerApi/data_structure.html" class="" aria-label="数据结构"><!--[--><!--]--> 数据结构 <!--[--><!--]--></a></span><span class="next"><a href="../innerApi/data_function.html" class="" aria-label="行情函数"><!--[--><!--]--> 行情函数 <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    
  <div class="toFixedCopy wxFixed" style="text-align: center"><a href="https://work.weixin.qq.com/ca/cawcde1dc261ca71f1" target="_blank" rel="noopener noreferrer">联系微信获取权限<br><img src="../assets/联系客户经理.png" alt="微信扫码联系客服" title="点击联系客服" style="width:150px;"></a></div></body>
</html>
